<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<meta content="text/html; charset=UTF-8" http-equiv="content-type"/>
<title>Workbook</title>
<style>
p.userData {
    font-family: sans-serif;
    font-size: 16px;
}

p.title_wb {
    font-family: sans-serif;
    font-weight: bold;
    font-size: 20px;
    text-decoration: underline;
}

div.index {
    border: 1px solid black;
    width: 400px;
    padding: 10px;
    margin-top: 40px;
    margin-bottom: 50px;
}

p.index_title_bl {
    font-family: sans-serif;
    font-weight: bold;
    font-size: 12px;
    text-transform: uppercase;
    margin: 7px;
}

p.index_title_un {
    font-family: sans-serif;
    font-weight: bold;
    font-size: 12px;
    padding-left: 20px;
    margin: 4px;
}

a.index_title_un {
    text-decoration: none;
    color: black;
}

a.index_title_un:hover {
    text-decoration: none;
    color: #d2d2d2;
}

a.index_title_un:visited {
    text-decoration: none;
    color: black;
}

p.index_title_sc {
    font-family: sans-serif;
    font-size: 12px;
    padding-left: 40px;
    font-style: italic;
    margin: 4px;
}

a.index_title_sc {
    text-decoration: none;
    color: black;
}

a.index_title_sc:hover {
    text-decoration: none;
    color: #d2d2d2;
}

a.index_title_sc:visited {
    text-decoration: none;
    color: black;
}

p.title_bl {
    font-family: sans-serif;
    font-weight: bold;
    font-size: 16px;
    text-transform: uppercase;
}

p.title_un {
    font-family: sans-serif;
    font-weight: bold;
    font-size: 14px;
}

p.title_sc {
    font-family: sans-serif;
    font-style: italic;
    font-size: 14px;
}

.note {
    background-color: #e3e9f5;
}
.mark_parser {
    font-size: 12px;
    font-family: sans-serif;
}

.mark_parser h1 {
    font-size: 14px;
    color: #3f6c97;
}

.mark_parser h2 {
    font-size: 13px;
    color: #3f6c97;
}

.mark_parser h3 {
    font-size: 13px;
    color: gray;
}

.mark_parser h4 {
    font-size: 13px;
    color: gray;
    font-style: italic;
}

.mark_parser h5 {
    font-size: 12px;
    color: gray;
}

.mark_parser h6 {
    font-size: 12px;
    color: gray;
    font-style: italic;
}

.mark_parser p {
    margin: 0px;
    padding: 3px;
}

.mark_parser ul {
}

.mark_parser ol {
}

.mark_parser li {
    margin: 0px;
    padding: 3px;
}

.mark_parser a {
    color: #0e66b9;
    text-decoration: underline;
}

.mark_parser a:hover {
    color: #7cbfff;
    text-decoration: underline;
}
/*

Original highlight.js style (c) Ivan Sagalaev <maniac@softwaremaniacs.org>

*/

.hljs {
  display: block;
  overflow-x: auto;
  padding: 0.5em;
  background: #F0F0F0;
}


/* Base color: saturation 0; */

.hljs,
.hljs-subst {
  color: #444;
}

.hljs-comment {
  color: #888888;
}

.hljs-keyword,
.hljs-attribute,
.hljs-selector-tag,
.hljs-meta-keyword,
.hljs-doctag,
.hljs-name {
  font-weight: bold;
}


/* User color: hue: 0 */

.hljs-type,
.hljs-string,
.hljs-number,
.hljs-selector-id,
.hljs-selector-class,
.hljs-quote,
.hljs-template-tag,
.hljs-deletion {
  color: #880000;
}

.hljs-title,
.hljs-section {
  color: #880000;
  font-weight: bold;
}

.hljs-regexp,
.hljs-symbol,
.hljs-variable,
.hljs-template-variable,
.hljs-link,
.hljs-selector-attr,
.hljs-selector-pseudo {
  color: #BC6060;
}


/* Language color: hue: 90; */

.hljs-literal {
  color: #78A960;
}

.hljs-built_in,
.hljs-bullet,
.hljs-code,
.hljs-addition {
  color: #397300;
}


/* Meta color: hue: 200 */

.hljs-meta {
  color: #1f7199;
}

.hljs-meta-string {
  color: #4d99bf;
}


/* Misc effects */

.hljs-emphasis {
  font-style: italic;
}

.hljs-strong {
  font-weight: bold;
}
</style>
<script>
/*! highlight.js v9.12.0 | BSD3 License | git.io/hljslicense */
!function(e){var n="object"==typeof window&&window||"object"==typeof self&&self;"undefined"!=typeof exports?e(exports):n&&(n.hljs=e({}),"function"==typeof define&&define.amd&&define([],function(){return n.hljs}))}(function(e){function n(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function t(e){return e.nodeName.toLowerCase()}function r(e,n){var t=e&&e.exec(n);return t&&0===t.index}function a(e){return k.test(e)}function i(e){var n,t,r,i,o=e.className+" ";if(o+=e.parentNode?e.parentNode.className:"",t=B.exec(o))return w(t[1])?t[1]:"no-highlight";for(o=o.split(/\s+/),n=0,r=o.length;r>n;n++)if(i=o[n],a(i)||w(i))return i}function o(e){var n,t={},r=Array.prototype.slice.call(arguments,1);for(n in e)t[n]=e[n];return r.forEach(function(e){for(n in e)t[n]=e[n]}),t}function u(e){var n=[];return function r(e,a){for(var i=e.firstChild;i;i=i.nextSibling)3===i.nodeType?a+=i.nodeValue.length:1===i.nodeType&&(n.push({event:"start",offset:a,node:i}),a=r(i,a),t(i).match(/br|hr|img|input/)||n.push({event:"stop",offset:a,node:i}));return a}(e,0),n}function c(e,r,a){function i(){return e.length&&r.length?e[0].offset!==r[0].offset?e[0].offset<r[0].offset?e:r:"start"===r[0].event?e:r:e.length?e:r}function o(e){function r(e){return" "+e.nodeName+'="'+n(e.value).replace('"',"&quot;")+'"'}s+="<"+t(e)+E.map.call(e.attributes,r).join("")+">"}function u(e){s+="</"+t(e)+">"}function c(e){("start"===e.event?o:u)(e.node)}for(var l=0,s="",f=[];e.length||r.length;){var g=i();if(s+=n(a.substring(l,g[0].offset)),l=g[0].offset,g===e){f.reverse().forEach(u);do c(g.splice(0,1)[0]),g=i();while(g===e&&g.length&&g[0].offset===l);f.reverse().forEach(o)}else"start"===g[0].event?f.push(g[0].node):f.pop(),c(g.splice(0,1)[0])}return s+n(a.substr(l))}function l(e){return e.v&&!e.cached_variants&&(e.cached_variants=e.v.map(function(n){return o(e,{v:null},n)})),e.cached_variants||e.eW&&[o(e)]||[e]}function s(e){function n(e){return e&&e.source||e}function t(t,r){return new RegExp(n(t),"m"+(e.cI?"i":"")+(r?"g":""))}function r(a,i){if(!a.compiled){if(a.compiled=!0,a.k=a.k||a.bK,a.k){var o={},u=function(n,t){e.cI&&(t=t.toLowerCase()),t.split(" ").forEach(function(e){var t=e.split("|");o[t[0]]=[n,t[1]?Number(t[1]):1]})};"string"==typeof a.k?u("keyword",a.k):x(a.k).forEach(function(e){u(e,a.k[e])}),a.k=o}a.lR=t(a.l||/\w+/,!0),i&&(a.bK&&(a.b="\\b("+a.bK.split(" ").join("|")+")\\b"),a.b||(a.b=/\B|\b/),a.bR=t(a.b),a.e||a.eW||(a.e=/\B|\b/),a.e&&(a.eR=t(a.e)),a.tE=n(a.e)||"",a.eW&&i.tE&&(a.tE+=(a.e?"|":"")+i.tE)),a.i&&(a.iR=t(a.i)),null==a.r&&(a.r=1),a.c||(a.c=[]),a.c=Array.prototype.concat.apply([],a.c.map(function(e){return l("self"===e?a:e)})),a.c.forEach(function(e){r(e,a)}),a.starts&&r(a.starts,i);var c=a.c.map(function(e){return e.bK?"\\.?("+e.b+")\\.?":e.b}).concat([a.tE,a.i]).map(n).filter(Boolean);a.t=c.length?t(c.join("|"),!0):{exec:function(){return null}}}}r(e)}function f(e,t,a,i){function o(e,n){var t,a;for(t=0,a=n.c.length;a>t;t++)if(r(n.c[t].bR,e))return n.c[t]}function u(e,n){if(r(e.eR,n)){for(;e.endsParent&&e.parent;)e=e.parent;return e}return e.eW?u(e.parent,n):void 0}function c(e,n){return!a&&r(n.iR,e)}function l(e,n){var t=N.cI?n[0].toLowerCase():n[0];return e.k.hasOwnProperty(t)&&e.k[t]}function p(e,n,t,r){var a=r?"":I.classPrefix,i='<span class="'+a,o=t?"":C;return i+=e+'">',i+n+o}function h(){var e,t,r,a;if(!E.k)return n(k);for(a="",t=0,E.lR.lastIndex=0,r=E.lR.exec(k);r;)a+=n(k.substring(t,r.index)),e=l(E,r),e?(B+=e[1],a+=p(e[0],n(r[0]))):a+=n(r[0]),t=E.lR.lastIndex,r=E.lR.exec(k);return a+n(k.substr(t))}function d(){var e="string"==typeof E.sL;if(e&&!y[E.sL])return n(k);var t=e?f(E.sL,k,!0,x[E.sL]):g(k,E.sL.length?E.sL:void 0);return E.r>0&&(B+=t.r),e&&(x[E.sL]=t.top),p(t.language,t.value,!1,!0)}function b(){L+=null!=E.sL?d():h(),k=""}function v(e){L+=e.cN?p(e.cN,"",!0):"",E=Object.create(e,{parent:{value:E}})}function m(e,n){if(k+=e,null==n)return b(),0;var t=o(n,E);if(t)return t.skip?k+=n:(t.eB&&(k+=n),b(),t.rB||t.eB||(k=n)),v(t,n),t.rB?0:n.length;var r=u(E,n);if(r){var a=E;a.skip?k+=n:(a.rE||a.eE||(k+=n),b(),a.eE&&(k=n));do E.cN&&(L+=C),E.skip||(B+=E.r),E=E.parent;while(E!==r.parent);return r.starts&&v(r.starts,""),a.rE?0:n.length}if(c(n,E))throw new Error('Illegal lexeme "'+n+'" for mode "'+(E.cN||"<unnamed>")+'"');return k+=n,n.length||1}var N=w(e);if(!N)throw new Error('Unknown language: "'+e+'"');s(N);var R,E=i||N,x={},L="";for(R=E;R!==N;R=R.parent)R.cN&&(L=p(R.cN,"",!0)+L);var k="",B=0;try{for(var M,j,O=0;;){if(E.t.lastIndex=O,M=E.t.exec(t),!M)break;j=m(t.substring(O,M.index),M[0]),O=M.index+j}for(m(t.substr(O)),R=E;R.parent;R=R.parent)R.cN&&(L+=C);return{r:B,value:L,language:e,top:E}}catch(T){if(T.message&&-1!==T.message.indexOf("Illegal"))return{r:0,value:n(t)};throw T}}function g(e,t){t=t||I.languages||x(y);var r={r:0,value:n(e)},a=r;return t.filter(w).forEach(function(n){var t=f(n,e,!1);t.language=n,t.r>a.r&&(a=t),t.r>r.r&&(a=r,r=t)}),a.language&&(r.second_best=a),r}function p(e){return I.tabReplace||I.useBR?e.replace(M,function(e,n){return I.useBR&&"\n"===e?"<br>":I.tabReplace?n.replace(/\t/g,I.tabReplace):""}):e}function h(e,n,t){var r=n?L[n]:t,a=[e.trim()];return e.match(/\bhljs\b/)||a.push("hljs"),-1===e.indexOf(r)&&a.push(r),a.join(" ").trim()}function d(e){var n,t,r,o,l,s=i(e);a(s)||(I.useBR?(n=document.createElementNS("http://www.w3.org/1999/xhtml","div"),n.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/<br[ \/]*>/g,"\n")):n=e,l=n.textContent,r=s?f(s,l,!0):g(l),t=u(n),t.length&&(o=document.createElementNS("http://www.w3.org/1999/xhtml","div"),o.innerHTML=r.value,r.value=c(t,u(o),l)),r.value=p(r.value),e.innerHTML=r.value,e.className=h(e.className,s,r.language),e.result={language:r.language,re:r.r},r.second_best&&(e.second_best={language:r.second_best.language,re:r.second_best.r}))}function b(e){I=o(I,e)}function v(){if(!v.called){v.called=!0;var e=document.querySelectorAll("pre code");E.forEach.call(e,d)}}function m(){addEventListener("DOMContentLoaded",v,!1),addEventListener("load",v,!1)}function N(n,t){var r=y[n]=t(e);r.aliases&&r.aliases.forEach(function(e){L[e]=n})}function R(){return x(y)}function w(e){return e=(e||"").toLowerCase(),y[e]||y[L[e]]}var E=[],x=Object.keys,y={},L={},k=/^(no-?highlight|plain|text)$/i,B=/\blang(?:uage)?-([\w-]+)\b/i,M=/((^(<[^>]+>|\t|)+|(?:\n)))/gm,C="</span>",I={classPrefix:"hljs-",tabReplace:null,useBR:!1,languages:void 0};return e.highlight=f,e.highlightAuto=g,e.fixMarkup=p,e.highlightBlock=d,e.configure=b,e.initHighlighting=v,e.initHighlightingOnLoad=m,e.registerLanguage=N,e.listLanguages=R,e.getLanguage=w,e.inherit=o,e.IR="[a-zA-Z]\\w*",e.UIR="[a-zA-Z_]\\w*",e.NR="\\b\\d+(\\.\\d+)?",e.CNR="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",e.BNR="\\b(0b[01]+)",e.RSR="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",e.BE={b:"\\\\[\\s\\S]",r:0},e.ASM={cN:"string",b:"'",e:"'",i:"\\n",c:[e.BE]},e.QSM={cN:"string",b:'"',e:'"',i:"\\n",c:[e.BE]},e.PWM={b:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},e.C=function(n,t,r){var a=e.inherit({cN:"comment",b:n,e:t,c:[]},r||{});return a.c.push(e.PWM),a.c.push({cN:"doctag",b:"(?:TODO|FIXME|NOTE|BUG|XXX):",r:0}),a},e.CLCM=e.C("//","$"),e.CBCM=e.C("/\\*","\\*/"),e.HCM=e.C("#","$"),e.NM={cN:"number",b:e.NR,r:0},e.CNM={cN:"number",b:e.CNR,r:0},e.BNM={cN:"number",b:e.BNR,r:0},e.CSSNM={cN:"number",b:e.NR+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",r:0},e.RM={cN:"regexp",b:/\//,e:/\/[gimuy]*/,i:/\n/,c:[e.BE,{b:/\[/,e:/\]/,r:0,c:[e.BE]}]},e.TM={cN:"title",b:e.IR,r:0},e.UTM={cN:"title",b:e.UIR,r:0},e.METHOD_GUARD={b:"\\.\\s*"+e.UIR,r:0},e});hljs.registerLanguage("java",function(e){var a="[À-ʸa-zA-Z_$][À-ʸa-zA-Z_$0-9]*",t=a+"(<"+a+"(\\s*,\\s*"+a+")*>)?",r="false synchronized int abstract float private char boolean static null if const for true while long strictfp finally protected import native final void enum else break transient catch instanceof byte super volatile case assert short package default double public try this switch continue throws protected public private module requires exports do",s="\\b(0[bB]([01]+[01_]+[01]+|[01]+)|0[xX]([a-fA-F0-9]+[a-fA-F0-9_]+[a-fA-F0-9]+|[a-fA-F0-9]+)|(([\\d]+[\\d_]+[\\d]+|[\\d]+)(\\.([\\d]+[\\d_]+[\\d]+|[\\d]+))?|\\.([\\d]+[\\d_]+[\\d]+|[\\d]+))([eE][-+]?\\d+)?)[lLfF]?",c={cN:"number",b:s,r:0};return{aliases:["jsp"],k:r,i:/<\/|#/,c:[e.C("/\\*\\*","\\*/",{r:0,c:[{b:/\w+@/,r:0},{cN:"doctag",b:"@[A-Za-z]+"}]}),e.CLCM,e.CBCM,e.ASM,e.QSM,{cN:"class",bK:"class interface",e:/[{;=]/,eE:!0,k:"class interface",i:/[:"\[\]]/,c:[{bK:"extends implements"},e.UTM]},{bK:"new throw return else",r:0},{cN:"function",b:"("+t+"\\s+)+"+e.UIR+"\\s*\\(",rB:!0,e:/[{;=]/,eE:!0,k:r,c:[{b:e.UIR+"\\s*\\(",rB:!0,r:0,c:[e.UTM]},{cN:"params",b:/\(/,e:/\)/,k:r,r:0,c:[e.ASM,e.QSM,e.CNM,e.CBCM]},e.CLCM,e.CBCM]},c,{cN:"meta",b:"@[A-Za-z]+"}]}});hljs.registerLanguage("python",function(e){var r={keyword:"and elif is global as in if from raise for except finally print import pass return exec else break not with class assert yield try while continue del or def lambda async await nonlocal|10 None True False",built_in:"Ellipsis NotImplemented"},b={cN:"meta",b:/^(>>>|\.\.\.) /},c={cN:"subst",b:/\{/,e:/\}/,k:r,i:/#/},a={cN:"string",c:[e.BE],v:[{b:/(u|b)?r?'''/,e:/'''/,c:[b],r:10},{b:/(u|b)?r?"""/,e:/"""/,c:[b],r:10},{b:/(fr|rf|f)'''/,e:/'''/,c:[b,c]},{b:/(fr|rf|f)"""/,e:/"""/,c:[b,c]},{b:/(u|r|ur)'/,e:/'/,r:10},{b:/(u|r|ur)"/,e:/"/,r:10},{b:/(b|br)'/,e:/'/},{b:/(b|br)"/,e:/"/},{b:/(fr|rf|f)'/,e:/'/,c:[c]},{b:/(fr|rf|f)"/,e:/"/,c:[c]},e.ASM,e.QSM]},s={cN:"number",r:0,v:[{b:e.BNR+"[lLjJ]?"},{b:"\\b(0o[0-7]+)[lLjJ]?"},{b:e.CNR+"[lLjJ]?"}]},i={cN:"params",b:/\(/,e:/\)/,c:["self",b,s,a]};return c.c=[a,s,b],{aliases:["py","gyp"],k:r,i:/(<\/|->|\?)|=>/,c:[b,s,a,e.HCM,{v:[{cN:"function",bK:"def"},{cN:"class",bK:"class"}],e:/:/,i:/[${=;\n,]/,c:[e.UTM,i,{b:/->/,eW:!0,k:"None"}]},{cN:"meta",b:/^[\t ]*@/,e:/$/},{b:/\b(print|exec)\(/}]}});hljs.registerLanguage("css",function(e){var c="[a-zA-Z-][a-zA-Z0-9_-]*",t={b:/[A-Z\_\.\-]+\s*:/,rB:!0,e:";",eW:!0,c:[{cN:"attribute",b:/\S/,e:":",eE:!0,starts:{eW:!0,eE:!0,c:[{b:/[\w-]+\(/,rB:!0,c:[{cN:"built_in",b:/[\w-]+/},{b:/\(/,e:/\)/,c:[e.ASM,e.QSM]}]},e.CSSNM,e.QSM,e.ASM,e.CBCM,{cN:"number",b:"#[0-9A-Fa-f]+"},{cN:"meta",b:"!important"}]}}]};return{cI:!0,i:/[=\/|'\$]/,c:[e.CBCM,{cN:"selector-id",b:/#[A-Za-z0-9_-]+/},{cN:"selector-class",b:/\.[A-Za-z0-9_-]+/},{cN:"selector-attr",b:/\[/,e:/\]/,i:"$"},{cN:"selector-pseudo",b:/:(:)?[a-zA-Z0-9\_\-\+\(\)"'.]+/},{b:"@(font-face|page)",l:"[a-z-]+",k:"font-face page"},{b:"@",e:"[{;]",i:/:/,c:[{cN:"keyword",b:/\w+/},{b:/\s/,eW:!0,eE:!0,r:0,c:[e.ASM,e.QSM,e.CSSNM]}]},{cN:"selector-tag",b:c,r:0},{b:"{",e:"}",i:/\S/,c:[e.CBCM,t]}]}});hljs.registerLanguage("http",function(e){var t="HTTP/[0-9\\.]+";return{aliases:["https"],i:"\\S",c:[{b:"^"+t,e:"$",c:[{cN:"number",b:"\\b\\d{3}\\b"}]},{b:"^[A-Z]+ (.*?) "+t+"$",rB:!0,e:"$",c:[{cN:"string",b:" ",e:" ",eB:!0,eE:!0},{b:t},{cN:"keyword",b:"[A-Z]+"}]},{cN:"attribute",b:"^\\w",e:": ",eE:!0,i:"\\n|\\s|=",starts:{e:"$",r:0}},{b:"\\n\\n",starts:{sL:[],eW:!0}}]}});hljs.registerLanguage("bash",function(e){var t={cN:"variable",v:[{b:/\$[\w\d#@][\w\d_]*/},{b:/\$\{(.*?)}/}]},s={cN:"string",b:/"/,e:/"/,c:[e.BE,t,{cN:"variable",b:/\$\(/,e:/\)/,c:[e.BE]}]},a={cN:"string",b:/'/,e:/'/};return{aliases:["sh","zsh"],l:/\b-?[a-z\._]+\b/,k:{keyword:"if then else elif fi for while in do done case esac function",literal:"true false",built_in:"break cd continue eval exec exit export getopts hash pwd readonly return shift test times trap umask unset alias bind builtin caller command declare echo enable help let local logout mapfile printf read readarray source type typeset ulimit unalias set shopt autoload bg bindkey bye cap chdir clone comparguments compcall compctl compdescribe compfiles compgroups compquote comptags comptry compvalues dirs disable disown echotc echoti emulate fc fg float functions getcap getln history integer jobs kill limit log noglob popd print pushd pushln rehash sched setcap setopt stat suspend ttyctl unfunction unhash unlimit unsetopt vared wait whence where which zcompile zformat zftp zle zmodload zparseopts zprof zpty zregexparse zsocket zstyle ztcp",_:"-ne -eq -lt -gt -f -d -e -s -l -a"},c:[{cN:"meta",b:/^#![^\n]+sh\s*$/,r:10},{cN:"function",b:/\w[\w\d_]*\s*\(\s*\)\s*\{/,rB:!0,c:[e.inherit(e.TM,{b:/\w[\w\d_]*/})],r:0},e.HCM,s,a,t]}});hljs.registerLanguage("shell",function(s){return{aliases:["console"],c:[{cN:"meta",b:"^\\s{0,3}[\\w\\d\\[\\]()@-]*[>%$#]",starts:{e:"$",sL:"bash"}}]}});hljs.registerLanguage("json",function(e){var i={literal:"true false null"},n=[e.QSM,e.CNM],r={e:",",eW:!0,eE:!0,c:n,k:i},t={b:"{",e:"}",c:[{cN:"attr",b:/"/,e:/"/,c:[e.BE],i:"\\n"},e.inherit(r,{b:/:/})],i:"\\S"},c={b:"\\[",e:"\\]",c:[e.inherit(r)],i:"\\S"};return n.splice(n.length,0,t,c),{c:n,k:i,i:"\\S"}});hljs.registerLanguage("ini",function(e){var b={cN:"string",c:[e.BE],v:[{b:"'''",e:"'''",r:10},{b:'"""',e:'"""',r:10},{b:'"',e:'"'},{b:"'",e:"'"}]};return{aliases:["toml"],cI:!0,i:/\S/,c:[e.C(";","$"),e.HCM,{cN:"section",b:/^\s*\[+/,e:/\]+/},{b:/^[a-z0-9\[\]_-]+\s*=\s*/,e:"$",rB:!0,c:[{cN:"attr",b:/[a-z0-9\[\]_-]+/},{b:/=/,eW:!0,r:0,c:[{cN:"literal",b:/\bon|off|true|false|yes|no\b/},{cN:"variable",v:[{b:/\$[\w\d"][\w\d_]*/},{b:/\$\{(.*?)}/}]},b,{cN:"number",b:/([\+\-]+)?[\d]+_[\d_]+/},e.NM]}]}]}});hljs.registerLanguage("coffeescript",function(e){var c={keyword:"in if for while finally new do return else break catch instanceof throw try this switch continue typeof delete debugger super yield import export from as default await then unless until loop of by when and or is isnt not",literal:"true false null undefined yes no on off",built_in:"npm require console print module global window document"},n="[A-Za-z$_][0-9A-Za-z$_]*",r={cN:"subst",b:/#\{/,e:/}/,k:c},i=[e.BNM,e.inherit(e.CNM,{starts:{e:"(\\s*/)?",r:0}}),{cN:"string",v:[{b:/'''/,e:/'''/,c:[e.BE]},{b:/'/,e:/'/,c:[e.BE]},{b:/"""/,e:/"""/,c:[e.BE,r]},{b:/"/,e:/"/,c:[e.BE,r]}]},{cN:"regexp",v:[{b:"///",e:"///",c:[r,e.HCM]},{b:"//[gim]*",r:0},{b:/\/(?![ *])(\\\/|.)*?\/[gim]*(?=\W|$)/}]},{b:"@"+n},{sL:"javascript",eB:!0,eE:!0,v:[{b:"```",e:"```"},{b:"`",e:"`"}]}];r.c=i;var s=e.inherit(e.TM,{b:n}),t="(\\(.*\\))?\\s*\\B[-=]>",o={cN:"params",b:"\\([^\\(]",rB:!0,c:[{b:/\(/,e:/\)/,k:c,c:["self"].concat(i)}]};return{aliases:["coffee","cson","iced"],k:c,i:/\/\*/,c:i.concat([e.C("###","###"),e.HCM,{cN:"function",b:"^\\s*"+n+"\\s*=\\s*"+t,e:"[-=]>",rB:!0,c:[s,o]},{b:/[:\(,=]\s*/,r:0,c:[{cN:"function",b:t,e:"[-=]>",rB:!0,c:[o]}]},{cN:"class",bK:"class",e:"$",i:/[:="\[\]]/,c:[{bK:"extends",eW:!0,i:/[:="\[\]]/,c:[s]},s]},{b:n+":",e:":",rB:!0,rE:!0,r:0}])}});hljs.registerLanguage("nginx",function(e){var r={cN:"variable",v:[{b:/\$\d+/},{b:/\$\{/,e:/}/},{b:"[\\$\\@]"+e.UIR}]},b={eW:!0,l:"[a-z/_]+",k:{literal:"on off yes no true false none blocked debug info notice warn error crit select break last permanent redirect kqueue rtsig epoll poll /dev/poll"},r:0,i:"=>",c:[e.HCM,{cN:"string",c:[e.BE,r],v:[{b:/"/,e:/"/},{b:/'/,e:/'/}]},{b:"([a-z]+):/",e:"\\s",eW:!0,eE:!0,c:[r]},{cN:"regexp",c:[e.BE,r],v:[{b:"\\s\\^",e:"\\s|{|;",rE:!0},{b:"~\\*?\\s+",e:"\\s|{|;",rE:!0},{b:"\\*(\\.[a-z\\-]+)+"},{b:"([a-z\\-]+\\.)+\\*"}]},{cN:"number",b:"\\b\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}(:\\d{1,5})?\\b"},{cN:"number",b:"\\b\\d+[kKmMgGdshdwy]*\\b",r:0},r]};return{aliases:["nginxconf"],c:[e.HCM,{b:e.UIR+"\\s+{",rB:!0,e:"{",c:[{cN:"section",b:e.UIR}],r:0},{b:e.UIR+"\\s",e:";|{",rB:!0,c:[{cN:"attribute",b:e.UIR,starts:b}],r:0}],i:"[^\\s\\}]"}});hljs.registerLanguage("javascript",function(e){var r="[A-Za-z$_][0-9A-Za-z$_]*",t={keyword:"in of if for while finally var new function do return void else break catch instanceof with throw case default try this switch continue typeof delete let yield const export super debugger as async await static import from as",literal:"true false null undefined NaN Infinity",built_in:"eval isFinite isNaN parseFloat parseInt decodeURI decodeURIComponent encodeURI encodeURIComponent escape unescape Object Function Boolean Error EvalError InternalError RangeError ReferenceError StopIteration SyntaxError TypeError URIError Number Math Date String RegExp Array Float32Array Float64Array Int16Array Int32Array Int8Array Uint16Array Uint32Array Uint8Array Uint8ClampedArray ArrayBuffer DataView JSON Intl arguments require module console window document Symbol Set Map WeakSet WeakMap Proxy Reflect Promise"},a={cN:"number",v:[{b:"\\b(0[bB][01]+)"},{b:"\\b(0[oO][0-7]+)"},{b:e.CNR}],r:0},n={cN:"subst",b:"\\$\\{",e:"\\}",k:t,c:[]},c={cN:"string",b:"`",e:"`",c:[e.BE,n]};n.c=[e.ASM,e.QSM,c,a,e.RM];var s=n.c.concat([e.CBCM,e.CLCM]);return{aliases:["js","jsx"],k:t,c:[{cN:"meta",r:10,b:/^\s*['"]use (strict|asm)['"]/},{cN:"meta",b:/^#!/,e:/$/},e.ASM,e.QSM,c,e.CLCM,e.CBCM,a,{b:/[{,]\s*/,r:0,c:[{b:r+"\\s*:",rB:!0,r:0,c:[{cN:"attr",b:r,r:0}]}]},{b:"("+e.RSR+"|\\b(case|return|throw)\\b)\\s*",k:"return throw case",c:[e.CLCM,e.CBCM,e.RM,{cN:"function",b:"(\\(.*?\\)|"+r+")\\s*=>",rB:!0,e:"\\s*=>",c:[{cN:"params",v:[{b:r},{b:/\(\s*\)/},{b:/\(/,e:/\)/,eB:!0,eE:!0,k:t,c:s}]}]},{b:/</,e:/(\/\w+|\w+\/)>/,sL:"xml",c:[{b:/<\w+\s*\/>/,skip:!0},{b:/<\w+/,e:/(\/\w+|\w+\/)>/,skip:!0,c:[{b:/<\w+\s*\/>/,skip:!0},"self"]}]}],r:0},{cN:"function",bK:"function",e:/\{/,eE:!0,c:[e.inherit(e.TM,{b:r}),{cN:"params",b:/\(/,e:/\)/,eB:!0,eE:!0,c:s}],i:/\[|%/},{b:/\$[(.]/},e.METHOD_GUARD,{cN:"class",bK:"class",e:/[{;=]/,eE:!0,i:/[:"\[\]]/,c:[{bK:"extends"},e.UTM]},{bK:"constructor",e:/\{/,eE:!0}],i:/#(?!!)/}});hljs.registerLanguage("makefile",function(e){var i={cN:"variable",v:[{b:"\\$\\("+e.UIR+"\\)",c:[e.BE]},{b:/\$[@%<?\^\+\*]/}]},r={cN:"string",b:/"/,e:/"/,c:[e.BE,i]},a={cN:"variable",b:/\$\([\w-]+\s/,e:/\)/,k:{built_in:"subst patsubst strip findstring filter filter-out sort word wordlist firstword lastword dir notdir suffix basename addsuffix addprefix join wildcard realpath abspath error warning shell origin flavor foreach if or and call eval file value"},c:[i]},n={b:"^"+e.UIR+"\\s*[:+?]?=",i:"\\n",rB:!0,c:[{b:"^"+e.UIR,e:"[:+?]?=",eE:!0}]},t={cN:"meta",b:/^\.PHONY:/,e:/$/,k:{"meta-keyword":".PHONY"},l:/[\.\w]+/},l={cN:"section",b:/^[^\s]+:/,e:/$/,c:[i]};return{aliases:["mk","mak"],k:"define endef undefine ifdef ifndef ifeq ifneq else endif include -include sinclude override export unexport private vpath",l:/[\w-]+/,c:[e.HCM,i,r,a,n,t,l]}});hljs.registerLanguage("apache",function(e){var r={cN:"number",b:"[\\$%]\\d+"};return{aliases:["apacheconf"],cI:!0,c:[e.HCM,{cN:"section",b:"</?",e:">"},{cN:"attribute",b:/\w+/,r:0,k:{nomarkup:"order deny allow setenv rewriterule rewriteengine rewritecond documentroot sethandler errordocument loadmodule options header listen serverroot servername"},starts:{e:/$/,r:0,k:{literal:"on off all"},c:[{cN:"meta",b:"\\s\\[",e:"\\]$"},{cN:"variable",b:"[\\$%]\\{",e:"\\}",c:["self",r]},r,e.QSM]}}],i:/\S/}});hljs.registerLanguage("php",function(e){var c={b:"\\$+[a-zA-Z_-ÿ][a-zA-Z0-9_-ÿ]*"},i={cN:"meta",b:/<\?(php)?|\?>/},t={cN:"string",c:[e.BE,i],v:[{b:'b"',e:'"'},{b:"b'",e:"'"},e.inherit(e.ASM,{i:null}),e.inherit(e.QSM,{i:null})]},a={v:[e.BNM,e.CNM]};return{aliases:["php3","php4","php5","php6"],cI:!0,k:"and include_once list abstract global private echo interface as static endswitch array null if endwhile or const for endforeach self var while isset public protected exit foreach throw elseif include __FILE__ empty require_once do xor return parent clone use __CLASS__ __LINE__ else break print eval new catch __METHOD__ case exception default die require __FUNCTION__ enddeclare final try switch continue endfor endif declare unset true false trait goto instanceof insteadof __DIR__ __NAMESPACE__ yield finally",c:[e.HCM,e.C("//","$",{c:[i]}),e.C("/\\*","\\*/",{c:[{cN:"doctag",b:"@[A-Za-z]+"}]}),e.C("__halt_compiler.+?;",!1,{eW:!0,k:"__halt_compiler",l:e.UIR}),{cN:"string",b:/<<<['"]?\w+['"]?$/,e:/^\w+;?$/,c:[e.BE,{cN:"subst",v:[{b:/\$\w+/},{b:/\{\$/,e:/\}/}]}]},i,{cN:"keyword",b:/\$this\b/},c,{b:/(::|->)+[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*/},{cN:"function",bK:"function",e:/[;{]/,eE:!0,i:"\\$|\\[|%",c:[e.UTM,{cN:"params",b:"\\(",e:"\\)",c:["self",c,e.CBCM,t,a]}]},{cN:"class",bK:"class interface",e:"{",eE:!0,i:/[:\(\$"]/,c:[{bK:"extends implements"},e.UTM]},{bK:"namespace",e:";",i:/[\.']/,c:[e.UTM]},{bK:"use",e:";",c:[e.UTM]},{b:"=>"},t,a]}});hljs.registerLanguage("perl",function(e){var t="getpwent getservent quotemeta msgrcv scalar kill dbmclose undef lc ma syswrite tr send umask sysopen shmwrite vec qx utime local oct semctl localtime readpipe do return format read sprintf dbmopen pop getpgrp not getpwnam rewinddir qqfileno qw endprotoent wait sethostent bless s|0 opendir continue each sleep endgrent shutdown dump chomp connect getsockname die socketpair close flock exists index shmgetsub for endpwent redo lstat msgctl setpgrp abs exit select print ref gethostbyaddr unshift fcntl syscall goto getnetbyaddr join gmtime symlink semget splice x|0 getpeername recv log setsockopt cos last reverse gethostbyname getgrnam study formline endhostent times chop length gethostent getnetent pack getprotoent getservbyname rand mkdir pos chmod y|0 substr endnetent printf next open msgsnd readdir use unlink getsockopt getpriority rindex wantarray hex system getservbyport endservent int chr untie rmdir prototype tell listen fork shmread ucfirst setprotoent else sysseek link getgrgid shmctl waitpid unpack getnetbyname reset chdir grep split require caller lcfirst until warn while values shift telldir getpwuid my getprotobynumber delete and sort uc defined srand accept package seekdir getprotobyname semop our rename seek if q|0 chroot sysread setpwent no crypt getc chown sqrt write setnetent setpriority foreach tie sin msgget map stat getlogin unless elsif truncate exec keys glob tied closedirioctl socket readlink eval xor readline binmode setservent eof ord bind alarm pipe atan2 getgrent exp time push setgrent gt lt or ne m|0 break given say state when",r={cN:"subst",b:"[$@]\\{",e:"\\}",k:t},s={b:"->{",e:"}"},n={v:[{b:/\$\d/},{b:/[\$%@](\^\w\b|#\w+(::\w+)*|{\w+}|\w+(::\w*)*)/},{b:/[\$%@][^\s\w{]/,r:0}]},i=[e.BE,r,n],o=[n,e.HCM,e.C("^\\=\\w","\\=cut",{eW:!0}),s,{cN:"string",c:i,v:[{b:"q[qwxr]?\\s*\\(",e:"\\)",r:5},{b:"q[qwxr]?\\s*\\[",e:"\\]",r:5},{b:"q[qwxr]?\\s*\\{",e:"\\}",r:5},{b:"q[qwxr]?\\s*\\|",e:"\\|",r:5},{b:"q[qwxr]?\\s*\\<",e:"\\>",r:5},{b:"qw\\s+q",e:"q",r:5},{b:"'",e:"'",c:[e.BE]},{b:'"',e:'"'},{b:"`",e:"`",c:[e.BE]},{b:"{\\w+}",c:[],r:0},{b:"-?\\w+\\s*\\=\\>",c:[],r:0}]},{cN:"number",b:"(\\b0[0-7_]+)|(\\b0x[0-9a-fA-F_]+)|(\\b[1-9][0-9_]*(\\.[0-9_]+)?)|[0_]\\b",r:0},{b:"(\\/\\/|"+e.RSR+"|\\b(split|return|print|reverse|grep)\\b)\\s*",k:"split return print reverse grep",r:0,c:[e.HCM,{cN:"regexp",b:"(s|tr|y)/(\\\\.|[^/])*/(\\\\.|[^/])*/[a-z]*",r:10},{cN:"regexp",b:"(m|qr)?/",e:"/[a-z]*",c:[e.BE],r:0}]},{cN:"function",bK:"sub",e:"(\\s*\\(.*?\\))?[;{]",eE:!0,r:5,c:[e.TM]},{b:"-\\w\\b",r:0},{b:"^__DATA__$",e:"^__END__$",sL:"mojolicious",c:[{b:"^@@.*",e:"$",cN:"comment"}]}];return r.c=o,s.c=o,{aliases:["pl","pm"],l:/[\w\.]+/,k:t,c:o}});hljs.registerLanguage("objectivec",function(e){var t={cN:"built_in",b:"\\b(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)\\w+"},_={keyword:"int float while char export sizeof typedef const struct for union unsigned long volatile static bool mutable if do return goto void enum else break extern asm case short default double register explicit signed typename this switch continue wchar_t inline readonly assign readwrite self @synchronized id typeof nonatomic super unichar IBOutlet IBAction strong weak copy in out inout bycopy byref oneway __strong __weak __block __autoreleasing @private @protected @public @try @property @end @throw @catch @finally @autoreleasepool @synthesize @dynamic @selector @optional @required @encode @package @import @defs @compatibility_alias __bridge __bridge_transfer __bridge_retained __bridge_retain __covariant __contravariant __kindof _Nonnull _Nullable _Null_unspecified __FUNCTION__ __PRETTY_FUNCTION__ __attribute__ getter setter retain unsafe_unretained nonnull nullable null_unspecified null_resettable class instancetype NS_DESIGNATED_INITIALIZER NS_UNAVAILABLE NS_REQUIRES_SUPER NS_RETURNS_INNER_POINTER NS_INLINE NS_AVAILABLE NS_DEPRECATED NS_ENUM NS_OPTIONS NS_SWIFT_UNAVAILABLE NS_ASSUME_NONNULL_BEGIN NS_ASSUME_NONNULL_END NS_REFINED_FOR_SWIFT NS_SWIFT_NAME NS_SWIFT_NOTHROW NS_DURING NS_HANDLER NS_ENDHANDLER NS_VALUERETURN NS_VOIDRETURN",literal:"false true FALSE TRUE nil YES NO NULL",built_in:"BOOL dispatch_once_t dispatch_queue_t dispatch_sync dispatch_async dispatch_once"},i=/[a-zA-Z@][a-zA-Z0-9_]*/,n="@interface @class @protocol @implementation";return{aliases:["mm","objc","obj-c"],k:_,l:i,i:"</",c:[t,e.CLCM,e.CBCM,e.CNM,e.QSM,{cN:"string",v:[{b:'@"',e:'"',i:"\\n",c:[e.BE]},{b:"'",e:"[^\\\\]'",i:"[^\\\\][^']"}]},{cN:"meta",b:"#",e:"$",c:[{cN:"meta-string",v:[{b:'"',e:'"'},{b:"<",e:">"}]}]},{cN:"class",b:"("+n.split(" ").join("|")+")\\b",e:"({|$)",eE:!0,k:n,l:i,c:[e.UTM]},{b:"\\."+e.UIR,r:0}]}});hljs.registerLanguage("xml",function(s){var e="[A-Za-z0-9\\._:-]+",t={eW:!0,i:/</,r:0,c:[{cN:"attr",b:e,r:0},{b:/=\s*/,r:0,c:[{cN:"string",endsParent:!0,v:[{b:/"/,e:/"/},{b:/'/,e:/'/},{b:/[^\s"'=<>`]+/}]}]}]};return{aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist"],cI:!0,c:[{cN:"meta",b:"<!DOCTYPE",e:">",r:10,c:[{b:"\\[",e:"\\]"}]},s.C("<!--","-->",{r:10}),{b:"<\\!\\[CDATA\\[",e:"\\]\\]>",r:10},{b:/<\?(php)?/,e:/\?>/,sL:"php",c:[{b:"/\\*",e:"\\*/",skip:!0}]},{cN:"tag",b:"<style(?=\\s|>|$)",e:">",k:{name:"style"},c:[t],starts:{e:"</style>",rE:!0,sL:["css","xml"]}},{cN:"tag",b:"<script(?=\\s|>|$)",e:">",k:{name:"script"},c:[t],starts:{e:"<" + "/script>",rE:!0,sL:["actionscript","javascript","handlebars","xml"]}},{cN:"meta",v:[{b:/<\?xml/,e:/\?>/,r:10},{b:/<\?\w+/,e:/\?>/}]},{cN:"tag",b:"</?",e:"/?>",c:[{cN:"name",b:/[^\/><\s]+/,r:0},t]}]}});hljs.registerLanguage("markdown",function(e){return{aliases:["md","mkdown","mkd"],c:[{cN:"section",v:[{b:"^#{1,6}",e:"$"},{b:"^.+?\\n[=-]{2,}$"}]},{b:"<",e:">",sL:"xml",r:0},{cN:"bullet",b:"^([*+-]|(\\d+\\.))\\s+"},{cN:"strong",b:"[*_]{2}.+?[*_]{2}"},{cN:"emphasis",v:[{b:"\\*.+?\\*"},{b:"_.+?_",r:0}]},{cN:"quote",b:"^>\\s+",e:"$"},{cN:"code",v:[{b:"^```w*s*$",e:"^```s*$"},{b:"`.+?`"},{b:"^( {4}|	)",e:"$",r:0}]},{b:"^[-\\*]{3,}",e:"$"},{b:"\\[.+?\\][\\(\\[].*?[\\)\\]]",rB:!0,c:[{cN:"string",b:"\\[",e:"\\]",eB:!0,rE:!0,r:0},{cN:"link",b:"\\]\\(",e:"\\)",eB:!0,eE:!0},{cN:"symbol",b:"\\]\\[",e:"\\]",eB:!0,eE:!0}],r:10},{b:/^\[[^\n]+\]:/,rB:!0,c:[{cN:"symbol",b:/\[/,e:/\]/,eB:!0,eE:!0},{cN:"link",b:/:\s*/,e:/$/,eB:!0}]}]}});hljs.registerLanguage("diff",function(e){return{aliases:["patch"],c:[{cN:"meta",r:10,v:[{b:/^@@ +\-\d+,\d+ +\+\d+,\d+ +@@$/},{b:/^\*\*\* +\d+,\d+ +\*\*\*\*$/},{b:/^\-\-\- +\d+,\d+ +\-\-\-\-$/}]},{cN:"comment",v:[{b:/Index: /,e:/$/},{b:/={3,}/,e:/$/},{b:/^\-{3}/,e:/$/},{b:/^\*{3} /,e:/$/},{b:/^\+{3}/,e:/$/},{b:/\*{5}/,e:/\*{5}$/}]},{cN:"addition",b:"^\\+",e:"$"},{cN:"deletion",b:"^\\-",e:"$"},{cN:"addition",b:"^\\!",e:"$"}]}});hljs.registerLanguage("cs",function(e){var i={keyword:"abstract as base bool break byte case catch char checked const continue decimal default delegate do double enum event explicit extern finally fixed float for foreach goto if implicit in int interface internal is lock long nameof object operator out override params private protected public readonly ref sbyte sealed short sizeof stackalloc static string struct switch this try typeof uint ulong unchecked unsafe ushort using virtual void volatile while add alias ascending async await by descending dynamic equals from get global group into join let on orderby partial remove select set value var where yield",literal:"null false true"},t={cN:"string",b:'@"',e:'"',c:[{b:'""'}]},r=e.inherit(t,{i:/\n/}),a={cN:"subst",b:"{",e:"}",k:i},c=e.inherit(a,{i:/\n/}),n={cN:"string",b:/\$"/,e:'"',i:/\n/,c:[{b:"{{"},{b:"}}"},e.BE,c]},s={cN:"string",b:/\$@"/,e:'"',c:[{b:"{{"},{b:"}}"},{b:'""'},a]},o=e.inherit(s,{i:/\n/,c:[{b:"{{"},{b:"}}"},{b:'""'},c]});a.c=[s,n,t,e.ASM,e.QSM,e.CNM,e.CBCM],c.c=[o,n,r,e.ASM,e.QSM,e.CNM,e.inherit(e.CBCM,{i:/\n/})];var l={v:[s,n,t,e.ASM,e.QSM]},b=e.IR+"(<"+e.IR+"(\\s*,\\s*"+e.IR+")*>)?(\\[\\])?";return{aliases:["csharp"],k:i,i:/::/,c:[e.C("///","$",{rB:!0,c:[{cN:"doctag",v:[{b:"///",r:0},{b:"<!--|-->"},{b:"</?",e:">"}]}]}),e.CLCM,e.CBCM,{cN:"meta",b:"#",e:"$",k:{"meta-keyword":"if else elif endif define undef warning error line region endregion pragma checksum"}},l,e.CNM,{bK:"class interface",e:/[{;=]/,i:/[^\s:]/,c:[e.TM,e.CLCM,e.CBCM]},{bK:"namespace",e:/[{;=]/,i:/[^\s:]/,c:[e.inherit(e.TM,{b:"[a-zA-Z](\\.?\\w)*"}),e.CLCM,e.CBCM]},{cN:"meta",b:"^\\s*\\[",eB:!0,e:"\\]",eE:!0,c:[{cN:"meta-string",b:/"/,e:/"/}]},{bK:"new return throw await else",r:0},{cN:"function",b:"("+b+"\\s+)+"+e.IR+"\\s*\\(",rB:!0,e:/[{;=]/,eE:!0,k:i,c:[{b:e.IR+"\\s*\\(",rB:!0,c:[e.TM],r:0},{cN:"params",b:/\(/,e:/\)/,eB:!0,eE:!0,k:i,r:0,c:[l,e.CNM,e.CBCM]},e.CLCM,e.CBCM]}]}});hljs.registerLanguage("sql",function(e){var t=e.C("--","$");return{cI:!0,i:/[<>{}*#]/,c:[{bK:"begin end start commit rollback savepoint lock alter create drop rename call delete do handler insert load replace select truncate update set show pragma grant merge describe use explain help declare prepare execute deallocate release unlock purge reset change stop analyze cache flush optimize repair kill install uninstall checksum restore check backup revoke comment",e:/;/,eW:!0,l:/[\w\.]+/,k:{keyword:"abort abs absolute acc acce accep accept access accessed accessible account acos action activate add addtime admin administer advanced advise aes_decrypt aes_encrypt after agent aggregate ali alia alias allocate allow alter always analyze ancillary and any anydata anydataset anyschema anytype apply archive archived archivelog are as asc ascii asin assembly assertion associate asynchronous at atan atn2 attr attri attrib attribu attribut attribute attributes audit authenticated authentication authid authors auto autoallocate autodblink autoextend automatic availability avg backup badfile basicfile before begin beginning benchmark between bfile bfile_base big bigfile bin binary_double binary_float binlog bit_and bit_count bit_length bit_or bit_xor bitmap blob_base block blocksize body both bound buffer_cache buffer_pool build bulk by byte byteordermark bytes cache caching call calling cancel capacity cascade cascaded case cast catalog category ceil ceiling chain change changed char_base char_length character_length characters characterset charindex charset charsetform charsetid check checksum checksum_agg child choose chr chunk class cleanup clear client clob clob_base clone close cluster_id cluster_probability cluster_set clustering coalesce coercibility col collate collation collect colu colum column column_value columns columns_updated comment commit compact compatibility compiled complete composite_limit compound compress compute concat concat_ws concurrent confirm conn connec connect connect_by_iscycle connect_by_isleaf connect_by_root connect_time connection consider consistent constant constraint constraints constructor container content contents context contributors controlfile conv convert convert_tz corr corr_k corr_s corresponding corruption cos cost count count_big counted covar_pop covar_samp cpu_per_call cpu_per_session crc32 create creation critical cross cube cume_dist curdate current current_date current_time current_timestamp current_user cursor curtime customdatum cycle data database databases datafile datafiles datalength date_add date_cache date_format date_sub dateadd datediff datefromparts datename datepart datetime2fromparts day day_to_second dayname dayofmonth dayofweek dayofyear days db_role_change dbtimezone ddl deallocate declare decode decompose decrement decrypt deduplicate def defa defau defaul default defaults deferred defi defin define degrees delayed delegate delete delete_all delimited demand dense_rank depth dequeue des_decrypt des_encrypt des_key_file desc descr descri describ describe descriptor deterministic diagnostics difference dimension direct_load directory disable disable_all disallow disassociate discardfile disconnect diskgroup distinct distinctrow distribute distributed div do document domain dotnet double downgrade drop dumpfile duplicate duration each edition editionable editions element ellipsis else elsif elt empty enable enable_all enclosed encode encoding encrypt end end-exec endian enforced engine engines enqueue enterprise entityescaping eomonth error errors escaped evalname evaluate event eventdata events except exception exceptions exchange exclude excluding execu execut execute exempt exists exit exp expire explain export export_set extended extent external external_1 external_2 externally extract failed failed_login_attempts failover failure far fast feature_set feature_value fetch field fields file file_name_convert filesystem_like_logging final finish first first_value fixed flash_cache flashback floor flush following follows for forall force form forma format found found_rows freelist freelists freepools fresh from from_base64 from_days ftp full function general generated get get_format get_lock getdate getutcdate global global_name globally go goto grant grants greatest group group_concat group_id grouping grouping_id groups gtid_subtract guarantee guard handler hash hashkeys having hea head headi headin heading heap help hex hierarchy high high_priority hosts hour http id ident_current ident_incr ident_seed identified identity idle_time if ifnull ignore iif ilike ilm immediate import in include including increment index indexes indexing indextype indicator indices inet6_aton inet6_ntoa inet_aton inet_ntoa infile initial initialized initially initrans inmemory inner innodb input insert install instance instantiable instr interface interleaved intersect into invalidate invisible is is_free_lock is_ipv4 is_ipv4_compat is_not is_not_null is_used_lock isdate isnull isolation iterate java join json json_exists keep keep_duplicates key keys kill language large last last_day last_insert_id last_value lax lcase lead leading least leaves left len lenght length less level levels library like like2 like4 likec limit lines link list listagg little ln load load_file lob lobs local localtime localtimestamp locate locator lock locked log log10 log2 logfile logfiles logging logical logical_reads_per_call logoff logon logs long loop low low_priority lower lpad lrtrim ltrim main make_set makedate maketime managed management manual map mapping mask master master_pos_wait match matched materialized max maxextents maximize maxinstances maxlen maxlogfiles maxloghistory maxlogmembers maxsize maxtrans md5 measures median medium member memcompress memory merge microsecond mid migration min minextents minimum mining minus minute minvalue missing mod mode model modification modify module monitoring month months mount move movement multiset mutex name name_const names nan national native natural nav nchar nclob nested never new newline next nextval no no_write_to_binlog noarchivelog noaudit nobadfile nocheck nocompress nocopy nocycle nodelay nodiscardfile noentityescaping noguarantee nokeep nologfile nomapping nomaxvalue nominimize nominvalue nomonitoring none noneditionable nonschema noorder nopr nopro noprom nopromp noprompt norely noresetlogs noreverse normal norowdependencies noschemacheck noswitch not nothing notice notrim novalidate now nowait nth_value nullif nulls num numb numbe nvarchar nvarchar2 object ocicoll ocidate ocidatetime ociduration ociinterval ociloblocator ocinumber ociref ocirefcursor ocirowid ocistring ocitype oct octet_length of off offline offset oid oidindex old on online only opaque open operations operator optimal optimize option optionally or oracle oracle_date oradata ord ordaudio orddicom orddoc order ordimage ordinality ordvideo organization orlany orlvary out outer outfile outline output over overflow overriding package pad parallel parallel_enable parameters parent parse partial partition partitions pascal passing password password_grace_time password_lock_time password_reuse_max password_reuse_time password_verify_function patch path patindex pctincrease pctthreshold pctused pctversion percent percent_rank percentile_cont percentile_disc performance period period_add period_diff permanent physical pi pipe pipelined pivot pluggable plugin policy position post_transaction pow power pragma prebuilt precedes preceding precision prediction prediction_cost prediction_details prediction_probability prediction_set prepare present preserve prior priority private private_sga privileges procedural procedure procedure_analyze processlist profiles project prompt protection public publishingservername purge quarter query quick quiesce quota quotename radians raise rand range rank raw read reads readsize rebuild record records recover recovery recursive recycle redo reduced ref reference referenced references referencing refresh regexp_like register regr_avgx regr_avgy regr_count regr_intercept regr_r2 regr_slope regr_sxx regr_sxy reject rekey relational relative relaylog release release_lock relies_on relocate rely rem remainder rename repair repeat replace replicate replication required reset resetlogs resize resource respect restore restricted result result_cache resumable resume retention return returning returns reuse reverse revoke right rlike role roles rollback rolling rollup round row row_count rowdependencies rowid rownum rows rtrim rules safe salt sample save savepoint sb1 sb2 sb4 scan schema schemacheck scn scope scroll sdo_georaster sdo_topo_geometry search sec_to_time second section securefile security seed segment select self sequence sequential serializable server servererror session session_user sessions_per_user set sets settings sha sha1 sha2 share shared shared_pool short show shrink shutdown si_averagecolor si_colorhistogram si_featurelist si_positionalcolor si_stillimage si_texture siblings sid sign sin size size_t sizes skip slave sleep smalldatetimefromparts smallfile snapshot some soname sort soundex source space sparse spfile split sql sql_big_result sql_buffer_result sql_cache sql_calc_found_rows sql_small_result sql_variant_property sqlcode sqldata sqlerror sqlname sqlstate sqrt square standalone standby start starting startup statement static statistics stats_binomial_test stats_crosstab stats_ks_test stats_mode stats_mw_test stats_one_way_anova stats_t_test_ stats_t_test_indep stats_t_test_one stats_t_test_paired stats_wsr_test status std stddev stddev_pop stddev_samp stdev stop storage store stored str str_to_date straight_join strcmp strict string struct stuff style subdate subpartition subpartitions substitutable substr substring subtime subtring_index subtype success sum suspend switch switchoffset switchover sync synchronous synonym sys sys_xmlagg sysasm sysaux sysdate sysdatetimeoffset sysdba sysoper system system_user sysutcdatetime table tables tablespace tan tdo template temporary terminated tertiary_weights test than then thread through tier ties time time_format time_zone timediff timefromparts timeout timestamp timestampadd timestampdiff timezone_abbr timezone_minute timezone_region to to_base64 to_date to_days to_seconds todatetimeoffset trace tracking transaction transactional translate translation treat trigger trigger_nestlevel triggers trim truncate try_cast try_convert try_parse type ub1 ub2 ub4 ucase unarchived unbounded uncompress under undo unhex unicode uniform uninstall union unique unix_timestamp unknown unlimited unlock unpivot unrecoverable unsafe unsigned until untrusted unusable unused update updated upgrade upped upper upsert url urowid usable usage use use_stored_outlines user user_data user_resources users using utc_date utc_timestamp uuid uuid_short validate validate_password_strength validation valist value values var var_samp varcharc vari varia variab variabl variable variables variance varp varraw varrawc varray verify version versions view virtual visible void wait wallet warning warnings week weekday weekofyear wellformed when whene whenev wheneve whenever where while whitespace with within without work wrapped xdb xml xmlagg xmlattributes xmlcast xmlcolattval xmlelement xmlexists xmlforest xmlindex xmlnamespaces xmlpi xmlquery xmlroot xmlschema xmlserialize xmltable xmltype xor year year_to_month years yearweek",literal:"true false null",built_in:"array bigint binary bit blob boolean char character date dec decimal float int int8 integer interval number numeric real record serial serial8 smallint text varchar varying void"},c:[{cN:"string",b:"'",e:"'",c:[e.BE,{b:"''"}]},{cN:"string",b:'"',e:'"',c:[e.BE,{b:'""'}]},{cN:"string",b:"`",e:"`",c:[e.BE]},e.CNM,e.CBCM,t]},e.CBCM,t]}});hljs.registerLanguage("cpp",function(t){var e={cN:"keyword",b:"\\b[a-z\\d_]*_t\\b"},r={cN:"string",v:[{b:'(u8?|U)?L?"',e:'"',i:"\\n",c:[t.BE]},{b:'(u8?|U)?R"',e:'"',c:[t.BE]},{b:"'\\\\?.",e:"'",i:"."}]},s={cN:"number",v:[{b:"\\b(0b[01']+)"},{b:"(-?)\\b([\\d']+(\\.[\\d']*)?|\\.[\\d']+)(u|U|l|L|ul|UL|f|F|b|B)"},{b:"(-?)(\\b0[xX][a-fA-F0-9']+|(\\b[\\d']+(\\.[\\d']*)?|\\.[\\d']+)([eE][-+]?[\\d']+)?)"}],r:0},i={cN:"meta",b:/#\s*[a-z]+\b/,e:/$/,k:{"meta-keyword":"if else elif endif define undef warning error line pragma ifdef ifndef include"},c:[{b:/\\\n/,r:0},t.inherit(r,{cN:"meta-string"}),{cN:"meta-string",b:/<[^\n>]*>/,e:/$/,i:"\\n"},t.CLCM,t.CBCM]},a=t.IR+"\\s*\\(",c={keyword:"int float while private char catch import module export virtual operator sizeof dynamic_cast|10 typedef const_cast|10 const for static_cast|10 union namespace unsigned long volatile static protected bool template mutable if public friend do goto auto void enum else break extern using asm case typeid short reinterpret_cast|10 default double register explicit signed typename try this switch continue inline delete alignof constexpr decltype noexcept static_assert thread_local restrict _Bool complex _Complex _Imaginary atomic_bool atomic_char atomic_schar atomic_uchar atomic_short atomic_ushort atomic_int atomic_uint atomic_long atomic_ulong atomic_llong atomic_ullong new throw return and or not",built_in:"std string cin cout cerr clog stdin stdout stderr stringstream istringstream ostringstream auto_ptr deque list queue stack vector map set bitset multiset multimap unordered_set unordered_map unordered_multiset unordered_multimap array shared_ptr abort abs acos asin atan2 atan calloc ceil cosh cos exit exp fabs floor fmod fprintf fputs free frexp fscanf isalnum isalpha iscntrl isdigit isgraph islower isprint ispunct isspace isupper isxdigit tolower toupper labs ldexp log10 log malloc realloc memchr memcmp memcpy memset modf pow printf putchar puts scanf sinh sin snprintf sprintf sqrt sscanf strcat strchr strcmp strcpy strcspn strlen strncat strncmp strncpy strpbrk strrchr strspn strstr tanh tan vfprintf vprintf vsprintf endl initializer_list unique_ptr",literal:"true false nullptr NULL"},n=[e,t.CLCM,t.CBCM,s,r];return{aliases:["c","cc","h","c++","h++","hpp"],k:c,i:"</",c:n.concat([i,{b:"\\b(deque|list|queue|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array)\\s*<",e:">",k:c,c:["self",e]},{b:t.IR+"::",k:c},{v:[{b:/=/,e:/;/},{b:/\(/,e:/\)/},{bK:"new throw return else",e:/;/}],k:c,c:n.concat([{b:/\(/,e:/\)/,k:c,c:n.concat(["self"]),r:0}]),r:0},{cN:"function",b:"("+t.IR+"[\\*&\\s]+)+"+a,rB:!0,e:/[{;=]/,eE:!0,k:c,i:/[^\w\s\*&]/,c:[{b:a,rB:!0,c:[t.TM],r:0},{cN:"params",b:/\(/,e:/\)/,k:c,r:0,c:[t.CLCM,t.CBCM,r,s,e]},t.CLCM,t.CBCM,i]},{cN:"class",bK:"class struct",e:/[{;:]/,c:[{b:/</,e:/>/,c:["self"]},t.TM]}]),exports:{preprocessor:i,strings:r,k:c}}});hljs.registerLanguage("ruby",function(e){var b="[a-zA-Z_]\\w*[!?=]?|[-+~]\\@|<<|>>|=~|===?|<=>|[<>]=?|\\*\\*|[-/+%^&*~`|]|\\[\\]=?",r={keyword:"and then defined module in return redo if BEGIN retry end for self when next until do begin unless END rescue else break undef not super class case require yield alias while ensure elsif or include attr_reader attr_writer attr_accessor",literal:"true false nil"},c={cN:"doctag",b:"@[A-Za-z]+"},a={b:"#<",e:">"},s=[e.C("#","$",{c:[c]}),e.C("^\\=begin","^\\=end",{c:[c],r:10}),e.C("^__END__","\\n$")],n={cN:"subst",b:"#\\{",e:"}",k:r},t={cN:"string",c:[e.BE,n],v:[{b:/'/,e:/'/},{b:/"/,e:/"/},{b:/`/,e:/`/},{b:"%[qQwWx]?\\(",e:"\\)"},{b:"%[qQwWx]?\\[",e:"\\]"},{b:"%[qQwWx]?{",e:"}"},{b:"%[qQwWx]?<",e:">"},{b:"%[qQwWx]?/",e:"/"},{b:"%[qQwWx]?%",e:"%"},{b:"%[qQwWx]?-",e:"-"},{b:"%[qQwWx]?\\|",e:"\\|"},{b:/\B\?(\\\d{1,3}|\\x[A-Fa-f0-9]{1,2}|\\u[A-Fa-f0-9]{4}|\\?\S)\b/},{b:/<<(-?)\w+$/,e:/^\s*\w+$/}]},i={cN:"params",b:"\\(",e:"\\)",endsParent:!0,k:r},d=[t,a,{cN:"class",bK:"class module",e:"$|;",i:/=/,c:[e.inherit(e.TM,{b:"[A-Za-z_]\\w*(::\\w+)*(\\?|\\!)?"}),{b:"<\\s*",c:[{b:"("+e.IR+"::)?"+e.IR}]}].concat(s)},{cN:"function",bK:"def",e:"$|;",c:[e.inherit(e.TM,{b:b}),i].concat(s)},{b:e.IR+"::"},{cN:"symbol",b:e.UIR+"(\\!|\\?)?:",r:0},{cN:"symbol",b:":(?!\\s)",c:[t,{b:b}],r:0},{cN:"number",b:"(\\b0[0-7_]+)|(\\b0x[0-9a-fA-F_]+)|(\\b[1-9][0-9_]*(\\.[0-9_]+)?)|[0_]\\b",r:0},{b:"(\\$\\W)|((\\$|\\@\\@?)(\\w+))"},{cN:"params",b:/\|/,e:/\|/,k:r},{b:"("+e.RSR+"|unless)\\s*",k:"unless",c:[a,{cN:"regexp",c:[e.BE,n],i:/\n/,v:[{b:"/",e:"/[a-z]*"},{b:"%r{",e:"}[a-z]*"},{b:"%r\\(",e:"\\)[a-z]*"},{b:"%r!",e:"![a-z]*"},{b:"%r\\[",e:"\\][a-z]*"}]}].concat(s),r:0}].concat(s);n.c=d,i.c=d;var l="[>?]>",o="[\\w#]+\\(\\w+\\):\\d+:\\d+>",u="(\\w+-)?\\d+\\.\\d+\\.\\d(p\\d+)?[^>]+>",w=[{b:/^\s*=>/,starts:{e:"$",c:d}},{cN:"meta",b:"^("+l+"|"+o+"|"+u+")",starts:{e:"$",c:d}}];return{aliases:["rb","gemspec","podspec","thor","irb"],k:r,i:/\/\*/,c:s.concat(w).concat(d)}});
</script>
<script>hljs.initHighlightingOnLoad();</script>
</head>
<body style="width: 800">
<p class="userData">Franco Matias Oscar Larrea (franco.larrea) - 2SMR</p>
<p class="title_wb">Servicios en red</p>
<div class="index"><p class="index_title_bl">Infraestructura de red</p>
<p class="index_title_un"><a class="index_title_un" href="#1.1">1. El modelo TCP/IP</a></p>
<p class="index_title_sc"><a class="index_title_sc" href="#1.1.1">1.1. Acceso a la red</a></p>
<p class="index_title_sc"><a class="index_title_sc" href="#1.1.2">1.2. Internet</a></p>
<p class="index_title_sc"><a class="index_title_sc" href="#1.1.3">1.3. Transporte</a></p>
<p class="index_title_sc"><a class="index_title_sc" href="#1.1.4">1.4. Aplicación</a></p>
<p class="index_title_sc"><a class="index_title_sc" href="#1.1.5">1.5. Práctica</a></p>
<p class="index_title_un"><a class="index_title_un" href="#1.2">2. Protocolo de configuración dinámica de host (DHCP)</a></p>
<p class="index_title_sc"><a class="index_title_sc" href="#1.2.1">2.1. Formato de mensaje</a></p>
<p class="index_title_sc"><a class="index_title_sc" href="#1.2.2">2.2. Operación</a></p>
<p class="index_title_sc"><a class="index_title_sc" href="#1.2.3">2.3. Práctica</a></p>
<p class="index_title_un"><a class="index_title_un" href="#1.3">3. Sistema de nombres de dominio (DNS)</a></p>
<p class="index_title_sc"><a class="index_title_sc" href="#1.3.1">3.1. Base de datos</a></p>
<p class="index_title_sc"><a class="index_title_sc" href="#1.3.2">3.2. Formato de mensaje</a></p>
<p class="index_title_sc"><a class="index_title_sc" href="#1.3.3">3.3. Operación</a></p>
<p class="index_title_sc"><a class="index_title_sc" href="#1.3.4">3.4. Práctica</a></p>
<p class="index_title_bl">Aplicaciones de red (I)</p>
<p class="index_title_un"><a class="index_title_un" href="#2.1">1. Protocolo de transferencia de archivos (FTP)</a></p>
<p class="index_title_sc"><a class="index_title_sc" href="#2.1.1">1.1. Operación</a></p>
<p class="index_title_sc"><a class="index_title_sc" href="#2.1.2">1.2. Modos activo y pasivo</a></p>
<p class="index_title_sc"><a class="index_title_sc" href="#2.1.3">1.3. Modos ASCII y binario</a></p>
<p class="index_title_sc"><a class="index_title_sc" href="#2.1.4">1.4. Práctica</a></p>
<p class="index_title_un"><a class="index_title_un" href="#2.2">2. Protocolo de transferencia de hipertexto (HTTP)</a></p>
<p class="index_title_sc"><a class="index_title_sc" href="#2.2.1">2.1. Operación y formato de mensaje</a></p>
<p class="index_title_sc"><a class="index_title_sc" href="#2.2.2">2.2. Práctica</a></p>
<p class="index_title_un"><a class="index_title_un" href="#2.3">3. Preprocesador de hipertexto (PHP)</a></p>
<p class="index_title_sc"><a class="index_title_sc" href="#2.3.1">3.1. Conceptos básicos</a></p>
<p class="index_title_sc"><a class="index_title_sc" href="#2.3.2">3.2. Estructuras de control</a></p>
<p class="index_title_sc"><a class="index_title_sc" href="#2.3.3">3.3. Arrays</a></p>
<p class="index_title_sc"><a class="index_title_sc" href="#2.3.4">3.4. Funciones</a></p>
<p class="index_title_sc"><a class="index_title_sc" href="#2.3.5">3.5. Formularios HTML</a></p>
<p class="index_title_sc"><a class="index_title_sc" href="#2.3.6">3.6. Bases de datos</a></p>
<p class="index_title_bl">Aplicaciones de red (II)</p>
<p class="index_title_un"><a class="index_title_un" href="#3.1">1. Protocolo simple de transferencia de correo (SMTP)</a></p>
<p class="index_title_sc"><a class="index_title_sc" href="#3.1.1">1.1. Operación</a></p>
<p class="index_title_sc"><a class="index_title_sc" href="#3.1.2">1.2. Formato de mensaje</a></p>
<p class="index_title_sc"><a class="index_title_sc" href="#3.1.3">1.3. Práctica</a></p>
<p class="index_title_un"><a class="index_title_un" href="#3.2">2. Shell seguro (SSH)</a></p>
<p class="index_title_sc"><a class="index_title_sc" href="#3.2.1">2.1. Otros protocolos de control remoto.</a></p>
<p class="index_title_sc"><a class="index_title_sc" href="#3.2.2">2.2. Práctica</a></p>
</div>
<div class="mark_parser"><h1>Introducción</h1>

<p><a href="./files/wb_files/sr/presentation.pdf">Presentación</a></p>

<p>Un <em>servicio</em> es un proceso cuyos principales datos de entrada y salida se reciben de o se envían a otros procesos (a veces denominados <em>clientes</em>).
Por tanto, no necesitan proporcionar una interfaz de usuario para llevar a cabo su actividad principal.
Cuando los datos de entrada y salida se transfieren a través de una interfaz de red, el servicio se denomina <em>servicio en red</em>.</p>

<p>La comunicación entre clientes y servicios a menudo requiere un protocolo de nivel de aplicación compatible con el cliente y el servicio.
Algunos protocolos son bien conocidos y estándar; en esos casos, el servicio generalmente se identifica con el protocolo estándar con el que es compatible.
Por ejemplo, un servicio HTTP (por ejemplo, fabricado por Apache) procesa datos provenientes de navegadores (por ejemplo, Firefox), entre otros programas.
Los servicios pueden implementarse de diferentes maneras y pueden distribuirse por distintos fabricantes con diversos tipos de licencia.</p>

<p>El contenido que se proporciona en esta web es un esquema-resumen de los protocolos estándar que sustentan las aplicaciones más importantes en el ambito de las redes de ordenadores, y además incluye actividades de diverso tipo.
El texto propuesto fue escrito inicialmente en lengua inglesa, y posteriormente traducido a lengua española con ayuda de traductores automáticos.
Sin embargo, se ha mantenido el uso de acrónimos y términos en inglés cuando esta es la forma que más se utiliza en el ámbito técnico, como por ejemplo: <em>driver</em>, <em>hub</em>, <em>switch</em>, <em>router</em>, <em>bridge</em>, <em>host</em>, entre muchos otros.</p>

<h1>Descripción de las actividades</h1>

<p>Este contenido está estructurado en varias unidades agrupadas en bloques.
Cada unidad se divide en secciones, y cada sección propone una serie de actividades de distinto tipo.</p>

<h2>Ejercicios</h2>

<p>Muchas actividades consisten en ejecutar una secuencia de comandos y/o modificar archivos de configuración.
En estos casos, el estudiante debe completar el ejercicio indicando la siguiente información cuando sea procedente:</p>

<ul>
<li>comando o comandos ejecutados para resolver el ejercicio;</li>
<li>archivos de configuración modificados, especificando propiedades y valores;</li>
<li>descripción general del comando;</li>
<li>descripción general de la información que se puede encontrar en el archivo de configuración;</li>
<li>significado de las opciones utilizadas para resolver el problema presentado;</li>
<li>significado de las propiedades modificadas en los archivos de configuración para resolver el problema;</li>
<li>información o resultados requeridos por el ejercicio (salida de los comandos), verificaciones o respuestas a las preguntas;</li>
<li>enlaces a recursos utilizados.</li>
</ul>

<p>Otras actividades son cuestiones que se contestan aplicando la lógica y con ayuda de recursos en Internet.</p>

<h2>Proyectos o prácticas</h2>

<p>Otros ejercicios son proyectos o actividades prácticas más complejas.
En esos casos, el estudiante puede adjuntar un documento PDF con la información requerida en cada caso.
Se pueden considerar las siguientes pautas para una mejor presentación del trabajo realizado:</p>

<ul>
<li>poner un título significativo;</li>
<li>agregar secciones complementarias (introducción, conclusión, referencias);</li>
<li>escribir un documento autocontenido, evitando referencias a nombres o conceptos no explicados en el documento (ej. hostN);</li>
<li>explicar el significado de los comandos y cada opción, y comentar los resultados;</li>
<li>enriquecer con figuras o diagramas (por ejemplo, en la introducción);</li>
<li>estructurar el documento, utilizando secciones numeradas y subsecciones;</li>
<li>vigilar la coherencia de los márgenes, espaciado y alineación;</li>
<li>utilizar tipos de letra adecuados, por ejemplo, empleando una fuente monoespaciada para los nombres de archivos y comandos;</li>
<li>evitar capturas de pantalla que solo contienen texto, mejor utilizar texto en colores;</li>
<li>emplear lenguaje científico-técnico y evitar errores de ortografía.</li>
</ul>

<h2>Actividades complementarias</h2>

<p>Los estudiantes pueden proponer y realizar sus propios proyectos de ampliación de forma opcional y complementaria.
En esos casos, trabajarán con sus propios recursos virtuales o físicos y mostrarán públicamente los procedimientos y la conclusión de su trabajo.
Ejemplos de proyectos:</p>

<ul>
<li>instalación, configuración y prueba de un servidor de juegos local,</li>
<li>clientes P2P que ofrecen una interfaz web remota como un servicio de red (por ejemplo, Transmission),</li>
<li>evaluación de un proxy local para anonimizar el acceso a Internet (por ejemplo, Privoxy),</li>
<li>prueba de cualquiera de los servicios estudiados en otros sistemas operativos (por ejemplo, OpenWrt),</li>
<li>despliegue de redes sociales en servidores locales (por ejemplo, Mastodon),</li>
<li>acceso a los servicios de la red doméstica de forma segura utilizando túneles SSH o port forwarding.</li>
</ul>
</div>
<p class="title_bl">Infraestructura de red</p>
<div class="mark_parser"><p>Este bloque introduce servicios necesarios para que las redes funcionen como los usuarios esperan.
Algunos ejemplos son los servicios de interconexión de red a nivel de aplicación (proxies), resolución de nombres o servicios de configuración dinámica.</p>
</div>
<a name="1.1"></a><p class="title_un">1. El modelo TCP/IP</p>
<div class="mark_parser"><p>Un <em>computador</em> u <em>ordenador</em> es una máquina que recibe datos de entrada, los transforma, y los ofrece como datos de salida.
Generalmente, este proceso conlleva interacción con el usuario y el entorno físico, así como almacenamiento de datos y comunicación de unos computadores con otros.</p>

<p>En un sentido amplio, esta definición engloba supercomputadores, mainframes, servidores, ordenadores de sobremesa, portátiles, smart TV, tablets, smartphones, smartwatches, consolas de videojuegos, sistemas embebidos, máquinas virtuales y otros muchos tipos de computador.</p>

<p>Una <em>red</em> es un conjunto de computadores que pueden compartir información y recursos.
Un computador que forma parte de una red se denomina <em>nodo</em> o <em>host</em>.
Las redes también pueden interconectarse para permitir la comunicación entre computadores de distintas redes.</p>

<p>Para que la comunicación entre nodos sea posible es necesario establecer varios <em>protocolos</em> o conjuntos de reglas.
Los protocolos resuelven problemas de comunicación de muy diversa índole, tales como la representación de la información en un medio físico, la detección y corrección de errores, el control de flujo o la identificación de nodos de origen y destino en la comunicación entre ordenadores de la misma red o de distintas redes.</p>

<p>Los protocolos se distribuyen en distintos niveles según un determinado estándar o modelo; uno de los más utilizados es el modelo TCP/IP que se resume en la siguiente figura:</p>

<p><img src="./files/wb_files/sr_01_01/tcpip_model.jpg" alt="tcpip_model.jpg" /></p>

<p>Esta unidad estudia cada nivel del modelo TCP/IP y algunos de protocolos principales.</p>
</div>
<a name="1.1.1"></a><p class="title_sc">1.1. Acceso a la red</p>
<blockquote><div class="mark_parser"><p>En la capa de acceso a la red, la red se considera parte del sistema de entrada y salida del computador.
A grandes rasgos, se encarga de representar los datos empleando un medio físico y establecer las reglas para compartir dicho medio entre los distintos nodos.</p>

<p>En este nivel los datos a transmitir se dividen en unidades llamadas <em>frames</em> (<em>tramas</em>).
Junto a los datos a transmitir, los paquetes incorporan la información necesaria para los datos pueden llegar a su destino, según las reglas que establezca el protocolo.
Algunos protocolos muy extendidos en esta capa son Ethernet y Wi-Fi.</p>

<h1>Adaptadores de red</h1>

<p>De acuerdo con el modelo von Neumman de un computador, este consta de los siguientes componentes:</p>

<ul>
<li><strong>Unidad Central de Procesamiento (CPU)</strong>. Ejecuta instrucciones del programa.</li>
<li><strong>Memoria principal</strong>. Almacena instrucciones y datos.</li>
<li><strong>Controladores de dispositivo</strong>. Comparten datos de entrada y salida hacia y desde la CPU, y generan señales adecuadas para dispositivos de entrada/salida.</li>
<li><strong>Buses</strong>. Interconectan los elementos del computador para que puedan compartir datos.</li>
</ul>

<p><img src="./files/wb_files/sr_01_01_01/von_neumann_architecture.png" alt="von_neumann_architecture.png" /></p>

<p>Existen varios tipos de dispositivos de entrada/salida:</p>

<ul>
<li>entrada (teclado, ratón, escáner, etc.),</li>
<li>salida (pantalla, impresora, etc.),</li>
<li>almacenamiento o memoria secundaria (discos magnéticos, estado sólido, etc.),</li>
<li>red o adaptadores de red (Ethernet, Wi-Fi, 3G/4G, etc.).</li>
</ul>

<h1>Drivers</h1>

<p>Los sistemas operativos usan drivers para administrar cada controlador de dispositivo en particular (marca y modelo).
Los drivers son programas (pueden ser parte del sistema operativo), que saben cómo enviar y recibir datos de un controlador de dispositivo en particular, ofreciendo una interfaz uniforme a las partes restantes del sistema operativo.
Gracias a los drivers, el sistema operativo puede manejar los diferentes adaptadores de red disponibles en el mercado.</p>

<h1>Direccionamiento</h1>

<p>El adaptador de red puede enviar y recibir datos directamente desde y hacia otros adaptadores de red en otros nodos, a través de un medio de transmisión.
En general, los adaptadores de red tienen un identificador único establecido por el fabricante; esta es la dirección física y se utiliza para identificar el origen y el destino de la comunicación en cada frame.</p>

<h1>Dispositivos de interconexión en redes de cable</h1>

<p>Para compartir datos solo entre dos nodos, los adaptadores de red correspondientes se pueden conectar mediante un cable.
Sin embargo, para que más de dos nodos puedan compartir información con cables se suele emplear un dispositivo adicional de interconexión.
Entre las soluciones más extendidas, destacan las siguientes:</p>

<ul>
<li><strong>Hub (concentrador)</strong>. En las redes Ethernet, cada adaptador de red está unido mediante un cable a un hub compartido, que restaura la señal y la transmite a todos los demás adaptadores de red. Así, los datos enviados por un nodo son recibidos por todos los demás nodos de la red, y cada uno tiene que descartar los datos recibidos de acuerdo con la dirección física de destino.</li>
<li><strong>Switch (conmutador)</strong>. En las redes Ethernet conmutadas, cada adaptador de red está unido mediante un cable a un switch compartido, que envía los datos solo al receptor oportuno de acuerdo con la dirección física de destino.</li>
</ul>

<h1>Dispositivos de interconexión en redes inalámbricas</h1>

<p>En las redes Wi-Fi, los ordenadores comparten una banda de radiofrecuencia como medio físico para la transmisión de datos.
Estas redes se pueden configurar en dos modos:</p>

<ul>
<li><strong>Modo de infraestructura</strong>. Los nodos se comunican entre sí con la participación de un WAP (Wireless Access Point, punto de acceso inalámbrico) que actúa como dispositivo de interconexión. Por lo general, el WAP también proporciona comunicación con la red cableada.</li>
<li><strong>Modo ad-hoc</strong> o <strong>peer-to-peer</strong>. Los nodos en la red inalámbrica se comunican directamente entre sí, sin la necesidad de ningún elemento central como el WAP.</li>
</ul>

<p>Las redes inalámbricas han ganado una importancia cada vez mayor en el mercado, ya que son mucho más flexibles y cómodas que sus contrapartes cableadas.
Sin embargo, dado que utilizan un medio compartido y de fácil acceso, se requieren algunos mecanismos de seguridad adicionales.
Estos mecanismos no son necesarios en redes cableadas:</p>

<ul>
<li><strong>Sistema abierto</strong>. No hay autenticación ni encriptación.</li>
<li><strong>WEP (Wired Equivalent Privacy)</strong>. WEP (obsoleto) tiene dos modos de operación en cuanto a la autenticación:

<ul>
<li><strong>Abierto</strong>. El nodo puede autenticarse y asociarse sin usar la clave, pero necesita la clave para establecer cualquier comunicación posterior.</li>
<li><strong>Clave compartida</strong>. La clave se utiliza como mecanismo de autenticación. El punto de acceso solo asociará a aquellos clientes que puedan devolver correctamente un texto cifrado de un texto claro proporcionado por el punto de acceso. Este texto claro se llama desafío.</li>
</ul></li>
<li><strong>WPA(Wi-Fi Protected Access)</strong>. Fue creado en un primer paso para abordar las deficiencias de WEP y luego (WPA2) para mejorar la seguridad. WPA2 se define en el estándar IEEE 802.11i, y se proponen dos soluciones:

<ul>
<li><strong>WPA-PSK (WPA Personal)</strong>. La autenticación se realiza mediante una PSK (Pre-Shared Key, clave precompartida).</li>
<li><strong>WPA 802.1x (WPA Empresarial)</strong>. Para la autenticación, el punto de acceso utiliza un servicio RADIUS (Remote Authentication Dial In User Service), donde se almacenan las credenciales del usuario. La autenticación se realiza mediante un protocolo EAP (Extensible Authentication Protocol, protocolo de autenticación extensible). El punto de acceso en sí también puede autenticarse en los nodos mediante un certificado digital.</li>
</ul></li>
</ul>

<p>A diferencia de WEP, la clave compartida WPA solo se usa durante el proceso de autenticación.
En este proceso, cada nodo negocia su propia clave y se cambia periódicamente.
Hay dos tipos de cifrado WPA: TKIP (Temporal Key Integrity Protocol, protocolo de integridad de clave temporal) y AES (Advanced Encryption Standard, estándar de cifrado avanzado); el segundo es el que se usa en WPA2 y es más robusto y seguro, pero requiere más recursos de hardware.</p>

<p>Además de autenticación y cifrado, es posible aplicar otras medidas de seguridad adicionales, pero generalmente implican un mayor esfuerzo para administrar la red:</p>

<ul>
<li>deshabilitar la transmisión del SSID,</li>
<li>habilitar el filtrado MAC,</li>
<li>deshabilitar el servicio DHCP y</li>
<li>desactivar WPS (Wireless Protected Setup, configuración inalámbrica protegida).</li>
</ul>

<h1>Interconexión de redes</h1>

<p>En algunas situaciones, puede ser conveniente implementar o ampliar una red uniendo dos o más redes existentes.
Esta configuración puede incorporar las siguientes ventajas, entre otras:</p>

<ul>
<li>aumentar la distancia máxima entre los nodos (alcance) o el número de nodos conectados,</li>
<li>distribuir la administración de la red entre el personal técnico,</li>
<li>mejorar el rendimiento y</li>
<li>combinar diferentes medios de transmisión (por ejemplo, cable y radiofrecuencia).</li>
</ul>

<p>Para realizar este tipo de interconexión, se requiere un dispositivo <em>bridge</em> (<em>puente</em>).
El bridge proporciona varios puertos para la interconexión de redes, uno para cada red.
El bridge asocia cada puerto a las direcciones físicas de los nodos conectados a la red correspondiente, por lo que los datos entrantes se pueden retransmitir a través del puerto correspondiente de acuerdo con la dirección de destino.</p>

<p>Un switch puede considerarse un tipo específico de bridge, ya que en cada toma puede recibir un nodo o toda una red procedente de otro switch o hub.
Otro ejemplo de dispositivo que incluye un bridge es un WAP, que interconecta una red Wi-Fi y una red Ethernet conmutada.</p>
</div>
<table><tr valign="top"><td><div class="mark_parser"><p>1.</p></div></td><td><div class="mark_parser"><p><a href="http://mj.ucw.cz/sw/pciutils/"><strong>The PCI Utilities</strong></a>. Ejecuta el comando <code>lspci</code> para enumerar todos los dispositivos conectados al bus PCI del ordenador. Identifica el dispositivo correspondiente al adaptador de red y averigua el nombre del controlador.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>El comando <strong><em>lspci</em></strong> lista con todos los dispositivos conectados al bus PCI del ordenador:</p>

<blockquote>
  <ul>
  <li>00:19.0 Ethernet controller: Intel Corporation Ethernet Connection I217-LM (rev 04)</li>
  </ul>
</blockquote>

<p>Nombre del controlador: <strong>Intel Corporation Ethernet Connection I217-LM (rev 04)</strong></p>

<p>La opción <strong><em>lspci -vvv</em></strong> ofrece más información sobre cada dispositivo:</p>

<blockquote>
  <ul>
  <li>00:19.0 Ethernet controller: Intel Corporation Ethernet Connection I217-LM (rev 04)</li>
  <li>Subsystem: Hewlett-Packard Company Ethernet Connection I217-LM</li>
  <li>Control: I/O+ Mem+ BusMaster+ SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR+ FastB2B- DisINTx+</li>
  <li>Status: Cap+ 66MHz- UDF- FastB2B- ParErr- DEVSEL=fast >TAbort- &lt;TAbort- &lt;MAbort- >SERR- &lt;PERR- INTx-</li>
  <li>Latency: 0</li>
  <li>Interrupt: pin A routed to IRQ 24</li>
  <li>Region 0: Memory at f7c00000 (32-bit, non-prefetchable) [size=128K]</li>
  <li>Region 1: Memory at f7c3d000 (32-bit, non-prefetchable) [size=4K]</li>
  <li>Region 2: I/O ports at f080 [size=32]</li>
  <li>Capabilities: &lt;access denied></li>
  <li><strong>Kernel driver in use: e1000e</strong></li>
  <li>Kernel modules: e1000e</li>
  </ul>
</blockquote>

<p>Kernel driver in use: <strong>e1000e</strong></p>
</div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>2.</p></div></td><td><div class="mark_parser"><p><a href="https://wiki.linuxfoundation.org/networking/iproute2"><strong>iproute2</strong></a>. Ejecuta el comando <code>ip</code> para averiguar las interfaces de red que tienen un driver adecuado y su correspondiente dirección física. ¿Es posible cambiar la dirección física? Si es así, indica el comando <code>ip</code> correspondiente y pruébalo.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>Con <strong><em>ip link</em></strong> averiguo las interfaces de red que tienen un driver adecuado con su correspondiente dirección fisica.</p>

<blockquote>
  <ul>
  <li>1: <strong>lo</strong>: &lt;LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1
  
  <ul>
  <li>link/loopback <strong>00:00:00:00:00:00</strong> brd 00:00:00:00:00:00</li>
  </ul></li>
  <li>2: <strong>enp0s3</strong>: &lt;BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UP mode DEFAULT group default qlen 1000
  
  <ul>
  <li>link/ether <strong>08:00:27:b5:0b:5c</strong> brd ff:ff:ff:ff:ff:ff</li>
  </ul></li>
  </ul>
</blockquote>

<p>Tenemos dos interfaces de red:</p>

<blockquote>
  <ul>
  <li>Interfaz: <strong>lo</strong>
  
  <ul>
  <li>MAC: <strong>00:00:00:00:00:00</strong></li>
  </ul></li>
  <li>Interfaz: <strong>enp0s3</strong>
  
  <ul>
  <li>MAC: <strong>08:00:27:b5:0b:5c</strong></li>
  </ul></li>
  </ul>
</blockquote>

<p>Para cambiar la dirección física se utiliza el siguiente comando:</p>

<blockquote>
  <p><strong><em>sudo ip link add link enp0s3 address 08:00:27:aa:aa:ab enp0s3.1 type macvlan</em></strong></p>
</blockquote>

<p>Para quitar la dirección física se utiliza el siguiente comando:</p>

<blockquote>
  <p><strong><em>sudo ip link del link enp0s3 address 08:00:27:aa:aa:ab enp0s3.1 type macvlan</em></strong></p>
</blockquote>
</div></div>
</blockquote>
<a name="1.1.2"></a><p class="title_sc">1.2. Internet</p>
<blockquote><div class="mark_parser"><p>La interconexión de redes utilizando direcciones físicas requiere que el dispositivo de interconexión (por ejemplo, un bridge o un switch) almacene todas las direcciones conectadas a cada puerto.
Este enfoque no es factible cuando millones de nodos pueden estar conectados a un puerto determinado, como es el caso de la interconexión de redes a escala global.
En esas situaciones, se introduce un esquema de direccionamiento lógico que permite al dispositivo de interconexión encontrar el puerto de salida correcto analizando parte de la dirección lógica de destino.</p>

<p>En la capa de internet los datos a transmitir se dividen en unidades llamadas <em>packets</em> (<em>paquetes</em>).
Junto a los datos a transmitir, los paquetes incorporan la información necesaria para los datos pueden llegar a su destino, según las reglas que establezca el protocolo.
El protocolo principal en la capa de internet es el llamado IP (Internet Protocol, protocolo de internet).</p>

<h1>Direccionamiento</h1>

<p>En IPv4, a cada nodo se le asigna un número de 32 bits (dirección IP), generalmente representado por cuatro números decimales de 8 bit separados por punto (por ejemplo, <code>192.168.0.100</code>).
Una dirección IP consta de dos partes:</p>

<ul>
<li>bits de host y</li>
<li>bits de red</li>
</ul>

<p>Además, la <em>máscara de red</em> es un número de 32 bits con un 1 establecido en las posiciones que pertenecen a la parte de la red y un 0 en las posiciones que pertenecen a la parte del host.
Además, el protocolo IP define direcciones IP especiales para la transmisión de difusión (todos los bits de host puestos a 1) y para hacer referencia a la red en su conjunto (todos los bits de host puestos a 0).</p>

<h1>Routers y encaminamiento</h1>

<p>Todas las direcciones IP que coinciden en los bits de red pertenecen a nodos conectados directa o indirectamente al mismo puerto del dispositivo de interconexión.
El dispositivo de interconexión utiliza este principio para decidir el puerto de salida.
Dicho dispositivo se denomina <em>router</em>; los puertos del router generalmente se denominan <em>interfaces</em>.
Si un computador que forma parte de una red se denomina <em>nodo</em>, lo routers pueden considerarse también nodos, aunque con el propósito especial de redirigir (encaminar) los paquetes.</p>

<p>En una red IP, todos los nodos (incluyendo routers) mantienen una <em>routing table</em> o <em>tabla de encaminamiento</em>, generalmente administrada por el sistema operativo.
En esta tabla hay una entrada para cada red conocida, identificada por la dirección IP de red correspondiente (todos los bits del host a 0) y la máscara de red.
Cada entrada, asigna la red correspondiente a una interfaz de salida.
Para decidir la interfaz de salida (encaminamiento), el nodo localiza la primera entrada coincidente (mismos bits de red) y obtiene la interfaz de salida correspondiente.
Por lo general, al final de la tabla hay una entrada para la red <code>0.0.0.0</code>, máscara <code>0.0.0.0</code> (identifica todos los nodos en la red IP); esta entrada permite configurar una interfaz predeterminada cuando la dirección IP del nodo pertenece a una red desconocida.</p>

<p>Además de la dirección de red y la interfaz correspondiente, cada entrada puede almacenar la dirección IP de un router (siguiente <em>hop</em> o salto) llamado <em>gateway</em> o <em>puerta de enlace</em>; en este caso, los datos deben enviarse a la dirección física de este router, por lo que los datos van de origen a destino saltando de un router al siguiente.</p>

<p>Por lo general, los nodos de la red que no son routers tienen una entrada para la red a la que pertenecen y otra entrada para la red <code>0.0.0.0</code>, máscara <code>0.0.0.0</code> para la puerta de enlace predeterminada (generalmente, un router en su red).
Estos nodos no realizan encaminamiento: si reciben datos dirigidos a una dirección IP diferente, los datos se descartan, no se reenvían.
Sin embargo, los nodos que sí son routers están destinados a recibir datos dirigidos a una dirección IP diferente de la asignada a sus interfaces, y esos datos obviamente sí se reenvían.</p>

<h1>Resolución de dirección física</h1>

<p>Para transmitir datos desde una fuente a un destino, es necesario incorporar la dirección física, ya que es la única reconocida por los adaptadores de red.
Por lo tanto, si un nodo envía un paquete IP a otro nodo en la misma red, primero debe averiguar cuál es la dirección física de destino correspondiente a la dirección lógica (IP) de destino.</p>

<p>Para hacer esto, los nodos usan ARP (Address Resolution Protocol, protocolo de resolución de direcciones), lo que les permite mantener dinámicamente una tabla en memoria que relaciona cada dirección IP con su dirección física correspondiente (tabla ARP)</p>

<h1>Mensajes de control</h1>

<p>ICMP (Internet Control Message Protocol, protocolo de mensajes de control de internet) se utiliza para enviar mensajes de error especiales (por ejemplo, conexión rechazada) o verificar la disponibilidad de los nodos (solicitud de eco), entre otros.</p>

<h1>Direcciones IP públicas y privadas</h1>

<p>La <a href="http://www.iana.org">IANA</a> asigna direcciones IP de Internet a varios RIR (Regional Internet Registry, registro regional de Internet), que a su vez distribuyen grandes rangos de direcciones a compañías de comunicaciones y proveedores de Internet.</p>

<p>En algunos casos, cuando una compañía de comunicaciones proporciona acceso a Internet a un cliente, esta ofrece una dirección IP de Internet a la interfaz del router que enlaza con el proveedor (ADSL, fibra, cable, etc.).
Sin embargo, el resto de los nodos de la red del cliente no tendrán una dirección IP de Internet.
Para permitir la comunicación IP desde todos los nodos en la red del cliente, el administrador puede asignar direcciones IP en un rango especial (generalmente <code>192.168. *. *</code>, <code>172. [16-31]. *. *</code> o <code>10. *. *. *</code>).
Esas direcciones llamadas <em>internas</em> o <em>privadas</em> se pueden usar para la comunicación entre nodos de la red del cliente.
Sin embargo, para la comunicación por Internet, la dirección IP privada origen debe ser reemplazada por la asignada a la interfaz del router por la compañía (dirección <em>pública</em>), de modo que los datos de respuesta se puedan encaminar correctamente.</p>

<p>Esta técnica de sustitución generalmente la realiza el router y se denomina NAT (Network Address Translation, traducción de direcciones de red).
NAT permite ahorrar direcciones IP del rango limitado de IPv4, pero también limita la conectividad entrante, lo que puede considerarse una ventaja desde el punto de vista de la seguridad, pero una desventaja desde el punto de vista de algunas aplicaciones IoT (Internet of Things, Internet de las cosas).</p>
</div>
<table><tr valign="top"><td><div class="mark_parser"><p>1.</p></div></td><td><div class="mark_parser"><p><a href="https://wiki.linuxfoundation.org/networking/iproute2"><strong>iproute2</strong></a>. Ejecuta el comando <code>ip address</code> para encontrar las direcciones IP asignadas a cada interfaz en el nodo. Cambia la dirección IP y la máscara de una interfaz y verifica si la conectividad aún es posible; explica el resultado.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>He usado el comando <strong><em>ip address</em></strong></p>

<blockquote>
  <p>inet 127.0.0.1/8 scope host lo</p>
  
  <p>inet 192.168.0.244/24 brd 192.168.0.255 scope global enp0s3</p>
</blockquote>

<p>La interfaz "lo" tiene la IP:</p>

<blockquote>
  <p>127.0.0.1/8</p>
</blockquote>

<p>La interfaz "enp0s3" tiene la IP:</p>

<blockquote>
  <p>192.168.0.244/24</p>
</blockquote>

<p>Para agregar una dirección IP usamos el siguiente comando: 
<strong><em>sudo ip address add 192.168.50.244/24 dev enp0s3</em></strong>,</p>

<p>con el comando <strong><em>ip address</em></strong>  comprobamos si se ha añadido:</p>

<blockquote>
  <p>inet 192.168.50.244/24 scope global enp0s3</p>
</blockquote>

<p>Efectivamente se ha añadido la nueva ip. Haciendo ping desde la maquina de un compañero a la nueva ip podemos ver que funciona.</p>

<blockquote>
  <p><strong><em>ping 192.168.50.244</em></strong></p>
</blockquote>
</div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>2.</p></div></td><td><div class="mark_parser"><p><a href="https://wiki.linuxfoundation.org/networking/iproute2"><strong>iproute2</strong></a>. Ejecuta el comando <code>ip route</code> para mostrar la tabla de encaminamiento de un nodo y explica cada entrada.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>La salida del comando <strong><em>ip route</em></strong> nos muestra varias cosas:</p>

<hr />

<p>En esta linea se puede observar la puerta enlace predeterminada de la interfaz enp0s3:</p>

<pre><code>default via 192.168.0.1 dev enp0s3 onlink 
</code></pre>

<p>En esta linea podemos ver una IP que saca el equipo aleatoriamente:</p>

<pre><code>169.254.0.0/16 dev enp0s3 scope link metric 1000 
</code></pre>

<p>En esta linea se muestra nuestra dirección ip del equipo:</p>

<pre><code>192.168.0.0/24 dev enp0s3 proto kernel scope link src 192.168.0.244 
</code></pre>
</div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>3.</p></div></td><td><div class="mark_parser"><p><a href="https://wiki.linuxfoundation.org/networking/iproute2"><strong>iproute2</strong></a>. Ejecuta el comando <code>ip route</code> para cambiar la puerta de enlace predeterminada de un nodo y verifica el resultado.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>Con el siguiente comando borramos la puerta de enlace predeterminada:</p>

<pre><code>ip route del default via 192.168.0.1 dev enp0s3
</code></pre>

<p>Con el proximo comando añadimos la nueva puerta de enlace predeterminada:</p>

<pre><code>ip route add default via 192.168.0.240 dev enp0s3
</code></pre>

<p>Verificamos que se ha cambiado lapuerta de enlace predeterminada con:</p>

<pre><code>ip route
</code></pre>
</div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>4.</p></div></td><td><div class="mark_parser"><p><a href="https://www.kernel.org/doc/Documentation/networking/ip-sysctl.txt"><strong><code>/proc/sys/net/ipv4/*</code> variables del kernel</strong></a>. Cambia el valor de la variable del kernel <code>ip_forward</code> para configurar el reenvío de paquetes IP en el sistema operativo. Comprueba que el nodo está reenviando paquetes de manera efectiva.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>Como root:</p>

<pre><code> - sudo -s

 - echo 1 &gt; /proc/sys/net/ipv4/ip_forward
</code></pre>

<p>Este comando sirve para cambiar el valor de la variable del kernel ip_forward para configurar el reenvío de paquetes IP en el sistema operativo.</p>

<p>Con los siguientes comandos instalariamos y ejecutariamos el comando <strong><em>tcpdump</em></strong></p>

<pre><code><br /> - apt-get install tcpdump 

 - tcpdump icmp
</code></pre>

<p>El comando <strong><em>tcpdump</em></strong> <strong><em>icmp</em></strong> veo los paquetes ping que manda un compañero a través de mi maquina:</p>
</div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>5.</p></div></td><td><div class="mark_parser"><p><a href="https://wiki.linuxfoundation.org/networking/iproute2"><strong>iproute2</strong></a>. Ejecuta el comando <code>ip neigh</code> para mostrar la tabla ARP. ¿Cómo se puede vaciar esta tabla?</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>El comando <strong><em>ip neigh</em></strong> muestra la tabla ARP.</p>

<pre><code>192.168.0.139 dev enp0s3 lladdr 50:65:f3:27:aa:09 REACHABLE
192.168.0.1 dev enp0s3 lladdr 18:d6:c7:90:e5:73 STALE
</code></pre>

<p>Con <strong><em>sudo ip neigh flush dev enp0s3</em></strong> eliminamos esta tabla.</p>

<p>Con <strong><em>ip neigh</em></strong> volvemos a comprobar si se ha eliminado:</p>

<pre><code>192.168.0.139 dev enp0s3 lladdr 50:65:f3:27:aa:09 REACHABLE
192.168.0.1 dev enp0s3  FAILED
</code></pre>
</div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>6.</p></div></td><td><div class="mark_parser"><p><a href="https://wiki.linuxfoundation.org/networking/iputils"><strong>iputils</strong></a>. Ejecuta el comando <code>ping</code> para enviar cinco paquetes IP a un nodo y verifica que el nodo esté en funcionamiento. ¿Qué servicio debe estar activo en el nodo remoto para responder al comando <code>ping</code>?</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>Con el comando <strong><em>ping -c 5 8.8.8.8</em></strong> enviamos 5 paquetes ip:</p>

<pre><code>PING 8.8.8.8 (8.8.8.8) 56(84) bytes of data.
64 bytes from 8.8.8.8: icmp_seq=1 ttl=52 time=12.1 ms
64 bytes from 8.8.8.8: icmp_seq=2 ttl=52 time=11.3 ms
64 bytes from 8.8.8.8: icmp_seq=3 ttl=52 time=11.6 ms
64 bytes from 8.8.8.8: icmp_seq=4 ttl=52 time=12.2 ms
64 bytes from 8.8.8.8: icmp_seq=5 ttl=52 time=11.5 ms
--- 8.8.8.8 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4008ms
rtt min/avg/max/mdev = 11.160/11.529/11.708/0.217 ms
</code></pre>
</div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>7.</p></div></td><td><div class="mark_parser"><p><a href="https://wiki.linuxfoundation.org/networking/iputils"><strong>iputils</strong></a>. Ejecuta el comando <code>traceroute</code> para verificar el número de saltos requerido para enviar datos desde un nodo a otro en Internet.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>Primero tendremos que instalar el comando:</p>

<pre><code>sudo apt-get install traceroute
</code></pre>

<p>Ejecutamos el comando:</p>

<pre><code>sudo traceroute 8.8.8.8
</code></pre>

<pre><code>traceroute to 8.8.8.8 (8.8.8.8), 30 hops max, 60 byte packets
 1  192.168.0.1 (192.168.0.1)  0.219 ms  0.241 ms  0.326 ms
 2  10.0.0.233 (10.0.0.233)  0.827 ms  0.809 ms  0.794 ms
 3  192.168.1.1 (192.168.1.1)  0.980 ms  1.064 ms  1.130 ms
 4  * * *
 5  * * *
 6  198.red-81-41-228.staticip.rima-tde.net (81.41.228.198)  17.366 ms * *
 7  * * *
 8  * 176.52.253.93 (176.52.253.93)  13.708 ms *
 9  176.52.253.102 (176.52.253.102)  13.649 ms 5.53.1.74 (5.53.1.74)  9.988 ms 72.14.211.154 (72.14.211.154)  12.655 ms
10  * * *
11  74.125.253.197 (74.125.253.197)  10.967 ms 74.125.253.199 (74.125.253.199)  11.168 ms dns.google (8.8.8.8)  10.780 ms
</code></pre>

<p>Podemos ver que hay 11 saltos hasta llegar al destino.</p>
</div></div>
</blockquote>
<a name="1.1.3"></a><p class="title_sc">1.3. Transporte</p>
<blockquote><div class="mark_parser"><p>El reenvío de paquetes proporcionado en la capa de internet no ofrece una comunicación <em>confiable</em>, ya que no garantiza que la secuencia de paquetes se entregue en el mismo orden en que se envió, ni que se entregue la totalidad de los paquetes.
Además, no permite gestionar varias comunicaciones simultáneas de diferentes procesos en un mismo nodo de red, esto es, <em>multiplexación</em>.</p>

<p>La capa de transporte aborda estos problemas aplicando dos enfoques diferentes: comunicación orientada a conexión y comunicación no orientada a conexión.
Por lo general, la capa de transporte se ejecuta solo en los extremos de la comunicación (nodos que no son routers) y no en los nodos intermedios (routers).</p>

<p>En la capa de transporte los datos a transmitir se dividen en unidades llamadas <em>segments</em> (<em>segmentos</em>).
Junto a los datos a transmitir, los segmentos incorporan la información necesaria para la multiplexación y mantenimiento de la confiabilidad, según las reglas y funciones que establezca el protocolo.
Los protocolos principales en la capa de transporte son (se usa uno u otro exclusivamente):
- TCP (Transmission Control Protocol, protocolo de control de transmisión), que ofrece comunicación orientada a conexión o
- UDP (User Datagram Protoco, protocolo de datagramas de usuario), que ofrece comunicación no orientada conexión.</p>

<h1>Comunicación orientada a conexión (TCP)</h1>

<p>El enfoque orientado a conexión incorpora las funciones necesarias para proporcionar una comunicación sin errores y sin pérdidas.
Específicamente, el protocolo TCP proporciona principalmente las siguientes funciones:</p>

<ul>
<li><strong>Multiplexación de datos</strong>. En un nodo puede haber más de un proceso que requiera comunicación al mismo tiempo. Esto se consigue identificando cada extremo de la comunicación con un número de <em>puerto</em>.</li>
<li><strong>Fiabilidad</strong>. Incorpora mecanismos que permiten ofrecer a los procesos una comunicación confiable.</li>
<li><strong>Control de flujo</strong>. Permite controlar y gestionar el flujo de datos entre dos dispositivos, teniendo en cuenta que el emisor y el receptor funcionan a diferentes velocidades.</li>
</ul>

<p>Para proporcionar confiabilidad y control de flujo, TCP implementa el establecimiento, la administración y la terminación de la conexión.
Además incluye <em>acknowledgement</em> (<em>acuse de recibo</em>), <em>timeouts</em> y reenvíos como base para garantizar la correcta recepción de los datos.</p>

<p><img src="./files/wb_files/sr_01_01_03/tcp_conn.png" alt="tcp_conn.png" /> <img src="./files/wb_files/sr_01_01_03/tcp_close.png" alt="tcp_close.png" /></p>

<h1>Comunicación no orientada a conexión (UDP)</h1>

<p>El enfoque de comunicación sin conexión solo proporciona una interfaz a los procesos del nodo para el protocolo de capa de internet subyacente.
El protocolo UDP, al igual que TCP, admite la multiplexación de aplicaciones mediante la definición de números de <em>puerto</em>, pero no proporciona confiabilidad o control de flujo.
Por contra, ofrece comunicación con menor latencia.</p>
</div>
<table><tr valign="top"><td><div class="mark_parser"><p>1.</p></div></td><td><div class="mark_parser"><p><a href="https://wiki.linuxfoundation.org/networking/iproute2"><strong>iproute2</strong></a>. Ejecuta el comando <code>ss</code> para mostrar la lista de conexiones TCP establecidas en el nodo (en algunas distribuciones, puede que se requiera acceso como usuario <em>root</em> para algunas opciones). Añade opciones para mostrar también el nombre de todos los procesos en estado <em>listening</em> (<em>escuchando</em>) y los números de puerto correspondientes.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>Ejecutamos el comando <strong><em>ss</em></strong> para mostrar una lista de conexiones TCP.</p>

<p>Con las opciones <strong><em>ss -t</em></strong> muestra todas las listas de conexiones TCP:</p>

<pre><code> - State      Recv-Q Send-Q Local Address:Port                 Peer Address:Port                
 - ESTAB      0      0      192.168.0.244:ssh                  192.168.0.139:46598 
</code></pre>

<p>Y con las opciones <strong><em>sudo ss -tlnp</em></strong> muestra todas las listas de conexiones TCP en estado "listening", numeros de puertos y procesos:</p>

<pre><code> - State      Recv-Q Send-Q Local Address:Port               Peer Address:Port              
 - LISTEN     0      128          *:22                       *:*              users:(("sshd",pid=429,fd=3))
 - LISTEN     0      128         :::22                      :::*              users:(("sshd",pid=429,fd=4))

</code></pre>
</div></div>
</blockquote>
<a name="1.1.4"></a><p class="title_sc">1.4. Aplicación</p>
<blockquote><div class="mark_parser"><p>Las aplicaciones son procesos que emplean la capa de transporte para enviar o recibir datos de otro proceso que se ejecuta en otro nodo.
Las aplicaciones se pueden diseñar de diferentes maneras para distribuir la ejecución entre un conjunto de nodos.</p>

<p>Uno de los modelos de distribución más comunes es el modelo cliente-servidor, en el que la aplicación se divide en dos programas diferentes, <em>cliente</em> y <em>servidor</em>.
Normalmente, el proceso cliente proporciona una interfaz de usuario y realiza solicitudes al proceso servidor; por su parte, el proceso servidor accede a recursos específicos para realizar el servicio (dispositivos especiales, bases de datos, etc.).
El proceso servidor también se denomina <em>servicio en red</em> y proporciona una interfaz para el proceso cliente de acuerdo con un protocolo de aplicación, que puede ser estándar tal como DHCP, DNS, HTTP, FTP, SMTP, POP, IMAP, etc.</p>

<p>Por lo general, los sistemas operativos proporcionan una interfaz administrativa que permite la gestión de servicios (no necesariamente servicios en red) mediante operaciones como <em>start</em>, <em>stop</em>, <em>status</em>, etc.
Además, el sistema operativo también se encarga de iniciar dichos servicios en el arranque cuando es necesario, respetando las dependencias entre los servicios (un servicio puede requerir que otro esté previamente en funcionamiento).
Además, los servicios deben finalizar ordenadamente cuando se detiene el sistema.</p>

<p>Algunos sistemas operativos proporcionan diferentes <em>runlevels</em> (modos).
Un runlevel es un estado que define un conjunto de servicios que deben estar operativos.
Por ejemplo, se puede definir un modo seguro para iniciar el sistema solo con los servicios básicos y obligatorios.</p>
</div>
<table><tr valign="top"><td><div class="mark_parser"><p>1.</p></div></td><td><div class="mark_parser"><p><a href="https://www.freedesktop.org/wiki/Software/systemd"><strong>systemd</strong></a>. En la mayoría de las distribuciones Unix-like (similares a Unix), la gestión de cada servicio se ofrece mediante un programa o script específico, que admite un conjunto de operaciones estándar como start, stop, restart, reload, status, etc. En algunas distribuciones hay un comando que ofrece una interfaz homogénea al usuario administrador. Elije un servicio instalado en el sistema y averigua qué comando se debe ejecutar para realizar las siguientes operaciones:</p>

<ul>
<li>iniciar el servicio,</li>
<li>detener el servicio,</li>
<li>detener e iniciar el servicio,</li>
<li>hacer que el servicio vuelva a cargar sus archivos de configuración y</li>
<li>verificar el estado del servicio.</li>
</ul>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>Con el comando <strong><em>sudo systemctl start sshd</em></strong> iniciamos un servicio.</p>

<p>Con el comando <strong><em>ss -ltp</em></strong> podemos observar que procesos están escuchando en TCP:</p>

<pre><code>State      Recv-Q Send-Q Local Address:Port                 Peer Address:Port                
LISTEN     0      128        *:ssh                      *:*                    
LISTEN     0      128       :::ssh                     :::*  
</code></pre>

<p>Con el comando <strong><em>sudo systemctl stop sshd</em></strong> paramos un servicio.</p>

<p><strong><em>ss -ltp</em></strong></p>

<pre><code>State      Recv-Q Send-Q Local Address:Port                 Peer Address:Port 
</code></pre>

<p>Con el comando <strong><em>sudo systemctl restart sshd</em></strong> paramos e iniciamos un servicio.</p>

<p><strong><em>ss -ltp</em></strong></p>

<pre><code>State      Recv-Q Send-Q Local Address:Port                 Peer Address:Port                
LISTEN     0      128        *:ssh                      *:*                    
LISTEN     0      128       :::ssh                     :::* 
</code></pre>

<p>Con el comando <strong><em>sudo systemctl reload sshd</em></strong> volvemos a cargar los archivos de configuración de un servicio.</p>

<p><strong><em>ss -ltp</em></strong></p>

<pre><code>State      Recv-Q Send-Q Local Address:Port                 Peer Address:Port                
LISTEN     0      128        *:ssh                      *:*                    
LISTEN     0      128       :::ssh                     :::*     
</code></pre>

<p>Con el comando <strong><em>sudo systemctl status sshd</em></strong> verificamos el estado de un servicio.</p>

<pre><code>● ssh.service - OpenBSD Secure Shell server
   Loaded: loaded (/lib/systemd/system/ssh.service; enabled; vendor preset: enab
led)
   Active: active (running) since Mon 2019-10-07 10:20:26 CEST; 20min
 ago
  Process: 510 ExecReload=/bin/kill -HUP $MAINPID (code=exited, status=0/SUCCESS
)
  Process: 509 ExecReload=/usr/sbin/sshd -t (code=exited, status=0/SUCCESS)
  Process: 488 ExecStartPre=/usr/sbin/sshd -t (code=exited, status=0/SUCCESS)
 Main PID: 489 (sshd)
    Tasks: 1 (limit: 4915)
   CGroup: /system.slice/ssh.service
           └─489 /usr/sbin/sshd -D

Oct 07 10:20:26 study systemd[1]: Stopped OpenBSD Secure Shell server.
Oct 07 10:20:26 study systemd[1]: Starting OpenBSD Secure Shell server...
Oct 07 10:20:26 study sshd[489]: Server listening on 0.0.0.0 port 22.
Oct 07 10:20:26 study sshd[489]: Server listening on :: port 22.
Oct 07 10:20:26 study systemd[1]: Started OpenBSD Secure Shell server.
Oct 07 10:39:28 study systemd[1]: Reloading OpenBSD Secure Shell server.
Oct 07 10:39:31 study sshd[489]: Received SIGHUP; restarting.
Oct 07 10:39:31 study sshd[489]: Server listening on 0.0.0.0 port 22.
Oct 07 10:39:31 study systemd[1]: Reloaded OpenBSD Secure Shell server.
</code></pre>
</div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>2.</p></div></td><td><div class="mark_parser"><p><a href="https://www.freedesktop.org/wiki/Software/systemd"><strong>systemd</strong></a>. La mayoría de las distribuciones Unix-like (similares a Unix) ofrecen una herramienta que permite, entre otras cosas, configurar qué servicios se iniciarán en el arranque. Ejecuta el comando disponible en el sistema para realizar las siguientes operaciones con un servicio seleccionado:</p>

<ul>
<li>iniciar el servicio en el arranque (runlevel predeterminado) y</li>
<li>no iniciar el servicio en el arranque.</li>
</ul>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>Con el comando <strong><em>sudo systemctl enable ssh</em></strong> iniciamos un servicio en el arranque:</p>

<pre><code>Synchronizing state of ssh.service with SysV service script with /lib/systemd/systemd-sysv-install.
Executing: /lib/systemd/systemd-sysv-install enable ssh
</code></pre>

<p>Con el comando <strong><em>sudo systemctl disable ssh</em></strong> deshabilitamos el servicio en el arranque:</p>

<pre><code>Synchronizing state of ssh.service with SysV service script with /lib/systemd/systemd-sysv-install.
Executing: /lib/systemd/systemd-sysv-install disable ssh
Removed /etc/systemd/system/sshd.service.
</code></pre>
</div></div>
</blockquote>
<a name="1.1.5"></a><p class="title_sc">1.5. Práctica</p>
<blockquote><div class="mark_parser"><p><a href="./files/wb_files/sr_01_01_05/practical_simulation.pdf">Simulación de la red</a></p>

<p><a href="./files/wb_files/sr_01_01_05/practical_report.pdf">Informe</a></p>
</div>
<table><tr valign="top"><td><div class="mark_parser"><p>1.</p></div></td><td><div class="mark_parser"><p>[proxy] <strong>Interconexión de red a nivel de aplicación</strong>.</p>

<p>El objetivo de este ejercicio es diseñar un procedimiento que configure un nodo como dispositivo de interconexión <em>proxy</em>, y verificar que la comunicación realmente se esté realizando a través de él.</p>

<h1>Configuración de <code>host1</code></h1>

<ul>
<li>La interfaz para la red A tiene una dirección IP estática, compatible con la interfaz en <code>hostN</code>.</li>
<li>La interfaz para la red B tiene una dirección IP compatible con la del router (se puede configurar de forma manual o automática mediante DHCP).</li>
<li>Ejecuta un servicio proxy HTTP.</li>
</ul>

<h1>Configuración de <code>hostN</code></h1>

<ul>
<li>La interfaz para la red A tiene una dirección IP estática, compatible con la interfaz en <code>host1</code>.</li>
<li>Las aplicaciones deben configurar la dirección IP de <code>host1</code> como dirección del proxy.</li>
</ul>

<h1>Verificaciones</h1>

<ul>
<li>Estado del servicio proxy</li>
<li>Proceso del servicio de proxy</li>
<li>Puerto de escucha</li>
<li>Comunicación IP habilitada en la red A</li>
<li>Comunicación IP entre <code>hostN</code> y nodos en la red B o Internet</li>
<li>En <code>hostN</code>, descarga de un recurso procedente de la red B o Internet (por ejemplo, con HTTP)</li>
<li>Logs de servicio proxy</li>
</ul>

<p><a href="./files/wb_files/sr_01_01_05_ex01/help_proxy.html">Ayuda</a></p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p></div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>2.</p></div></td><td><div class="mark_parser"><p>[proxy] Verifica que el servicio proxy se encuentra activo de tres formas diferentes.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p></div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>3.</p></div></td><td><div class="mark_parser"><p>[proxy] Verifica si es posible el intercambio de paquetes IP entre nodos de la red A, y explica el resultado observado. Esta comunicación, ¿es gracias al proxy?</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p></div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>4.</p></div></td><td><div class="mark_parser"><p>[proxy] Verifica si es posible el intercambio de paquetes IP entre un nodo de la red A y otro de la red B, y explica el resultado observado.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p></div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>5.</p></div></td><td><div class="mark_parser"><p>[proxy] Comprueba que <code>hostN</code> puede descargar páginas web con <code>wget</code>.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p></div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>6.</p></div></td><td><div class="mark_parser"><p>[proxy] Obten los logs del servicio proxy correspondientes a la descarga de una página web en el cliente.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p></div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>7.</p></div></td><td><div class="mark_parser"><p>[proxy] Explica por qué <code>hostN</code> no requiere la dirección del servidor DNS ni la dirección de la puerta de enlace.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p></div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>8.</p></div></td><td><div class="mark_parser"><p>[proxy] Indica y explica un comando para evitar que el servicio proxy se inicie durante el arranque del sistema.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p></div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>9.</p></div></td><td><div class="mark_parser"><p>[router] <strong>Interconexión de red a nivel de internet</strong>.</p>

<p>El objetivo de este ejercicio es diseñar un procedimiento que configure un nodo como dispositivo de interconexión <em>router</em>, y verificar que la comunicación realmente se esté realizando a través de él.</p>

<h1>Configuración de <code>host1</code></h1>

<ul>
<li>La interfaz para la red A tiene una dirección IP estática, compatible con la interfaz en <code>hostN</code>.</li>
<li>La interfaz para la red B tiene una dirección IP compatible con la del router (se puede configurar de forma manual o automática mediante DHCP).</li>
<li>Realiza IP forwarding (reenvío de paquetes o encaminamiento)</li>
<li>Aplica NAT en la interfaz B.</li>
</ul>

<h1>Configuración de <code>hostN</code></h1>

<ul>
<li>La interfaz para la red A tiene una dirección IP estática, compatible con la interfaz en <code>host1</code>.</li>
<li>La puerta de enlace predeterminada es <code>host1</code>.</li>
</ul>

<h1>Verificaciones</h1>

<ul>
<li>Comunicación IP habilitada en la red A</li>
<li>Comunicación IP entre <code>hostN</code> y nodos en la red B o Internet</li>
<li>En <code>hostN</code>, descarga de un recurso procedente de la red B o Internet (por ejemplo, con HTTP)</li>
<li>En <code>host1</code>, captura de paquetes desde y hacia <code>hostN</code></li>
</ul>

<p><a href="./files/wb_files/sr_01_01_05_ex09/help_ipforwarding.html">Ayuda</a></p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p></div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>10.</p></div></td><td><div class="mark_parser"><p>[router] Verifica si es posible el intercambio de paquetes IP entre nodos de la red A, y explica el resultado observado. Esta comunicación, ¿es gracias al router?</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>Desde el Host 1 con el comando <strong><em>ping -c3 192.168.6.10</em></strong> mandamos 3 paquetes <strong><em>(-c3)</em></strong> a la IP <strong>192.168.6.10</strong> que es la IP del host N.</p>

<pre><code>PING 192.168.6.10 (192.168.6.10) 56(84) bytes of data.
64 bytes from 192.168.6.10: icmp_seq=1 ttl=64 time=0.436 ms
64 bytes from 192.168.6.10: icmp_seq=2 ttl=64 time=0.262 ms
64 bytes from 192.168.6.10: icmp_seq=3 ttl=64 time=0.264 ms

--- 192.168.6.10 ping statistics ---
3 packets transmitted, 3 received, 0% packet loss, time 2048ms
rtt min/avg/max/mdev = 0.262/0.320/0.436/0.084 ms
</code></pre>

<p>Podemos observar que es posible el intercambio de paquetes entre el Host 1 al Host N.</p>

<hr />

<p>Desde el host N con el comando <strong><em>ping -c3 192.168.6.1</em></strong> mandamos 3 paquetes <strong><em>(-c3)</em></strong> a la IP <strong>192.168.6.1</strong> que es la IP del host 1.</p>

<pre><code>PING 192.168.6.1 (192.168.6.1) 56(84) bytes of data.
64 bytes from 192.168.6.1: icmp_seq=1 ttl=64 time=0.175 ms
64 bytes from 192.168.6.1: icmp_seq=2 ttl=64 time=0.262 ms
64 bytes from 192.168.6.1: icmp_seq=3 ttl=64 time=0.273 ms

--- 192.168.6.1 ping statistics ---
3 packets transmitted, 3 received, 0% packet loss, time 2054ms
rtt min/avg/max/mdev = 0.175/0.236/0.273/0.047 ms
</code></pre>

<p>Podemos observar que es posible el intercambio de paquetes entre el Host 1 al Host N.</p>

<hr />

<p>La comunicación no es gracias al router, es gracias a que estan en la misma red interna y los ordenadores se pueden ver en esta.</p>
</div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>11.</p></div></td><td><div class="mark_parser"><p>[router] Verifica si es posible el intercambio de paquetes IP entre un nodo de la red A y otro de la red B, y explica el resultado observado. Esta comunicación, ¿es gracias al router?</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>Desde el host N con el comando <strong><em>ping -c3 192.168.0.111</em></strong> mandamos 3 paquetes <strong><em>(-c3)</em></strong> a la IP <strong><em>192.168.0.111</em></strong>, esta es la IP del ordenador de mi compañero.</p>

<pre><code>PING 192.168.0.111 (192.168.0.111) 56(84) bytes of data.
64 bytes from 192.168.0.111: icmp_seq=1 ttl=63 time=0.545 ms
64 bytes from 192.168.0.111: icmp_seq=2 ttl=63 time=0.561 ms
64 bytes from 192.168.0.111: icmp_seq=3 ttl=63 time=0.807 ms

--- 192.168.0.111 ping statistics ---
3 packets transmitted, 3 received, 0% packet loss, time 2027ms
rtt min/avg/max/mdev = 0.545/0.637/0.807/0.123 ms
</code></pre>

<hr />

<p>Este intercambio de paquetes es gracias a que Host 1 hace el papel del router.</p>
</div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>12.</p></div></td><td><div class="mark_parser"><p>[router] Comprueba que <code>hostN</code> puede descargar páginas web con <code>wget</code>.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>Desde el host N con el comando <strong><em>wget wikipedia.org</em></strong> descarga una pagina web mediante http/https.</p>

<p>En este caso descargará la web de la wikipedia  <strong><em>wikipedia.org</em></strong>.</p>

<pre><code>Connecting to www.wikipedia.org (www.wikipedia.org)|91.198.174.192|:443... connected.
HTTP request sent, awaiting response... 200 OK
Length: 80979 (79K) [text/html]
Saving to: ‘index.html’

index.html          100%[===================&gt;]  79.08K  --.-KB/s    in 0.1s    

2019-10-21 11:26:03 (745 KB/s) - ‘index.html’ saved [80979/80979]

</code></pre>

<hr />

<p>Host N puede descargar paginas web con wget.</p>
</div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>13.</p></div></td><td><div class="mark_parser"><p>[router] Obtén una captura de paquetes en <code>host1</code> utilizando <code>tcpdump</code> en la que se aprecie la redirección de paquetes.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>Primero instalaremos tcpdump en el Host 1 con el comando <strong><em>sudo apt install tcpdump</em></strong>.
Después ejecutaremos el siguiente comando <strong><em>tcpdump icmp</em></strong> para capturar los paquetes icmp.</p>

<p>Haremos ping a cualquier sitio desde Host N y podremos apreciar la redirección de paquetes desde Host 1.</p>

<pre><code>11:31:51.404272 IP 192.168.0.244 &gt; dns.google: ICMP echo request, id 734, seq 2, length 64
11:31:51.417611 IP dns.google &gt; 192.168.0.244: ICMP echo reply, id 734, seq 2, length 64
11:31:52.406000 IP 192.168.0.244 &gt; dns.google: ICMP echo request, id 734, seq 3, length 64
11:31:52.419771 IP dns.google &gt; 192.168.0.244: ICMP echo reply, id 734, seq 3, length 64

</code></pre>
</div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>14.</p></div></td><td><div class="mark_parser"><p>[router] Indica un comando para deshabilitar el encaminamiento (reenvío de paquetes IP) temporalmente en el router (al reiniciar el router se debe restablece el reenvío)</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>Con el comando <strong><em>sudo echo 0 > /proc/sys/net/ipv4/ip_forward</em></strong> deshabilitamos el encaminamiento temporalmente en el router.</p>
</div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>15.</p></div></td><td><div class="mark_parser"><p>[router] ¿Cuáles son las ventajas de emplear un router como mecanismo de interconexión en comparación con un proxy? ¿Cuáles son las desventajas?</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><table>
<thead>
<tr>
  <th align="center"><strong><em>Ventajas</em></strong></th>
  <th align="center"><strong><em>Desventajas</em></strong></th>
</tr>
</thead>
<tbody>
<tr>
  <td align="center">Mayor flexibilidad</td>
  <td align="center">Menos control</td>
</tr>
<tr>
  <td align="center">Mayor seguridad</td>
  <td align="center">Menos velocidad</td>
</tr>
<tr>
  <td align="center">Buena relacion Precio/Eficiencia</td>
  <td align="center">Menos ahorro</td>
</tr>
</tbody>
</table>
</div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>16.</p></div></td><td><div class="mark_parser"><p>[router] En un entorno real, ¿cuáles son las ventajas de interconectar redes utilizando un router en lugar de un dispositivo de nivel inferior (switch o bridge)?</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>El router frente al switch o bridge tiene la ventaja de que esta en un nivel lógico superior.</p>

<p>No repite la información a cualquiera, mira a que dirección lógica tiene que mandarlo.</p>

<p>Esto aporta más seguridad y privacidad a cambio de tener una menor velocidad.</p>
</div></div>
</blockquote>
<a name="1.2"></a><p class="title_un">2. Protocolo de configuración dinámica de host (DHCP)</p>
<div class="mark_parser"><p>DHCP (Dynamic Host Configuration Protocol, protocolo de configuración dinámica de host) es un servicio que ofrece a los nodos de una red los datos necesarios para su correcta operación, tales como la dirección IP.
La finalidad es evitar configuraciones particulares y manuales en cada nodo.
DHCP está diseñado de acuerdo con el modelo cliente-servidor y funciona sobre UDP, puerto 67 del servidor.</p>

<p>El servicio DHCP puede proporcionar los siguientes parámetros de configuración de red, entre otros:</p>

<ul>
<li>dirección IP,</li>
<li>máscara de red,</li>
<li>dirección IP de la puerta de enlace,</li>
<li>direcciones IP de servicios DNS.</li>
</ul>

<p>La principal ventaja de DHCP es la automatización de la gestión de red, con el consiguiente ahorro de tiempo de administración.
Sin embargo, DHCP plantea problemas de seguridad, ya que un servicio DHCP no autorizado podría proporcionar parámetros críticos de manera maliciosa, tales como la dirección de servicio DNS o la puerta de enlace.</p>

<p>En general, existen tres mecanismos básicos para que un nodo obtenga una dirección IP válida mediante DHCP:</p>

<ul>
<li><strong>Asignación dinámica</strong>. El cliente DHCP solicita parámetros de configuración de red y el servicio DHCP los proporciona; estos parámetros pueden cambiar para un mismo nodo y distintas solicitudes.</li>
<li><strong>Asignación estática</strong>. Los parámetros de configuración de red proporcionados por el servicio DHCP son siempre los mismos para cada nodo, identificado por su dirección física o nombre.</li>
<li><strong>Asignación automática</strong>. Cuando no hay un servicio DHCP disponible, el cliente puede generar aleatoriamente una dirección IP del rango <code>169.254.0.0/16</code>, hasta que el servicio DHCP esté disponible (la presencia de un servicio DHCP debe verificarse periódicamente). Este mecanismo estándar se denomina APIPA (Automatic Private Internet Protocol Addressing, direccionamiento privado automático del protocolo de internet).</li>
</ul>

<p>Conceptos relacionados:</p>

<ul>
<li><strong>Servidor DHCP</strong>. Asigna direcciones IP y otros parámetros de configuración de red a los clientes DHCP.</li>
<li><strong>Cliente DHCP</strong>. Obtiene una dirección IP y otros parámetros de configuración de red de un servidor DHCP.</li>
<li><strong>DHCP relay agent (agente de retransmisión DHCP)</strong>. Reenvía mensajes DHCP entre un servidor DHCP y clientes DHCP en otra red; de esta manera, los clientes no tienen que estar ubicados en la misma red que el servidor DHCP para intercambiar mensajes broadcast.</li>
<li><strong>DHCP snooping device (dispositivo de inspección DHCP)</strong>. Registra los pares de direcciones IP-MAC establecidos con el intercambio de mensajes entre cliente y servidor, para evitar la suplantación maliciosa de equipos mediante alteraciones de la dirección IP; también evita la acción de servicios DHCP no autorizados.</li>
</ul>
</div>
<a name="1.2.1"></a><p class="title_sc">2.1. Formato de mensaje</p>
<blockquote><div class="mark_parser"><p><img src="./files/wb_files/sr_01_02_01/dhcp_msg.gif" alt="dhcp_msg.gif" /></p>

<p>Los campos en el mensaje DHCP se describen a continuación:</p>

<ul>
<li><em>op</em>, tipo de mensaje definido en el campo de opción (1 = SOLICITUD, 2 = RESPUESTA);</li>
<li><em>htype</em>, tipo de dirección de hardware;</li>
<li><em>hlen</em>, longitud de la dirección de hardware (este campo solo es aplicable a Ethernet y tiene una longitud fija de 6);</li>
<li><em>hops</em>, número de agentes de retransmisión que ha atravesado un mensaje de solicitud;</li>
<li><em>xid</em>, identificación de transacción, un número aleatorio elegido por el cliente para identificar un proceso de asignación de dirección IP;</li>
<li><em>secs</em>, rellenado por el cliente, el número de segundos transcurridos desde que el cliente comenzó el proceso de asignación o renovación de dirección (actualmente este campo está reservado y establecido en 0);</li>
<li><em>flags</em>, si el bit más a la izquierda (BROADCAST, B bit) está puesto a 0, el servidor DHCP envió una respuesta unicast, de lo contrario, el servidor DHCP envió una respuesta broadcast (los bits restantes de este campo están reservados para uso futuro);</li>
<li><em>ciaddr</em>, dirección IP del cliente;</li>
<li><em>yiaddr</em>, dirección IP del cliente ofrecida por el servidor;</li>
<li><em>siaddr</em>, dirección IP del servidor, del cual el cliente obtuvo parámetros de configuración;</li>
<li><em>giaddr</em>, dirección IP del primer agente de retransmisión atravesado por un mensaje de solicitud;</li>
<li><em>chaddr</em>, dirección hardware del cliente;</li>
<li><em>sname</em>, nombre del servidor, del cual el cliente obtuvo los parámetros de configuración;</li>
<li><em>file</em>, nombre del archivo de arranque e información de acceso, establecido por el servidor para el cliente;</li>
<li><em>options</em>, campo de parámetros opcionales de longitud variable, que incluye el tipo de mensaje, tiempo de alquiler, dirección IP de DNS, dirección IP de WINS, etc.</li>
</ul>
</div>
<table><tr valign="top"><td><div class="mark_parser"><p>1.</p></div></td><td><div class="mark_parser"><p><a href="https://www.isc.org/downloads/dhcp/"><strong>Cliente DHCP de ISC</strong></a>. Emplea el comando <code>dhclient</code> para liberar los parámetros de configuración asignados en una interfaz de red configurada con DHCP. Luego, ejecuta el programa con las opciones adecuadas, para solicitar y recuperar nuevamente los parámetros de configuración de la red.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>Con el comando <strong><em>sudo dhclient -r -v enp0s3</em></strong> liberamos los parámetros asignados.</p>

<pre><code>Killed old client process
Internet Systems Consortium DHCP Client 4.3.5
Copyright 2004-2016 Internet Systems Consortium.
All rights reserved.
For info, please visit https://www.isc.org/software/dhcp/

Listening on LPF/enp0s3/08:00:27:1d:19:75
Sending on   LPF/enp0s3/08:00:27:1d:19:75
Sending on   Socket/fallback
DHCPRELEASE on enp0s3 to 192.168.0.1 port 67

</code></pre>

<p>Con el comando <strong><em>sudo dhclient -v enp0s3</em></strong> recuperamos los parámetros de configuración de la red.</p>

<pre><code>Internet Systems Consortium DHCP Client 4.3.5
Copyright 2004-2016 Internet Systems Consortium.
All rights reserved.
For info, please visit https://www.isc.org/software/dhcp/

Listening on LPF/enp0s3/08:00:27:1d:19:75
Sending on   LPF/enp0s3/08:00:27:1d:19:75
Sending on   Socket/fallback
DHCPREQUEST of 192.168.0.114 on enp0s3 to 255.255.255.255 port 67
DHCPACK of 192.168.0.114 from 192.168.0.1
RTNETLINK answers: File exists
bound to 192.168.0.114 -- renewal in 1341 seconds.

</code></pre>
</div></div>
</blockquote>
<a name="1.2.2"></a><p class="title_sc">2.2. Operación</p>
<blockquote><div class="mark_parser"><h1>Asignación de dirección IP dinámica</h1>

<ol>
<li><strong>Descubrimiento</strong>. El cliente localiza servidores DHCP.</li>
<li><strong>Oferta</strong>. Uno o más servidores DHCP ofrecen parámetros de configuración tales como la dirección IP del cliente.</li>
<li><strong>Selección</strong>. El cliente selecciona una dirección IP ofrecida por uno de los servidores DHCP.</li>
<li><strong>Acuse</strong>. El servidor DHCP confirma la dirección IP ofrecida.</li>
</ol>

<p><img src="./files/wb_files/sr_01_02_02/dhcp_operation_allocation.gif" alt="dhcp_operation_allocation.gif" /></p>

<h1>Solicitud de dirección IP asignada previamente</h1>

<p>Si la dirección IP solicitada es utilizable, el servidor DHCP devuelve un mensaje de acuse, y el cliente DHCP ya puede usar dicha dirección y el resto de parámetros.</p>

<p><img src="./files/wb_files/sr_01_02_02/dhcp_operation_apply_usable.gif" alt="dhcp_operation_apply_usable.gif" />.</p>

<p>Si la dirección IP solicitada no es utilizable, el servidor DHCP devuelve un mensaje denegación, y el cliente debe iniciar el proceso de asignación de dirección IP dinámica.</p>

<p><img src="./files/wb_files/sr_01_02_02/dhcp_operation_apply_unusable.gif" alt="dhcp_operation_apply_unusable.gif" />.</p>

<h1>Actualización de alquiler de dirección IP</h1>

<ol>
<li>Transcurrido el 50% de la duración del alquiler (T1), el cliente DHCP enviará un mensaje unicast de petición para ampliar la duración del alquiler. Si la dirección IP sigue disponible el servidor DHCP devuelve un mensaje de acuse unicast confirmando que la duración del arrendamiento del cliente se ha extendido; en caso contrario, el servidor DHCP devuelve un mensaje de denegación unicast.</li>
<li>Si el cliente no recibe respuesta transcurrido el 87.5% de la duración del alquiler (T2), enviará un mensaje broadcast de petición para ampliar la duración del alquiler. El servidor DHCP gestionará la solicitud como en el caso anterior.</li>
</ol>

<p><img src="./files/wb_files/sr_01_02_02/dhcp_operation_update.gif" alt="dhcp_operation_update.gif" /></p>

<h1>DHCP relay agent</h1>

<p><img src="./files/wb_files/sr_01_02_02/dhcp_operation_relay.gif" alt="dhcp_operation_relay.gif" /></p>
</div>
<table><tr valign="top"><td><div class="mark_parser"><p>1.</p></div></td><td><div class="mark_parser"><p><a href="https://www.wireshark.org/"><strong>Wireshark</strong></a>. <a href="https://www.isc.org/downloads/dhcp/"><strong>Cliente DHCP de ISC</strong></a>. Captura los cuatro mensajes DHCP correspondientes al proceso de asignación de dirección IP dinámica.</p>

<p>Para los mensajes DHCP-REQUEST y DHCP-ACK, localiza la siguiente información:</p>

<ul>
<li>dirección IP solicitada,</li>
<li>parámetros de red solicitados,</li>
<li>valores proporcionados por el servidor para los parámetros solicitados y</li>
<li>tiempo de alquiler.</li>
</ul>

<p>Responde estas preguntas:</p>

<ul>
<li>¿Cuáles son las principales diferencias entre los mensajes capturados DHCP-DISCOVER y DHCP-REQUEST?</li>
<li>¿Cuáles son las principales diferencias entre los mensajes capturados DHCP-OFFER y DHCP-ACK?</li>
</ul>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>DHCP-REQUEST</p>

<ul>
<li><p>IP</p>

<ul>
<li>255.255.255.255</li>
</ul></li>
<li><p>Parámetros solicitados</p>

<ul>
<li>Parameter Request List Item: (1) Subnet Mask</li>
<li>Parameter Request List Item: (28) Broadcast Address</li>
<li>Parameter Request List Item: (2) Time Offset</li>
<li>Parameter Request List Item: (3) Router</li>
<li>Parameter Request List Item: (15) Domain Name</li>
<li>Parameter Request List Item: (6) Domain Name Server</li>
<li>Parameter Request List Item: (119) Domain Search</li>
<li>Parameter Request List Item: (12) Host Name</li>
<li>Parameter Request List Item: (44) NetBIOS over TCP/IP Name Server</li>
<li>Parameter Request List Item: (47) NetBIOS over TCP/IP Scope</li>
<li>Parameter Request List Item: (26) Interface MTU</li>
<li>Parameter Request List Item: (121) Classless Static Route</li>
<li>Parameter Request List Item: (42) Network Time Protocol Servers</li>
</ul></li>
<li><p>Valores proporcionados</p>

<ul>
<li>/</li>
</ul></li>
<li>Tiempo de alquiler

<ul>
<li>/</li>
</ul></li>
</ul>

<p>DCHP-ACK</p>

<ul>
<li><p>IP</p>

<ul>
<li>192.168.0.110</li>
</ul></li>
<li><p>Parámetros solicitados</p>

<ul>
<li>/</li>
</ul></li>
<li><p>Valores proporcionados</p>

<ul>
<li><p>Subnet Mask: 255.255.255.0</p></li>
<li><p>Router: 192.168.0.1</p></li>
<li><p>Domain Name Server: 192.168.0.1</p></li>
</ul></li>
<li><p>Tiempo de alquiler</p>

<ul>
<li>50 minutos</li>
</ul></li>
</ul>

<p>¿Cuáles son las principales diferencias entre los mensajes capturados DHCP-DISCOVER y DHCP-REQUEST?</p>

<ul>
<li>En el DHCP-DISCOVER no hay identificador del servidor, en el DHCP-REQUEST si.</li>
</ul>

<p>¿Cuáles son las principales diferencias entre los mensajes capturados DHCP-OFFER y DHCP-ACK?</p>

<ul>
<li>No hay diferencias relevantes entre DHCP-OFFER y DHCP-ACK.</li>
</ul>
<p>[<a href="./files/user_files/2smr/franco.larrea/sr_01_02_02_01/4paquetes.pcapng">4paquetes.pcapng</a>]</p>
</div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>2.</p></div></td><td><div class="mark_parser"><p><a href="https://www.wireshark.org/"><strong>Wireshark</strong></a>. <a href="https://www.isc.org/downloads/dhcp/"><strong>Cliente DHCP de ISC</strong></a>. Captura un mensaje DHCP-RELEASE, ¿es unicast o broadcast?</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>Es Unicast.</p>

<pre><code>  Bootp flags: 0x0000 (Unicast)
      0... .... .... .... = Broadcast flag: Unicast
</code></pre>
<p>[<a href="./files/user_files/2smr/franco.larrea/sr_01_02_02_02/release.pcapng">release.pcapng</a>]</p>
</div></div>
</blockquote>
<a name="1.2.3"></a><p class="title_sc">2.3. Práctica</p>
<blockquote><div class="mark_parser"><p><a href="./files/wb_files/sr_01_02_03/practical_simulation.pdf">Simulación de la red</a></p>

<p><a href="./files/wb_files/sr_01_02_03/practical_report.pdf">Informe</a></p>
</div>
<table><tr valign="top"><td><div class="mark_parser"><p>1.</p></div></td><td><div class="mark_parser"><p><strong>Configuración de servicio DHCP</strong></p>

<p>El objetivo de este ejercicio es diseñar un procedimiento que configure un nodo como servicio DHCP y verificar su correcto funcionamiento.
El resultado es un conjunto de nodos que obtienen parámetros de configuración de red (dirección IP, máscara, puerta de enlace, etc.) a partir del nodo que proporciona el servicio DHCP.</p>

<h1>Configuración de <code>host1</code></h1>

<ul>
<li>La interfaz para la red A tiene una dirección IP estática, compatible con la interfaz en <code>hostN</code>.</li>
<li>La interfaz para la red B tiene una dirección IP compatible con la del router (se puede configurar de forma manual o automática mediante DHCP).</li>
<li>Realiza IP forwarding (reenvío de paquetes o encaminamiento).</li>
<li>Aplica NAT en la interfaz B.</li>
<li>Ofrece una IP específica para el <code>hostN</code>, dada su dirección física o nombre de host.</li>
<li>Ofrece otras direcciones IP para los demás nodos de la red A.</li>
<li>Ofrece la dirección <code>8.8.8.8</code> como servidor DNS.</li>
<li>Ofrece su propia IP como dirección de puerta de enlace.</li>
</ul>

<h1>Configuración de <code>hostN</code></h1>

<p>El nodo obtiene los siguientes parámetros de configuración de red mediante cliente DHCP:</p>

<ul>
<li>dirección IP,</li>
<li>máscara de red,</li>
<li>dirección de la puerta de enlace,</li>
<li>nombre del servidor DNS,</li>
<li>nombre del host.</li>
</ul>

<h1>Verificaciones</h1>

<ul>
<li>Estado del servicio DHCP</li>
<li>Proceso del servicio DHCP</li>
<li>Puerto de escucha del servicio DHCP</li>
<li>Comunicación IP habilitada en la red A</li>
<li>Comunicación IP entre <code>hostN</code> y nodos en la red B o Internet</li>
<li>En <code>hostN</code>, descarga de un recurso procedente de la red B o Internet (por ejemplo, con HTTP)</li>
<li>Logs del servicio DHCP</li>
<li>Base de datos de alquileres de DHCP</li>
</ul>

<p><a href="./files/wb_files/sr_01_02_03_ex01/help_dhcp.html">Ayuda</a></p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p></div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>2.</p></div></td><td><div class="mark_parser"><p>Verifica que el servicio DHCP está funcionando de tres maneras diferentes.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>Tres formas para comprobar el servicio DHCP pueden ser las siguientes:</p>

<ul>
<li>Con el comando <strong><em>sudo ss -lupn</em></strong> comprobamos que puertos están siendo usados por dhcp.</li>
</ul>

<pre><code>State      Recv-Q Send-Q Local Address:Port               Peer Address:Port              
UNCONN     0      0           *:67                      *:*         users:(("dnsmasq",pid=529,fd=4))
</code></pre>

<ul>
<li>Con el comando <strong><em>ps -edf | grep dnsmasq</em></strong> mostramos los procesos y buscamos solo el que nos interesa.</li>
</ul>

<pre><code>dnsmasq    529     1  0 09:49 ?        00:00:00 /usr/sbin/dnsmasq -x /run/dnsmasq/dnsmasq.pid -u dnsmasq -r /run/dnsmasq/resolv.conf -7 /etc/dnsmasq.d,.dpkg-dist,.dpkg-old,.dpkg-new --local-service --trust-anchor=.,20326,8,2,e06d44b80b8f1d39a95c0b0d7c65d08458e880409bbc683457104237c7f8ec8d
</code></pre>

<ul>
<li>Con el comando <strong><em>systemctl status dnsmasq</em></strong> vemos el estado del servicio.</li>
</ul>

<pre><code>dnsmasq.service - dnsmasq - A lightweight DHCP and caching DNS server
Active: active (running) since Mon 2019-11-11 09:49:35 CET; 27min ago
</code></pre>
</div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>3.</p></div></td><td><div class="mark_parser"><p>Captura el proceso de asignación de direcciones IP accediendo a los logs del servicio.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>Con el siguiente comando podemos ver el log del sistema. Reiniciando Host N vemos el proceso de asignación de direcciones IP</p>

<p><strong><em>sudo tail -f /var/log/syslog</em></strong></p>

<pre><code>Nov 11 10:33:43 study dnsmasq-dhcp[529]: DHCPDISCOVER(enp0s8) 192.168.9.200 08:00:27:9c:e1:fa
Nov 11 10:33:43 study dnsmasq-dhcp[529]: DHCPOFFER(enp0s8) 192.168.9.200 08:00:27:9c:e1:fa
Nov 11 10:33:43 study dnsmasq-dhcp[529]: DHCPREQUEST(enp0s8) 192.168.9.200 08:00:27:9c:e1:fa
Nov 11 10:33:43 study dnsmasq-dhcp[529]: DHCPACK(enp0s8) 192.168.9.200 08:00:27:9c:e1:fa impresora
</code></pre>
</div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>4.</p></div></td><td><div class="mark_parser"><p>Localiza la base de datos de alquileres y explica el significado de cada campo.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>Con el comando <strong><em>cat /var/lib/misc/dnsmasq.leases</em></strong> vemos la base de datos de alquileres.</p>

<pre><code>1573508023 08:00:27:9c:e1:fa 192.168.9.200 impresora *
</code></pre>

<ul>
<li>1573508023 -> Tiempo en epoch.</li>
<li>08:00:27:9c:e1:fa -> Dirección MAC.</li>
<li>192.168.9.200 -> Dirección IP.</li>
<li>impresora -> Nombre de la maquina.</li>
<li>"*" -> Id del cliente.</li>
</ul>
</div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>5.</p></div></td><td><div class="mark_parser"><p>Cambia temporalmente la dirección IP de <code>hostN</code>, por una en el rango compatible no asignado por el servicio DHCP. ¿Hay comunicación? En caso afirmativo, ¿qué se podría implementar en el lado del servidor para evitarlo?</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>Desde Host N ejecutamos desde root:</p>

<ul>
<li><strong><em>ip addr del 192.168.9.200/24 dev enp0s3</em></strong> para eliminar la ip que nos ha asignado dhcp.</li>
<li><strong><em>ip addr add 192.168.9.48/24 dev enp0s3</em></strong> para añadir una ip fuera del rango dhcp.</li>
<li><strong><em>ip route add default via 192.168.9.1</em></strong> para configurar el gateway (lo eliminamos junto a la anterior ip)</li>
</ul>

<p>Hay comunicación con Host 1 pero no con el exterior.</p>

<p>Se podría implementar dispositivo de inspección DHCP para evitarlo.</p>
</div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>6.</p></div></td><td><div class="mark_parser"><p>Detén el servicio DHCP y reinicia la interfaz de red de <code>hostN</code>. ¿Cuántos mensajes envía el cliente DHCP antes de que deje de intentarlo?</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>En mi caso después de detener el servicio DHCP en host 1 y reiniciar la interfaz de red en host n podemos observar que mi cliente DHCP envía 5 mensajes hasta que deja de intentarlo.</p>

<p>Adjunto una captura de las peticiones del cliente DHCP(host n).</p>
<p>[<a href="./files/user_files/2smr/franco.larrea/sr_01_02_03_06/nmensajesdhcp.png">nmensajesdhcp.png</a>]</p>
</div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>7.</p></div></td><td><div class="mark_parser"><p>Configura el servicio DHCP para que asigne la dirección IP solo durante unos minutos. Captura los mensajes de cliente y servidor correspondientes a la actualización del alquiler.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>En el HOST 1:</p>

<p>Edito el archivo /etc/dnsmasq.conf</p>

<p>Y modifico la siguiente linea(quito 12h y pongo 2m):</p>

<ul>
<li>dhcp-range=192.168.5.50,192.168.5.150,12h</li>
</ul>

<p>Quedaria asi:</p>

<ul>
<li>dhcp-range=192.168.5.50,192.168.5.150,2m</li>
</ul>

<p>En el HOST N:</p>

<p>Reinicio la interfaz de red.</p>

<hr />

<p>La ip de host N en dos minutos debería de renovar el alquiler.</p>

<p>Como podemos ver en el log del sistema, cada dos minutos se actualiza:</p>

<pre><code>Nov 12 13:51:37 study dnsmasq-dhcp[1628]: DHCPREQUEST(enp0s8) 192.168.8.44 08:00:27:1b:e6:c6
Nov 12 13:51:37 study dnsmasq-dhcp[1628]: DHCPACK(enp0s8) 192.168.8.44 08:00:27:1b:e6:c6 aspiradora
Nov 12 13:52:23 study dnsmasq-dhcp[1628]: DHCPREQUEST(enp0s8) 192.168.8.44 08:00:27:1b:e6:c6
Nov 12 13:52:23 study dnsmasq-dhcp[1628]: DHCPACK(enp0s8) 192.168.8.44 08:00:27:1b:e6:c6 aspiradora
Nov 12 13:53:09 study dnsmasq-dhcp[1628]: DHCPREQUEST(enp0s8) 192.168.8.44 08:00:27:1b:e6:c6
Nov 12 13:53:09 study dnsmasq-dhcp[1628]: DHCPACK(enp0s8) 192.168.8.44 08:00:27:1b:e6:c6 aspiradora

</code></pre>
</div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>8.</p></div></td><td><div class="mark_parser"><p>El mensaje DHCP-DECLINE puede ser emitido por el cliente cuando descubre (por ejemplo, con ARP) que la IP asignada está siendo utilizada por otro nodo. Comprueba si la implementación del cliente DHCP instalado realmente envía DHCP-DECLINE.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>HOST N1 tiene la ip 192.168.5.142 asignada automáticamente por dhcp.</p>

<p>Vamos a configurar desde HOST 1 que asigne a un equipo Windows la misma IP para intentar sacar el DHCP-DECLINE.</p>

<p>Añadiremos la siguiente linea en el fichero dnsmasq.conf:</p>

<ul>
<li>dhcp-host=08:00:27:13:f7:bb,192.168.5.140
Con esto hemos asigando la IP 192.168.5.140 a la maquina Windows.</li>
</ul>

<p>Reiniciaremos el servicio:</p>

<ul>
<li>sudo -s</li>
<li>systemctl restart dnsmasq</li>
</ul>

<p>En HOSTN añadiremos la IP 192.168.5.140 mientras reiniciamos la maquina Windows.</p>

<p>Y veremos el log de HOST1:
 - sudo tail -f /var/log/syslog</p>

<p>Windows10 saca el DHCP-DECLINE.</p>

<pre><code>Nov 15 14:04:40 study dnsmasq-dhcp[733]: DHCPDECLINE(enp0s8) 192.168.5.140 08:00:27:13:f7:bb

</code></pre>
</div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>9.</p></div></td><td><div class="mark_parser"><p>El mensaje DHCP-INFORM puede ser emitido por el cliente para solicitar otros parámetros que no sean la dirección IP. Por ejemplo, puede ser enviado por un navegador web para descubrir la dirección del servidor proxy. Comprueba si el navegador web instalado envía DHCP-INFORM al configurar la detección automática en las opciones de proxy.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>Después de configurar el proxy en Microsoft Edge y Google Chrome en una maquina con Windows 10 y en Mozilla Firefox en una maquina con Linux Mint, podemos decir que los resultados de este ejercicio no son concluyentes.</p>

<p>No vemos ningún DHCP-INFORM en el log del sistema de HOST1.</p>
</div></div>
</blockquote>
<a name="1.3"></a><p class="title_un">3. Sistema de nombres de dominio (DNS)</p>
<div class="mark_parser"><p>DNS (Domain Name System, sistema de nombres de dominio) es una base de datos distribuida utilizada por aplicaciones TCP/IP para obtener la dirección IP correspondiente a un nombre de dominio.
DNS es un sistema de nombres jerárquico: el espacio total de nombres posibles se divide en conjuntos y subconjuntos (dominios y subdominios), lo que permite la repetición de nombres siempre que pertenezcan a diferentes conjuntos y también la distribución de la gestión del espacio de nombres.</p>

<p>Hay dos tareas principales involucradas en DNS:</p>

<ul>
<li><strong>Resolutores (<em>resolvers</em>)</strong>. Consultan a servidores para recuperar los registros asociados a un nombre.</li>
<li><strong>Servidores (<em>servers</em>)</strong>. Proporcionan los registros solicitados a los resolutores; pero para satisfacer algunas consultas pueden acceder a otros servidores, por lo que también deben implementar un resolutor.</li>
</ul>

<p>DNS funciona principalmente sobre UDP puerto 53 del servidor para atender consultas; también funciona sobre TCP puerto 53 cuando el tamaño de los datos de respuesta supera los 512 bytes, o para tareas especiales como transferencias de bases de datos.
Algunas implementaciones de resolutor utilizan TCP para todas las consultas.</p>

<p>DNS es el sistema de nombres utilizado en Internet, aunque no es el único disponible para redes TCP/IP.</p>

<h1>Espacio de nombres y sintaxis</h1>

<p>El espacio de nombres en DNS tiene una estructura arborescente. Cada elemento del árbol está etiquetado con un nombre. El comienzo del árbol se llama <strong>raíz</strong> (<em>root</em>) del DNS y tiene una etiqueta vacía (0 caracteres). La estructura de árbol contiene la siguente información:</p>

<ul>
<li><strong>Elementos hoja</strong>. Los elementos hoja corresponden a <strong>nombres de host</strong> (no debe confundirse con el <em>hostname</em> establecido en el ordenador por el sistema operativo, aunque frecuentemente coinciden).</li>
<li><strong>Elementos no hoja</strong>. Los elementos que no son hojas corresponden a <strong>dominios</strong>. Un dominio incluye todos los hijos directos e indirectos; por lo tanto, incluye tanto nombres de host como otros nombres de dominio (subdominios).</li>
</ul>

<p>El nombre de dominio completo (FQDN, Fully Qualified Domain Name) de un nodo se construye concatenando al nombre de host, la secuencia de nombres de dominio hasta alcanzar el dominio raíz, separando los nombres (de dominio o de host) por el carácter punto (<em>.</em>); como la raíz está etiquetada con una cadena vacía, todos los FQDN terminan con punto, aunque frecuentemente se omite.</p>

<p>Los hijos del elemento raíz son los dominios de primer nivel; los hijos de un elemento de primer nivel constituyen dominios de segundo nivel, y así sucesivamente.</p>

<p>Los caracteres permitidos para un nombre son un subconjunto limitado del código ASCII.
Esta limitación impide la representación de nombres en muchos idiomas que requieren códigos más amplios como Unicode.
Para hacer esto posible, se ha definido IDNA (Internationalizing Domain Names in Applications, sistema de internacionalización de nombres de dominio en aplicaciones), mediante el cual las aplicaciones de usuario, tales como los navegadores web, pueden hacer corresponder secuencias ASCII con caracteres Unicode.</p>

<h1>Zonas y delegación</h1>

<p>La estructura arborescente de DNS se subdivide en subárboles denominados zonas.
Cada zona está gestionada por un servicio que administra los nombres de dominio y de host de dicha zona, y es la autoridad para dicha zona.
Una zona DNS puede consistir en un solo dominio, o puede consistir en un dominio y varios subdominios.
La autoridad sobre una zona puede distribuirse creando una nueva zona a partir de un dominio determinado.
En este caso, se dice que la autoridad sobre la nueva zona se cede a un servidor de nombres delegado, de manera que la zona inicial deja de tener autoridad en relación a los nombres de la nueva zona.</p>

<p><img src="./files/wb_files/sr_01_03/dns_zones.png" alt="dns_zones.png" /></p>

<h1>Tipos de servicio</h1>

<p>Un servicio DNS puede ser de uno o más de los siguientes tipos:</p>

<ul>
<li><strong>Autoritativo</strong>. Gestiona una base de datos con nombres para una zona. Hay dos tipos de servidores autoritativos:

<ul>
<li><strong>Primario</strong>. Gestiona la base de datos en la que se añaden, modifican o eliminan nombres.</li>
<li><strong>Secundario</strong>. Utiliza una copia de la base de datos gestionada por un servidor primario.</li>
</ul></li>
<li><strong>Redireccionador (<em>forwarder</em>)</strong>. No gestiona base de datos, sino que reenvía las consultas a otro servidor DNS.</li>
<li><strong>Caché</strong>. Almacena un historial de resultados obtenidos en consultas anteriores, para evitar que se vuelvan a solicitar; las respuestas se mantienen en dicho historial durante un cierto tiempo de vida (TTL, Time to Live) indicado para cada resultado.</li>
</ul>

<h1>DNS Dinámico</h1>

<p>Dado que la dirección IP asociada a un nodo puede ser dinámica o cambiar con frecuencia, DNS puede proporcionar un mecanismo para actualizar automáticamente la dirección IP asociada con un nombre. Hay dos maneras de cumplir este objetivo:</p>

<ul>
<li><strong>Actualización dinámica de DNS (RFC 2136)</strong>. Especifica mensajes adicionales que se utilizan para actualizar registros DNS por parte del servicio.</li>
<li><strong>Soluciones específicas</strong>. Utilizan un cliente especial para actualizar servidores específicos (<a href="http://www.noip.com">http://www.noip.com</a>, <a href="http://dyn.com">http://dyn.com</a>, etc).</li>
</ul>

<h1>Resolución inversa</h1>

<p>La resolución inversa es un proceso mediante el cual se obtienen nombres asociados a una dirección IP dada.
Se opone al concepto de resolución directa, que se refiere al funcionamiento normal del servicio de resolución de nombres, es decir, obtener direcciones IP asociadas a nombres.</p>

<p>La resolución inversa se realiza configurando un dominio especial de primer nivel: <code>.arpa</code>.
Este dominio tiene dos subdominios de segundo nivel que engloban direcciones IP de las dos versiones: <code>.in-addr.arpa</code> se usa para IPv4 y <code>.ip6.arpa</code> se usa para IPv6.
El dominio de segundo nivel <code>.in-addr.arpa</code> define cuatro niveles de profundidad adicional, de modo que los nombres correspondientes a la dirección IP <code>w.x.y.z</code> se pueden encontrar buscando el nombre <code>z.y.x.w.in-addr.arpa</code> .
Por ejemplo, la dirección IP <code>150.214.18.5</code> corresponde al nombre <code>5.18.214.150.in-addr.arpa</code>.</p>

<h1>Dominios en Internet</h1>

<h2>Primer nivel</h2>

<p>En Internet, los subdominios del nivel raíz constituyen los llamados dominios de primer nivel (TLD, Top Leve Domains), y se clasifican en cuatro familias principales:</p>

<ul>
<li><strong>Dominios genéricos (gTLD, General Top Level Domain)</strong>. Son aquellos que tienen tres o más letras (excepto el dominio especial <code>.arpa</code> y los dominios reservados), generalmente una abreviatura orientativa del propósito de los nodos correspondientes. Por ejemplo: <code>.com</code>, <code>.org</code>, <code>.cat</code>, <code>.info</code>, etc.</li>
<li><strong>Dominios geográficos (ccTLD, Country Code Top Level Domain)</strong>. Son aquellos que tienen exactamente dos letras y se refieren a un país o grupo de países. Por ejemplo: <code>.es</code>, <code>.uk</code>, <code>.fr</code>, <code>.eu</code>, etc.</li>
<li><strong>Dominio <code>.arpa</code></strong>. Es un dominio especial utilizado para obtener el nombre de dominio asociado con una dirección IP particular, procedimiento denominado resolución inversa.</li>
<li><strong>Dominios reservados</strong>. Son nombres que no pueden aparecer en la jerarquía de DNS de Internet, pero están reservados en el sentido de que nunca se asignarán. El propósito de estos dominios es facilitar pruebas con dominios cuya inexistencia esté garantizada:

<ul>
<li><code>.test</code>, para hacer pruebas de programas que tienen que ver con DNS;</li>
<li><code>.example</code>, para indicar direcciones genéricas en documentación;</li>
<li><code>.invalid</code>, para hacer pruebas de programas con direcciones incorrectas;</li>
<li><code>.localhost</code>, para identificar la dirección de la interfaz de bucle local (<code>127.0.0.1</code>).</li>
</ul></li>
</ul>

<p>La <a href="http://icann.org">ICANN</a> (Internet Corporation for Assigned Names and Numbers) es la entidad que decide qué dominios TLD existen, a través de su comité <a href="http://iana.org">IANA</a> (Internet Assigned Numbers Authority).</p>

<h2>Segundo nivel</h2>

<p>Los usuarios de Internet (particulares y empresas) solo pueden adquirir dominios de segundo nivel.
ICANN no es directamente responsable de esta asignación, sino que delega funciones en varios actores:</p>

<ul>
<li><strong>Registro (<em>registry</em>)</strong>. Un registro de nombres de dominio es una organización que administra nombres de dominio de primer nivel; establecen las reglas para ese nombre de dominio y trabajan con los registradores para vender nombres de dominio al público general.</li>
<li><strong>Registrador (<em>registrar</em>)</strong>. El registrador es una organización acreditada que vende nombres de dominio al público.</li>
<li><strong>Registrante (<em>registrant</em>)</strong>. Un registrante es la persona o empresa que registra un nombre de dominio; los registrantes pueden administrar su configuración a través de su registrador, quien envía los cambios para actualizar el registro.</li>
</ul>

<p>La información ofrecida por el DNS puede complementarse con los servicios RDAP y WHOIS de cada registro.</p>

<h2>Tercer nivel y siguientes</h2>

<p>El usuario registrante de un dominio de segundo nivel puede gestionar su propio servicio DNS para configurar nombres de dominio de tercer nivel y siguientes.
Frecuentemente, los registradores ofrecen hosting de DNS para que sus clientes configuren dominios y subdominios en su zona.</p>
</div>
<a name="1.3.1"></a><p class="title_sc">3.1. Base de datos</p>
<blockquote><div class="mark_parser"><p>La base datos gestionada por un servidor DNS contiene una colección de registros (RR, Resource Records).
Un RR consta de:</p>

<ul>
<li><strong>Nombre de dominio</strong>. Es el dato a buscar (por ejemplo: <code>www.miempresa.com</code>, <code>5.41.214.150.in-addr.arpa</code>)</li>
<li><strong>Clase</strong>. Por lo general, siempre es IN, que significa Internet.</li>
<li><strong>Tipo</strong>. Es el tipo de RR (más sobre esto a continuación).</li>
<li><strong>TTL (Time To Live)</strong>. Indica el tiempo durante el cual el registro puede considerarse válido en una caché DNS.</li>
<li><strong>Datos</strong>. Es la información asociada al nombre buscado (por ejemplo, la dirección IP).</li>
</ul>

<p>En cuanto al tipo de registro, el estándar DNS define aproximadamente 30, pero los más importantes son:</p>

<ul>
<li><strong>SOA (Start Of Authority)</strong>. Para cada zona hay un único registro SOA e incluye la siguiente información:

<ul>
<li>nombre del servidor primario de la zona;</li>
<li>correo electrónico de la persona responsable de administrar (añadir, eliminar, actualizar nombres) la zona (en la dirección de correo, el carácter <em>@</em> se reemplaza por un punto);</li>
<li>número de secuencia, utilizado por los servidores secundarios para verificar si tienen la copia de la última versión de la zona;</li>
<li>frecuencia de actualización, que indica con qué frecuencia los servidores secundarios deben verificar las actualizaciones del servidor primario;</li>
<li>frecuencia de reintento, que indica con qué frecuencia el servidor secundario puede volver a intentar una actualización, si el servidor primario no está disponible;</li>
<li>tiempo de expiración, que indica el tiempo durante el cual un servidor secundario puede estar sin contactar al primario para buscar actualizaciones (si se excede este período, el servidor ya no se considerará servidor de la zona) y</li>
<li>TTL negativo, que indica el tiempo durante el cual se puede almacenar en caché una respuesta negativa (esto es, la que indica que el registro solicitado no existe).</li>
</ul></li>
<li><strong>A</strong>. Es la dirección IP asociada con el nombre (<code>&lt;nombre&gt; IN A &lt;dirección IP&gt;</code>).</li>
<li><strong>NS</strong>. Es el nombre de un servidor de dominio para una zona delegada (<code>&lt;nombre&gt; IN NS &lt;nombre del servidor DNS&gt;</code>).</li>
<li><strong>CNAME</strong>. Es un alias para un nombre existente (<code>&lt;alias&gt; IN CNAME &lt;nombre&gt;</code>).</li>
<li><strong>PTR</strong>. Se utiliza en el dominio <code>in-addr.arpa</code> para indicar el nombre asociado a una dirección IP (<code>&lt;IP invertida&gt; IN PTR &lt;nombre&gt;</code>).</li>
<li><strong>MX</strong>. Es el nombre de un servidor de correo responsable de recibir correo electrónico para el nombre de dominio indicado, precedido por un valor numérico correspondiente a su prioridad (<code>&lt;nombre&gt; IN MX &lt;prioridad&gt; &lt;nombre del servidor de correo&gt;</code>).</li>
</ul>

<p>Se requieren registros de pegamento (tipo A) cuando los servidores de nombres de un nombre de dominio tienen un nombre debajo del nombre de dominio.
Cuando un servidor de nombres tiene un nombre en el mismo dominio que el servidor gestiona se requiere un registro de pegamento (<em>glue record</em>) tipo A para indicar la dirección IP del servidor DNS.
Por ejemplo, si los servidores de nombres de <code>example.com</code> son <code>ns1.example.com</code> y <code>ns2.example.com</code>, las direcciones IP de esos nombres deben proporcionarse en algún registro tipo A del servidor que gestiona <code>.com</code>.</p>
</div>
<table><tr valign="top"><td><div class="mark_parser"><p>1.</p></div></td><td><div class="mark_parser"><p><a href="http://www.isc.org/software/"><strong>ISC Bind Tools</strong></a>. Ejecuta el comando <code>dig</code> para obtener el registro SOA de una zona Internet y explica los datos obtenidos en la sección de respuestas (<em>answers</em>).</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>Con el comando <strong><em>dig -t SOA iessanvicente.com</em></strong> obtenemos el registro SOA.</p>

<pre><code>;; ANSWER SECTION:
iessanvicente.com.  86398   IN  SOA iessanvicente.com. postmaster.iessanvicente.com. 2014073104 21600 3600 604800 86400

</code></pre>

<ul>
<li>nombre del servidor : iessanvicente.com.</li>
<li>correo electronico : postmaster.iessanvicente.com.</li>
<li>número de secuencia : 2014073104</li>
<li>frecuencia de actualización : 21600</li>
<li>frecuencia de reintento : 3600</li>
<li>tiempo de expiración : 604800</li>
<li>TTL negativo : 86400</li>
</ul>
</div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>2.</p></div></td><td><div class="mark_parser"><p><a href="http://www.isc.org/software/"><strong>ISC Bind Tools</strong></a>. Ejecuta el comando <code>dig</code> para averiguar cuántos servidores DNS gestionan los nombres de una zona determinada.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>Con el comando <strong><em>dig -t NS iessanvicente.com</em></strong> obtenemos cuantos servidores DNS gestionan los nombres.</p>

<p>En este caso son dos.</p>

<pre><code>;; ANSWER SECTION:
iessanvicente.com.  27379   IN  NS  ns386129.ip-176-31-241.eu.
iessanvicente.com.  27379   IN  NS  sdns2.ovh.net.
</code></pre>

<ul>
<li>nombre del servidor :  iessanvicente.com.</li>
<li>nombre de los servidores DNS :

<ul>
<li>ns386129.ip-176-31-241.eu.</li>
<li>sdns2.ovh.net.</li>
</ul></li>
</ul>
</div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>3.</p></div></td><td><div class="mark_parser"><p><a href="http://www.isc.org/software/"><strong>ISC Bind Tools</strong></a>. Ejecuta el comando <code>dig</code> para obtener la dirección IP de un nombre de dominio en Internet.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>Con el comando <strong><em>dig -t A iessanvicente.com</em></strong> obtenemos la dirección IP de un nombre de dominio en internet.</p>

<pre><code>;; ANSWER SECTION:
iessanvicente.com.  25993   IN  A   176.31.241.20
</code></pre>

<ul>
<li>nombre del servidor : iessanvicente.com.</li>
<li>dirección ip : 176.31.241.20</li>
</ul>
</div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>4.</p></div></td><td><div class="mark_parser"><p><a href="http://www.isc.org/software/"><strong>ISC Bind Tools</strong></a>. Ejecuta el comando <code>dig</code> para verificar si el servidor DNS <code>8.8.8.8</code> está disponible desde el nodo.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>Con el comando <strong><em>dig @8.8.8.8 -t A iessanvicente.com</em></strong> vemos si el servidor 8.8.8.8 esta disponible para mi maquina.</p>

<pre><code>;; ANSWER SECTION:
iessanvicente.com.  17857   IN  A   176.31.241.20
</code></pre>

<ul>
<li>nombre del servidor : iessanvicente.com.</li>
<li>dirección ip : 176.31.241.20</li>
</ul>
</div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>5.</p></div></td><td><div class="mark_parser"><p><a href="http://www.isc.org/software/"><strong>ISC Bind Tools</strong></a>. Ejecuta el comando <code>dig</code> para averiguar el servidor de correo que gestiona las direcciones de correo de un dominio dado.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>Con el comando <strong><em>dig -t MX iessanvicente.com</em></strong> averiguamos que servidor de correo electronico gestiona las direcciones de correo de un dominio dado.</p>

<pre><code>;; ANSWER SECTION:
iessanvicente.com.  3551    IN  MX  1 ASPMX.L.GOOGLE.com.
iessanvicente.com.  3551    IN  MX  5 ALT1.ASPMX.L.GOOGLE.com.
</code></pre>

<ul>
<li>nombre del servidor : iessanvicente.com.</li>
<li>nombre de los servidores de correo :

<ul>
<li>ASPMX.L.GOOGLE.com.</li>
<li>ALT1.ASPMX.L.GOOGLE.com.</li>
</ul></li>
</ul>
</div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>6.</p></div></td><td><div class="mark_parser"><p><a href="http://www.isc.org/software/"><strong>ISC Bind Tools</strong></a>. Ejecuta el comando <code>dig</code> para obtener el TTL del nombre <code>no-ip.org</code>.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>Con el comando <strong><em>dig -t A no-ip.org</em></strong> podemos obtener el TTL. (Time To Live)</p>

<pre><code>;; ANSWER SECTION:
no-ip.org.      60  IN  A   8.23.224.110

</code></pre>

<p>(&lt;nombre> &lt;<strong>TTL</strong>> IN A &lt;dirección IP>).</p>

<p>El TTL de no-ip.org es de 60 segundos.</p>
</div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>7.</p></div></td><td><div class="mark_parser"><p><a href="http://www.isc.org/software/"><strong>ISC Bind Tools</strong></a>. Ejecuta el comando <code>dig</code> para intentar la resolución inversa de una dirección IP conocida.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>Con el comando <strong><em>dig -t PTR 20.241.31.176.in-addr.arpa</em></strong> podemos hacer la resolución inversa.</p>

<p>Hay que poner la ip con el orden al revés y con ".in-addr.arpa" al final.</p>

<pre><code>;; ANSWER SECTION:
20.241.31.176.in-addr.arpa. 21393 IN    PTR iessanvicente.com.
</code></pre>

<p>Podemos ver que nos devuelve como nombre del servidor la web de nuestro instituto :</p>

<pre><code>iessanvicente.com.
</code></pre>
</div></div>
</blockquote>
<a name="1.3.2"></a><p class="title_sc">3.2. Formato de mensaje</p>
<blockquote><div class="mark_parser"><p><img src="./files/wb_files/sr_01_03_02/dns_msg.jpg" alt="dns_msg.jpg" /></p>

<p>Hay dos tipos de mensajes: de consulta (<em>query</em>) y de respuesta (<em>answer</em>).
Los dos tipos tienen el mismo formato:</p>

<ul>
<li><strong>Encabezado</strong>. Contiene los siguientes campos:

<ul>
<li><strong>Identificación</strong>. Es un identificador que se copia en el mensaje de respuesta a una consulta dada, lo que permite al resolutor reconocer las respuestas que corresponden a cada consultas enviada.</li>
<li><strong>Indicador de consulta/respuesta</strong>. Indica si el mensaje es una consulta (0) o una respuesta (1),</li>
<li><strong>Indicador de respuesta autoritativa</strong>. Se establece en el mensaje de respuesta cuando un servidor de nombres es un servidor autoritativo para el nombre consultado.</li>
<li><strong>Indicador de recursión deseada</strong>. Se establece en el mensaje de consulta cuando un resolutor desea que el servidor de nombres se encargue de resolver la totalidad del nombre.</li>
<li><strong>Indicador de recursión disponible</strong>. Se establece en el mensaje de respuesta si el servidor de nombres admite recursividad.</li>
<li><strong>"Numero de campos</strong>. Indica el número de elementos en cada una de las cuatro secciones que siguen al encabezado.</li>
</ul></li>
<li><strong>Sección de consultas</strong>. Cada elemento de esta sección incluye (1) un campo de nombre que contiene el nombre que se está consultando y (2) un campo de tipo que indica el tipo de registro a buscar.</li>
<li><strong>Sección de respuestas</strong>. Cada elemento corresponde con un registro encontrado; en cada uno figura el tipo, lo datos y el TTL.</li>
<li><strong>Sección de autoridad</strong>. Contiene registros correspondientes a los servidores autoritativos de la zona, que pueden utilizarse para continuar la búsqueda.</li>
<li><strong>Sección adicional</strong>. Contiene otros registros útiles; por ejemplo, la sección de respuestas a una consulta MX contiene el nombre de un servidor de correo, y la sección adicional puede ofrecer un registro de tipo A con la dirección IP correspondiente a dicho nombre.</li>
</ul>
</div>
<table><tr valign="top"><td><div class="mark_parser"><p>1.</p></div></td><td><div class="mark_parser"><p><a href="https://www.wireshark.org/"><strong>Wireshark</strong></a>. Captura una consulta DNS realizada por el resolutor del sistema operativo cuando se utiliza un navegador web, y captura también la respuesta correspondiente. Identifica los campos que aparecen y explica su significado.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>Este es el mensaje de consulta(query):</p>

<pre><code>5560    48.887461773    192.168.0.139   192.168.0.1 DNS 77  Standard query 0x2f68 A iessanvicente.com
</code></pre>

<p>Dentro del apartado "Domain Name System (query)" tenemos varios subapartados:</p>

<pre><code>Domain Name System (query)
    Transaction ID: 0x2f68              --&gt;Esta es la identificación que permite al resolutor reconocer las respuestas que corresponden a cada consultas.
    Flags: 0x0100 Standard query
        0... .... .... .... = Response: Message is a query          --&gt;Indica si el mensaje es una consulta o una respuesta.
        .000 0... .... .... = Opcode: Standard query (0)
        .... ..0. .... .... = Truncated: Message is not truncated
        .... ...1 .... .... = Recursion desired: Do query recursively   --&gt;Indica si se desea recursión.
        .... .... .0.. .... = Z: reserved (0)
        .... .... ...0 .... = Non-authenticated data: Unacceptable
    Questions: 1                    --&gt;Sección de consultas
    Answer RRs: 0                   --&gt;Sección de respuestas
    Authority RRs: 0                    --&gt;Sección de autoridad
    Additional RRs: 0                   --&gt;Sección adicional.
    Queries                         --&gt;Consultas:
        iessanvicente.com: type A, class IN
    [Response In: 5562]
</code></pre>

<hr />

<p>Este es el mensaje de respuesta(answer):</p>

<pre><code>5562    48.888025952    192.168.0.1 192.168.0.139   DNS 159 Standard query response 0x2f68 A iessanvicente.com A 176.31.241.20 NS ns386129.ip-176-31-241.eu NS sdns2.ovh.net
</code></pre>

<p>Dentro del apartado "Domain Name System (response)" tenemos varios subapartados:</p>

<pre><code>Domain Name System (response)
    Transaction ID: 0x2f68              --&gt;Esta es la identificación que permite al resolutor reconocer las 
    Flags: 0x8180 Standard query response, No error
        1... .... .... .... = Response: Message is a response       --&gt;Indica si el mensaje es una consulta o una 
        .000 0... .... .... = Opcode: Standard query (0)
        .... .0.. .... .... = Authoritative: Server is not an authority for domain
        .... ..0. .... .... = Truncated: Message is not truncated
        .... ...1 .... .... = Recursion desired: Do query recursively   --&gt;Indica si se desea recursión.
        .... .... 1... .... = Recursion available: Server can do recursive queries
        .... .... .0.. .... = Z: reserved (0)
        .... .... ..0. .... = Answer authenticated: Answer/authority portion was not authenticated by the server
        .... .... ...0 .... = Non-authenticated data: Unacceptable
        .... .... .... 0000 = Reply code: No error (0)
    Questions: 1                    --&gt;Sección de consultas
    Answer RRs: 1                   --&gt;Sección de respuestas
    Authority RRs: 2                    --&gt;Sección de autoridad
    Additional RRs: 0                   --&gt;Sección adicional.
    Queries                         --&gt;Consultas:
        iessanvicente.com: type A, class IN
    Answers
        iessanvicente.com: type A, class IN, addr 176.31.241.20
    Authoritative nameservers
        iessanvicente.com: type NS, class IN, ns ns386129.ip-176-31-241.eu
        iessanvicente.com: type NS, class IN, ns sdns2.ovh.net
    [Request In: 5560]
    [Time: 0.000564179 seconds]

</code></pre>
<p>[<a href="./files/user_files/2smr/franco.larrea/sr_01_03_02_01/iessanvicente.com.pcapng">iessanvicente.com.pcapng</a>]</p>
</div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>2.</p></div></td><td><div class="mark_parser"><p><a href="https://www.wireshark.org/"><strong>Wireshark</strong></a>. Captura una resolución inversa de DNS realizada por el resolutor del sistema operativo cuando se ejecuta algún comando de red tal como <code>traceroute</code> o <code>ss</code>, y captura también su respuesta correspondiente. Explica el resultado.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>Ponemos Wireshark a capturar paquetes DNS, mientras se ejecuta Wireshark en una terminal ejecutamos el comando <strong><em>traceroute 8.8.8.8</em></strong> .</p>

<p>Los paquetes DNS son ambos (consulta y respuesta) de tipo PTR.</p>

<pre><code>    Queries
        8.8.8.8.in-addr.arpa: type PTR, class IN

</code></pre>
<p>[<a href="./files/user_files/2smr/franco.larrea/sr_01_03_02_02/dnsxinversa.pcapng">dnsxinversa.pcapng</a>]</p>
</div></div>
</blockquote>
<a name="1.3.3"></a><p class="title_sc">3.3. Operación</p>
<blockquote><div class="mark_parser"><p>La operativa del DNS consiste en un único mensaje UDP para la consulta, seguido de un unico mensaje UDP para la respuesta.
Hay dos tipos de consulta: recursiva e iterativa.</p>

<h1>Consulta recursiva</h1>

<p>Cuando un resolutor A realiza una consulta recursiva a un servidor de nombres B, B devuelve a A los registros solicitados.</p>

<p><img src="./files/wb_files/sr_01_03_03/dns_operation_recursive.jpg" alt="dns_operation_recursive.jpg" /></p>

<h1>Consulta iterativa</h1>

<p>Cuando un resolutor A realiza una consulta iterativa al servidor de nombres B, si el servidor de nombres B no tiene los registros solicitados en su base de datos, devuelve a A una respuesta que contiene el siguiente servidor de nombres, C. A continuación, A envía una consulta directamente a C.</p>

<p><img src="./files/wb_files/sr_01_03_03/dns_operation_iterative.jpg" alt="dns_operation_iterative.jpg" /></p>

<p>En general, los resolutores de los sistemas operativos hacen consultas recursivas al servidor DNS configurado; a continuación, este servidor DNS realizará consultas iterativas para satisfacer la consulta original.</p>
</div>
<table><tr valign="top"><td><div class="mark_parser"><p>1.</p></div></td><td><div class="mark_parser"><p><a href="https://www.wireshark.org/"><strong>Wireshark</strong></a>. Comprueba qué tipo de consultas suele realizar el resolutor del sistema operativo capturando un ejemplo.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>El resolutor del sistema operativo realiza <strong><em>consultas recursivas.</em></strong> Ya que así lo indica el paquete dentro del subapartado "Flags".</p>

<hr />

<p>Este es el mensaje de consulta(query):</p>

<p>Dentro del apartado "Domain Name System (query)" tenemos varios subapartados.</p>

<p>En el subapartado <strong><em>Flags</em></strong> Podemos encontrar que tipo de consultas realizar el resolutos del sistema operativo.</p>

<pre><code>Domain Name System (query)

    Flags: 0x0100 Standard query
        0... .... .... .... = Response: Message is a query        .000 0... .... .... = Opcode: Standard query (0)
        .... ..0. .... .... = Truncated: Message is not truncated
        .... ...1 .... .... = Recursion desired: Do query recursively   --&gt;Indica si se desea recursión.
</code></pre>

<hr />

<p>Este es el mensaje de respuesta(answer):</p>

<p>Dentro del apartado "Domain Name System (response)" tenemos varios subapartados.</p>

<p>En el subapartado <strong><em>Flags</em></strong> Podemos encontrar que tipo de consultas realizar el resolutos del sistema operativo.</p>

<pre><code>Domain Name System (response)

    Flags: 0x8180 Standard query response, No error
        1... .... .... .... = Response: Message is a response
        .000 0... .... .... = Opcode: Standard query (0)
        .... .0.. .... .... = Authoritative: Server is not an authority for domain
        .... ..0. .... .... = Truncated: Message is not truncated
        .... ...1 .... .... = Recursion desired: Do query recursively   --&gt;Indica si se desea recursión.
</code></pre>
</div></div>
</blockquote>
<a name="1.3.4"></a><p class="title_sc">3.4. Práctica</p>
<blockquote><div class="mark_parser"><p><a href="./files/wb_files/sr_01_03_04/practical_simulation.pdf">Simulación de la red</a></p>

<p><a href="./files/wb_files/sr_01_03_04/practical_report.pdf">Informe</a></p>
</div>
<table><tr valign="top"><td><div class="mark_parser"><p>1.</p></div></td><td><div class="mark_parser"><p><strong>Configuración de servicio DNS</strong></p>

<p>El objetivo de este ejercicio es diseñar un procedimiento que configure un nodo como servicio DNS y verificar su correcto funcionamiento.
El resultado es un conjunto de nodos que pueden resolver nombres a partir del nodo que proporciona el servicio DNS.</p>

<h1>Configuración de <code>host1</code></h1>

<ul>
<li>La interfaz para la red A tiene una dirección IP estática, compatible con la interfaz en <code>hostN</code>.</li>
<li>La interfaz para la red B tiene una dirección IP compatible con la del router (se puede configurar de forma manual o automática mediante DHCP).</li>
<li>Realiza IP forwarding (reenvío de paquetes o encaminamiento).</li>
<li>Aplica NAT en la interfaz B.</li>
<li>Ofrece una IP específica para el <code>hostN</code>, dada su dirección física o nombre de host.</li>
<li>Ofrece otras direcciones IP para los demás nodos de la red A.</li>
<li>Ofrece su propia IP como dirección de servidor DNS</li>
<li>Ofrece su propia IP como dirección de puerta de enlace</li>
<li>Proporciona redirección de peticiones DNS procedentes de los nodos de la red A, hacia otro servidor DNS disponible en la red B</li>
<li>Almacena en caché las respuestas de los servidores DNS a los que redirije las peticiones.</li>
<li>En la red A, resuelve el nombre <code>hostN</code> a la IP asignada a <code>hostN</code>, y el nombre <code>host1</code> a la IP asignada a <code>host1</code>.</li>
</ul>

<h1>Configuración de <code>hostN</code></h1>

<p>El nodo obtiene los siguientes parámetros de configuración de red mediante cliente DHCP:</p>

<ul>
<li>dirección IP,</li>
<li>máscara de red,</li>
<li>dirección de la puerta de enlace,</li>
<li>nombre del servidor DNS.</li>
</ul>

<h1>Verificaciones</h1>

<ul>
<li>Estado del servicio DNS</li>
<li>Proceso de servicio DNS</li>
<li>Puerto de escucha del servicio DNS</li>
<li>Servicio DNS por defecto en <code>hostN</code></li>
<li>Resolución de nombres de Internet en <code>hostN</code></li>
<li>Resolución de nombres locales en <code>hostN</code></li>
<li>Logs del servicio DNS</li>
<li>Caché del servicio DNS</li>
</ul>

<p><a href="./files/wb_files/sr_01_03_04_ex01/help_dns.html">Ayuda</a></p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p></div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>2.</p></div></td><td><div class="mark_parser"><p>Verifica que el servicio DNS está funcionando de tres maneras diferentes.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>Tres formas para comprobar el servicio DNS pueden ser las siguientes:</p>

<ul>
<li>Con el comando <strong><em>sudo ss -ltp</em></strong> comprobamos que puertos están siendo usados por dns.</li>
</ul>

<pre><code>State      Recv-Q Send-Q Local Address:Port               Peer Address:Port              
LISTEN     0      5           *:53                      *:*                   users:(("dnsmasq",pid=514,fd=7))
LISTEN     0      128         *:22                      *:*                   users:(("sshd",pid=504,fd=3))
LISTEN     0      5          :::53                     :::*                   users:(("dnsmasq",pid=514,fd=9))
LISTEN     0      128        :::22                     :::*                   users:(("sshd",pid=504,fd=4))

</code></pre>

<ul>
<li>Con el comando <strong><em>ps -edf | grep dnsmasq</em></strong> mostramos los procesos y buscamos solo el que nos interesa.</li>
</ul>

<pre><code>dnsmasq    514     1  0 13:15 ?        00:00:00 /usr/sbin/dnsmasq -x /run/dnsmasq/dnsmasq.pid -u dnsmasq -r /run/dnsmasq/resolv.conf -7 /etc/dnsmasq.d,.dpkg-dist,.dpkg-old,.dpkg-new --local-service --trust-anchor=.,20326,8,2,e06d44b80b8f1d39a95c0b0d7c65d08458e880409bbc683457104237c7f8ec8d
student    795   677  0 13:20 pts/0    00:00:00 grep dnsmasq

</code></pre>

<ul>
<li>Con el comando <strong><em>systemctl status dnsmasq</em></strong> vemos el estado del servicio.</li>
</ul>

<pre><code>dnsmasq.service - dnsmasq - A lightweight DHCP and caching DNS server
   Loaded: loaded (/lib/systemd/system/dnsmasq.service; enabled; vendor preset: enabled)
   Active: active (running) since Wed 2019-11-27 13:15:22 CET; 6min ago
</code></pre>
</div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>3.</p></div></td><td><div class="mark_parser"><p>Verifica qué servicio DNS por defecto utiliza efectivamente el cliente.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>Con el comando <strong><em>cat /etc/resolv.conf</em></strong>.</p>

<pre><code>nameserver 192.168.7.1

</code></pre>

<p>Podemos observar que HOST 1 actua efectivamente de servidor DNS.</p>
</div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>4.</p></div></td><td><div class="mark_parser"><p>Captura una solicitud y respuesta de DNS en los logs del servicio.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>Primero tenemos que modificar el archivo <strong><em>/etc/dnsmasq.conf</em></strong>.</p>

<p>Tenemos que quitar el # de la linea donde sale "log-queries".</p>

<p>Después de reiniciar el servicio se aplicarian los cambios.</p>

<p>Esto es para que las consultas DNS queden en el log del sistema.</p>

<p>Con el comando <strong><em>sudo tail -f /var/log/syslog</em></strong> vemos el log del HOST1.
Haciendo un <strong><em>ping wikipedia.org</em></strong> desde HOSTN nos debería salir algo en el log del sistema de HOST1</p>

<p>Sale lo siguiente:</p>

<pre><code>Nov 27 13:36:44 study dnsmasq[865]: query[A] wikipedia.org from 192.168.7.100
Nov 27 13:36:44 study dnsmasq[865]: forwarded wikipedia.org to 192.168.0.1
Nov 27 13:36:44 study dnsmasq[865]: forwarded wikipedia.org to 8.8.8.8
Nov 27 13:36:44 study dnsmasq[865]: query[AAAA] wikipedia.org from 192.168.7.100
Nov 27 13:36:44 study dnsmasq[865]: forwarded wikipedia.org to 192.168.0.1
Nov 27 13:36:44 study dnsmasq[865]: forwarded wikipedia.org to 8.8.8.8
Nov 27 13:36:44 study dnsmasq[865]: reply wikipedia.org is 91.198.174.192
Nov 27 13:36:44 study dnsmasq[865]: reply wikipedia.org is 2620:0:862:ed1a::1
Nov 27 13:36:44 study dnsmasq[865]: query[PTR] 192.174.198.91.in-addr.arpa from 192.168.7.100
Nov 27 13:36:44 study dnsmasq[865]: forwarded 192.174.198.91.in-addr.arpa to 192.168.0.1
Nov 27 13:36:45 study dnsmasq[865]: reply 91.198.174.192 is text-lb.esams.wikimedia.org

</code></pre>
</div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>5.</p></div></td><td><div class="mark_parser"><p>Muestra el contenido de la caché DNS y comprueba que las solicitudes almacenadas en caché son más rápidas.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>Ejecutamos <strong><em>sudo pkill --signal SIGUSR1 dnsmasq</em></strong> para que se muestre en el log del sistema la caché.</p>

<p>Podemos observar lo siguiente del log del sistema:</p>

<pre><code>Nov 27 13:42:43 study dnsmasq[865]: Host                                     Address                        Flags      Expires
Nov 27 13:42:43 study dnsmasq[865]: ip6-loopback                   ::1                                      6F I   H
Nov 27 13:42:43 study dnsmasq[865]: ip6-allnodes                   ff02::1                                  6FRI   H
Nov 27 13:42:43 study dnsmasq[865]: text-lb.esams.wikimedia.org    91.198.174.192                           4 R        Wed Nov 27 13:50:42 2019
Nov 27 13:42:43 study dnsmasq[865]: superserver                    192.168.7.1                              4FRI   H
Nov 27 13:42:43 study dnsmasq[865]: study                          127.0.1.1                                4FRI   H
Nov 27 13:42:43 study dnsmasq[865]: ip6-allrouters                 ff02::2                                  6FRI   H
Nov 27 13:42:43 study dnsmasq[865]: workbook                       192.168.0.254                            4FRI   H
Nov 27 13:42:43 study dnsmasq[865]: ip6-localhost                  ::1                                      6F I   H
Nov 27 13:42:43 study dnsmasq[865]: &lt;Root&gt;                         20326   8   2                            SF I
Nov 27 13:42:43 study dnsmasq[865]: localhost                      ::1                                      6FRI   H
Nov 27 13:42:43 study dnsmasq[865]: localhost                      127.0.0.1                                4FRI   H
Nov 27 13:42:43 study dnsmasq[865]: wikipedia.org                  2620:0:862:ed1a::1                       6F         Wed Nov 27 13:46:44 2019
Nov 27 13:42:43 study dnsmasq[865]: wikipedia.org                  91.198.174.192                           4F         Wed Nov 27 13:46:43 2019
</code></pre>

<hr />

<pre><code>PING workbook (192.168.0.254) 56(84) bytes of data.
64 bytes from workbook (192.168.0.254): icmp_seq=1 ttl=63 time=0.872 ms
</code></pre>

<p>Haciendo <strong><em>ping workbook</em></strong> tenemos un tiempo de 0.872 ms.</p>

<pre><code>PING gmail.com (172.217.16.229) 56(84) bytes of data.
64 bytes from mad08s04-in-f5.1e100.net (172.217.16.229): icmp_seq=1 ttl=51 time=10.8 ms
</code></pre>

<p>Haciendo <strong><em>ping gmail.com</em></strong> tenemos un tiempo de 10.8 ms.</p>
</div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>6.</p></div></td><td><div class="mark_parser"><p>Comprueba si el servicio DNS configurado proporciona resolución inversa.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>Ejecutando el comando <strong><em>dig -t PTR 1.3.168.192.in-addr.arpa</em></strong>.</p>

<pre><code>;; ANSWER SECTION:
1.3.168.192.in-addr.arpa. 0 IN  PTR sol.
</code></pre>

<p>Podemos ver que si proporciona resolución inversa.</p>
</div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>7.</p></div></td><td><div class="mark_parser"><p>Explica el registro SOA proporcionado por el servicio DNS configurado, si lo hay.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>Ejecutando el comando <strong><em>dig -t SOA sol</em></strong> no nos da answer.</p>

<p>El servicio DNS que hemos configurado no es tan avanzado, no nos proporciona registro SOA.</p>
</div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>8.</p></div></td><td><div class="mark_parser"><p>¿Qué dirección IP tiene el servidor DNS al que redirije el servidor DNS configurado? Realiza una captura de datos de red que muestre dicho reenvío.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p></div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>9.</p></div></td><td><div class="mark_parser"><p>[Bind|https://www.isc.org/bind/] es la implementación de servicio DNS considerada estándar <em>de facto</em>. Es un producto de software libre y se distribuye con la mayoría de las plataformas Unix y Linux, en las que a menudo también se lo conoce como <em>named</em>. Enumera las funciones de Bind que no están disponibles en el servicio DNS configurado y explica brevemente cada una de acuerdo con la información que se puede encontrar en <a href="https://en.wikipedia.org/wiki/Comparison_of_DNS_server_software#Feature_matrix">https://en.wikipedia.org/wiki/Comparison_of_DNS_server_software#Feature_matrix</a></p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p></div></div>
</blockquote>
<p class="title_bl">Aplicaciones de red (I)</p>
<div class="mark_parser"><p>Este bloque introduce algunos servicios importantes para aplicaciones de usuario, principalmente relacionados con la transferencia de archivos.</p>
</div>
<a name="2.1"></a><p class="title_un">1. Protocolo de transferencia de archivos (FTP)</p>
<div class="mark_parser"><p>FTP (File Transfer Protocol, protocolo de transferencia de archivos) tiene los siguientes objetivos:</p>

<ul>
<li>compartir sistemas de archivo y permitir su manejo remotamente,</li>
<li>mantener la independencia entre el tipo de sistema de archivo propio del nodo cliente y del nodo servidor, y</li>
<li>realizar transferencias de datos efectivamente.</li>
</ul>

<p>Hay dos procesos involucrados en FTP:</p>

<ul>
<li><strong>Cliente</strong>. Proporciona una interfaz de usuario, lo que le permite ordenar operaciones sobre el sistema de archivos remoto (examinar la jerarquía de directorios, enviar y recibir archivos, eliminar archivos, etc.)</li>
<li><strong>Servidor</strong>. Realiza las operaciones en el sistema de archivo.</li>
</ul>

<p>FTP funciona sobre TCP, puerto 21.</p>
</div>
<a name="2.1.1"></a><p class="title_sc">1.1. Operación</p>
<blockquote><div class="mark_parser"><p>FTP utiliza dos tipos de conexión TCP entre el cliente y el servidor:</p>

<ul>
<li><strong>Conexión de control</strong>. Se utiliza para ordenar y ejecutar operaciones sobre el sistema de archivos (por ejemplo, crear un directorio) y para establecer características de las transferencias de datos (por ejemplo, seleccionar el tipo de transferencia bin/ascii). Emplea el puerto 21 en el servidor.</li>
<li><strong>Conexión de datos</strong>. Se utiliza para enviar y recibir el contenido de los archivos. Puede usar el puerto 20 (fuente) en el servidor.</li>
</ul>

<p>Los usuarios del servicio FTP pueden autenticarse con usuario y contraseña sin cifrar, pero también se permite el acceso anónimo si el servidor lo permite.</p>
</div>
<table><tr valign="top"><td><div class="mark_parser"><p>1.</p></div></td><td><div class="mark_parser"><p><a href="https://filezilla-project.org/"><strong>Filezilla</strong></a>. Realiza las siguientes operaciones empleando el cliente Filezilla contra un servidor FTP conocido. Para cada una de ellas, indica el comando equivalente en el cliente FTP estándar disponible en el sistema operativo (programa <code>ftp</code>). Ayuda: el comando <code>help</code> dentro del entorno de <code>ftp</code> muestra una lista de comandos disponibles.</p>

<ul>
<li>Inicia sesión</li>
<li>Muestra el contenido de alguna carpeta</li>
<li>Cambia la carpeta remota actual</li>
<li>Crea y sube un archivo de prueba</li>
<li>Descarga el archivo de prueba</li>
<li>Cerrar la sesión</li>
</ul>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>Estamos accediendo a speedtest.tele2.net .</p>

<hr />

<p><strong><em>Inicia sesión</em></strong></p>

<p>Comando usado:</p>

<ul>
<li>ftp speedtest.tele2.net</li>
</ul>

<pre><code>Connected to speedtest.tele2.net.
220 (vsFTPd 3.0.3)
Name (speedtest.tele2.net:alumno): anonymous
331 Please specify the password.
Password:
230 Login successful.
Remote system type is UNIX.
Using binary mode to transfer files.

</code></pre>

<p>En FileZilla introducimos el nombre del servidor ftp en "Servidor:"</p>

<hr />

<p><strong><em>Muestra el contenido de alguna carpeta</em></strong></p>

<p>Comando usado:</p>

<ul>
<li><strong><em>passive</em></strong></li>
<li><strong><em>ls upload</em></strong></li>
</ul>

<pre><code>227 Entering Passive Mode (90,130,70,73,114,180).
150 Here comes the directory listing.
-rw-------    1 105      108       1441792 Dec 03 12:46 10MB.zip
-rw-------    1 105      108      425478460 Dec 03 12:47 150914640_1575373369316_
-rw-------    1 105      108       6146494 Dec 03 12:44 1_3917603921850065380_17-9ULspeedtest.upt
-rw-------    1 105      108       4670586 Dec 03 12:40 1_583990874819968154_17-9ULspeedtest.upt
-rw-------    1 105      108          5152 Dec 03 12:43 1_September 2019
-rw-------    1 105      108        218376 Dec 03 12:47 2tvbb84ejcr08tk3cvlo5oagb3.txt
-rw-------    1 105      108        520500 Dec 03 12:45 787r0f5c4suqaih9b5cpluornm.txt
-rw-------    1 105      108        671792 Dec 03 12:39 cuo6ao0m496qi9k81hhd2lpisg.txt
-rw-------    1 105      108         41788 Dec 03 12:45 n62uot4b5742qpoo1es8h0m9ki.txt
-rw-------    1 105      108         82228 Dec 03 12:47 o8sthaoh6kt8ga8uk52vg0ucll.txt
-rw-------    1 105      108        828636 Dec 03 12:47 opvh8n4aovl8spa9om7ks6jmfg.txt
-rw-------    1 105      108         85400 Dec 03 12:46 rid643vs47i3oemp58jhl351b6.txt
-rw-------    1 105      108      697485550 Dec 03 12:47 speedtest.zip
226 Directory send OK.
</code></pre>

<p>En FileZilla hacemos clic en la carpeta que queramos.</p>

<hr />

<p><strong><em>Cambia la carpeta remota actual</em></strong></p>

<p>Comando usado:</p>

<ul>
<li><strong><em>cd upload</em></strong></li>
</ul>

<pre><code>250 Directory successfully changed.
</code></pre>

<p>En FileZilla hacemos doble clic en la carpeta que queramos.</p>

<hr />

<p><strong><em>Crea y sube un archivo de prueba</em></strong></p>

<p>Comando usado:</p>

<ul>
<li><strong><em>!echo algo > prueba.txt</em></strong></li>
<li><strong><em>put prueba.txt</em></strong></li>
</ul>

<pre><code>local: prueba.txt remote: prueba.txt
227 Entering Passive Mode (90,130,70,73,102,220).
150 Ok to send data.
226 Transfer complete.
5 bytes sent in 0.00 secs (147.9640 kB/s)
</code></pre>

<p>En FileZilla arrastramos el archivo a la carpeta que queramos.</p>

<hr />

<p><strong><em>Descarga el archivo de prueba</em></strong></p>

<p>Comando usado:</p>

<ul>
<li><strong><em>get 512KB.zip</em></strong></li>
</ul>

<pre><code>local: 512KB.zip remote: 512KB.zip
227 Entering Passive Mode (90,130,70,73,83,32).
150 Opening BINARY mode data connection for 512KB.zip (524288 bytes).
226 Transfer complete.
524288 bytes received in 0.25 secs (2.0283 MB/s)
</code></pre>

<p>En FileZilla hacemos clic derecho en archivo a descargar y hacemos clic en "Descargar".</p>

<hr />

<p><strong><em>Cerrar la sesión</em></strong></p>

<p>Comando usado:</p>

<ul>
<li><strong><em>bye</em></strong></li>
</ul>

<pre><code>221 Goodbye.
</code></pre>

<p>En FileZilla hacemos clic en "Servidor" > "Desconectar".</p>
</div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>2.</p></div></td><td><div class="mark_parser"><p><a href="https://www.wireshark.org/"><strong>Wireshark</strong></a>. Realiza las siguientes operaciones empleando el programa  <code>ftp</code>. Para cada una de ellas, captura los mensajes FTP en las conexiones de control y de datos y explica el significado de los mensajes (comandos). <a href="https://en.wikipedia.org/wiki/List_of_FTP_commands">Ayuda</a>.</p>

<ul>
<li>Inicia sesión</li>
<li>Muestra el contenido de alguna carpeta</li>
<li>Cambia la carpeta remota actual</li>
<li>Crea y sube un archivo de prueba</li>
<li>Descarga el archivo de prueba</li>
<li>Cerrar la sesión</li>
</ul>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>Estamos accediendo a speedtest.tele2.net .</p>

<hr />

<p><strong><em>Inicia sesión</em></strong></p>

<p>Comando usado:</p>

<ul>
<li>ftp speedtest.tele2.net</li>
</ul>

<p>Mensajes ftp equivalentes:</p>

<ul>
<li>USER  -->  Autenticación de nombre de usuario.</li>
<li>PASS  -->  Autenticación de contraseña.</li>
<li>SYST  -->  Devuelve el tipo del sistema.</li>
</ul>

<hr />

<p><strong><em>Muestra el contenido de alguna carpeta</em></strong></p>

<p>Comando usado:</p>

<ul>
<li><strong><em>passive</em></strong></li>
<li><strong><em>ls upload</em></strong></li>
</ul>

<p>Mensajes ftp equivalentes:</p>

<ul>
<li>PASV  -->  Entra en modo pasivo.</li>
<li>LIST  -->  Devuelve información de un archivo o directorio si se especifica; de lo contrario, se devuelve información del directorio de trabajo actual.</li>
</ul>

<hr />

<p><strong><em>Cambia la carpeta remota actual</em></strong></p>

<p>Comando usado:</p>

<ul>
<li><strong><em>cd upload</em></strong></li>
</ul>

<p>Mensajes ftp equivalentes:</p>

<ul>
<li>CWD upload  -->  Cambia el directorio de trabajo.</li>
</ul>

<hr />

<p><strong><em>Crea y sube un archivo de prueba</em></strong></p>

<p>Comando usado:</p>

<ul>
<li><strong><em>!echo algo > prueba.txt</em></strong></li>
<li><strong><em>put prueba.txt</em></strong></li>
</ul>

<p>Mensajes ftp equivalentes:</p>

<ul>
<li>STOR prueba.txt  -->  Almacena los datos en el servidor.</li>
</ul>

<hr />

<p><strong><em>Descarga el archivo de prueba</em></strong></p>

<p>Comando usado:</p>

<ul>
<li><strong><em>get 1KB.zip</em></strong></li>
</ul>

<p>Mensajes ftp equivalentes:</p>

<ul>
<li>RETR 1KB.zip  -->  Recupera una copia del archivo.</li>
</ul>

<hr />

<p><strong><em>Cerrar la sesión</em></strong></p>

<p>Comando usado:</p>

<ul>
<li><strong><em>bye</em></strong></li>
</ul>

<p>Mensajes ftp equivalentes:</p>

<ul>
<li>QUIT  -->  Desconecta.</li>
</ul>
<p>[<a href="./files/user_files/2smr/franco.larrea/sr_02_01_01_02/paquetes.pcapng">paquetes.pcapng</a>]</p>
</div></div>
</blockquote>
<a name="2.1.2"></a><p class="title_sc">1.2. Modos activo y pasivo</p>
<blockquote><div class="mark_parser"><p>El cliente siempre inicia la conexión de control y, por lo tanto, el servidor debe estar escuchando (es decir, esperando la recepción de solicitudes de conexión).
Sin embargo, la conexión de datos puede ser iniciada tanto por el cliente como por el servidor, lo que da a lugar dos modos de transferencia:</p>

<h1>Modo activo</h1>

<p>La conexión de datos es iniciada por el servidor. Para ello, el cliente debe informar primero al servidor sobre el número de puerto de destino (mayor que 1024) y después escuchar en ese puerto. Para enviar dicha información, el cliente utiliza la conexión de control (mensaje PORT). A continuación, el servidor ya puede iniciar la conexión empleando el puerto origen 20.</p>

<p><img src="./files/wb_files/sr_02_01_02/ftp_active_mode.jpg" alt="ftp_active_mode.jpg" /></p>

<h1>Modo pasivo</h1>

<p>La conexión de datos es iniciada por el cliente. Para ello, el cliente debe informar al servidor previamente de su intención de utilizar este modo de transferencia. Para enviar dicha información, el cliente utiliza la conexión de control (mensaje PASV). A continuación, el servidor debe informar al cliente sobre el número de puerto de destino (mayor que 1024) y después escuchar en ese puerto (mensaje PORT).</p>

<p><img src="./files/wb_files/sr_02_01_02/ftp_passive_mode.jpg" alt="ftp_passive_mode.jpg" /></p>
</div>
<table><tr valign="top"><td><div class="mark_parser"><p>1.</p></div></td><td><div class="mark_parser"><p><a href="https://www.wireshark.org/"><strong>Wireshark</strong></a>. Captura una transferencia de datos FTP en modo activo y otra en modo pasivo, y explica la diferencia (quien inicia la conexión, números de puerto empleados y significado de los mensajes PORT).</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>En en modo pasivo nosotros iniciamos la conexión.</p>

<p>Ejecutamos el comando <strong><em>passive</em></strong> y seguidamente hacemos un <strong><em>ls</em></strong>.</p>

<p>En el mensaje de respuesta podemos ver que nos da una lista de números, los primeros 4 son la IP y los otros dos el puerto.</p>

<p>(90,130,70,73,94,40) La IP sería 90.130.70.73 y el puerto se saca con la siguiente operación <strong><em>n x 256 + n</em></strong>.</p>

<p>El puerto sería entonces el 94 x 256 + 40 = <strong><em>24104</em></strong></p>

<pre><code>188 21.269723240    192.168.0.139   90.130.70.73    FTP 72  Request: PASV
189 21.321752271    90.130.70.73    192.168.0.139   FTP 115 Response: 227 Entering Passive Mode (90,130,70,73,94,40).
</code></pre>

<p>Dentro del paquete podemos ver más claramente la IP y el puerto :</p>

<pre><code>File Transfer Protocol (FTP)
    227 Entering Passive Mode (90,130,70,73,94,40).\r\n
        Response code: Entering Passive Mode (227)
        Response arg: Entering Passive Mode (90,130,70,73,94,40).
        Passive IP address: 90.130.70.73
        Passive port: 24104
</code></pre>

<p>En el modo activo el servidor inicia la conexión.</p>

<p>La solicitud "PORT" especifica una dirección y un puerto al que debe conectarse el servidor.</p>

<p>En este caso da error porque por alguna razón le dice al servidor que debe conectarse a nuestra IP privada, el no lo entiende porque espera una IP pública, asi que da error.</p>

<pre><code>2999    244.444117473   192.168.0.139   90.130.70.73    FTP 94  Request: PORT 192,168,0,139,222,185
3000    244.497038612   90.130.70.73    192.168.0.139   FTP 93  Response: 500 Illegal PORT command.
</code></pre>
<p>[<a href="./files/user_files/2smr/franco.larrea/sr_02_01_02_01/passiveactive.pcapng">passiveactive.pcapng</a>]</p>
</div></div>
</blockquote>
<a name="2.1.3"></a><p class="title_sc">1.3. Modos ASCII y binario</p>
<blockquote><div class="mark_parser"><p>En FTP, se establecen dos tipos de transferencia para las conexiones de datos:</p>

<ul>
<li><strong>Transferencia binaria</strong>. Los bits del archivo se transfieren sin aplicar transformación. Se puede usar para cualquier tipo de archivo.</li>
<li><strong>Transferencia ASCII</strong>. El servidor puede realizar algunas transformaciones, tal como representar el salto de línea con uno o dos caracteres de acuerdo con la convención del sistema operativo de destino. Solo debe emplearse con archivos de texto ASCII.</li>
</ul>
</div>
<table><tr valign="top"><td><div class="mark_parser"><p>1.</p></div></td><td><div class="mark_parser"><p><a href="https://www.wireshark.org/"><strong>Wireshark</strong></a>. Captura los mensajes FTP que se envían al establecer el modo de transferencia a ASCII y binario.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>Al introducir el comando <strong><em>ascii</em></strong> mandamos al servidor ftp un TYPE A.</p>

<pre><code>721 60.615951068    192.168.0.139   90.130.70.73    FTP 74  Request: TYPE A
722 60.668516435    90.130.70.73    192.168.0.139   FTP 96  Response: 200 Switching to ASCII mode.
</code></pre>

<p>Al introducir el comando <strong><em>bin</em></strong> mandamos al servidor ftp un TYPE I.</p>

<pre><code>792 66.080356346    192.168.0.139   90.130.70.73    FTP 74  Request: TYPE I
795 66.132731227    90.130.70.73    192.168.0.139   FTP 97  Response: 200 Switching to Binary mode.
</code></pre>
<p>[<a href="./files/user_files/2smr/franco.larrea/sr_02_01_03_01/asciibin.pcapng">asciibin.pcapng</a>]</p>
</div></div>
</blockquote>
<a name="2.1.4"></a><p class="title_sc">1.4. Práctica</p>
<blockquote><div class="mark_parser"><p><a href="./files/wb_files/sr_02_01_04/practical_simulation.pdf">Simulación de la red</a></p>

<p><a href="./files/wb_files/sr_02_01_04/practical_report.pdf">Informe</a></p>
</div>
<table><tr valign="top"><td><div class="mark_parser"><p>1.</p></div></td><td><div class="mark_parser"><p><strong>Configuración de servicio FTP</strong></p>

<p>El objetivo de este ejercicio es diseñar un procedimiento que configure un nodo como servicio FTP y verificar su correcto funcionamiento.
El resultado es un conjunto de nodos que pueden compartir sistemas de archivo utilizando el protocolo FTP.</p>

<h1>Configuración de <code>host1</code></h1>

<ul>
<li>La interfaz para la red A tiene una dirección IP estática, compatible con la interfaz en <code>hostN</code>.</li>
<li>La interfaz para la red B tiene una dirección IP compatible con la del router (se puede configurar de forma manual o automática mediante DHCP).</li>
<li>El nodo comparte un sistema de archivos a través de FTP con dos usuarios, configurados de la siguiente manera:

<ul>
<li>el usuario <code>user1</code> solo puede acceder (leer/escribir) a su carpeta de inicio correspondiente (no verá <code>/etc</code>, por ejemplo),</li>
<li>el usuario <code>user1</code> no puede iniciar sesión en la máquina,</li>
<li>el usuario <code>user2</code> puede acceder al sistema de archivos completo (sí verá <code>/etc</code>, por ejemplo),</li>
<li>el usuario <code>user2</code> puede iniciar sesión en la máquina y</li>
<li>el acceso anónimo a la carpeta <code>/var/pub</code> está habilitado.</li>
</ul></li>
</ul>

<h1>Configuración de <code>hostN</code></h1>

<p>El nodo puede emplear cualquier software de cliente FTP disponible: Filezilla, Notepad ++, Explorador de archivos, navegador de Internet o comando <code>ftp</code>, en cualquier sistema operativo.</p>

<h1>Verificaciones</h1>

<ul>
<li>Estado del servicio FTP</li>
<li>Proceso del servicio FTP</li>
<li>Puerto de escucha del servicio FTP</li>
<li>Logs del servicio FTP</li>
<li>Limitaciones de cada usuario</li>
<li>Modos activo y pasivo del servicio FTP</li>
</ul>

<p><a href="./files/wb_files/sr_02_01_04_ex01/help_ftp.html">Ayuda</a></p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p></div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>2.</p></div></td><td><div class="mark_parser"><p>Verifica que el servicio FTP está funcionando de tres maneras diferentes.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><ul>
<li>Con el comando sudo ss -ltp comprobamos que puertos están siendo usados por ftp.</li>
</ul>

<pre><code>State      Recv-Q Send-Q Local Address:Port                 Peer Address:Port                
LISTEN     0      128       *:ssh                     *:*                    
LISTEN     0      32       :::ftp                    :::*                    
LISTEN     0      128      :::ssh                    :::*                  
</code></pre>

<ul>
<li>Con el comando ps -edf | grep vsftpd mostramos los procesos y buscamos solo el que nos interesa.</li>
</ul>

<pre><code>root       429     1  0 14:00 ?        00:00:00 /usr/sbin/vsftpd /etc/vsftpd.conf
student    520   449  0 14:07 pts/0    00:00:00 grep vsftpd
</code></pre>

<ul>
<li>Con el comando systemctl status vsftpd vemos el estado del servicio.</li>
</ul>

<pre><code>● vsftpd.service - vsftpd FTP server
   Loaded: loaded (/lib/systemd/system/vsftpd.service; enabled; vendor preset:
 enabled)
   Active: active (running) since Fri 2019-12-13 14:00:11 CET; 8min ago
</code></pre>
</div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>3.</p></div></td><td><div class="mark_parser"><p>Comprueba si la transferencia de datos funciona en modo activo y pasivo.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>La transferencia de datos funciona tanto en activo como en pasivo.</p>

<p>Las transferencias se completan correctamente.</p>

<p><strong>ACTIVO</strong></p>

<pre><code>ftp&gt; put algo.txt
local: algo.txt remote: algo.txt
200 PORT command successful. Consider using PASV.
150 Ok to send data.
226 Transfer complete.
5 bytes sent in 0.00 secs (348.7723 kB/s)
</code></pre>

<p><strong>PASIVO</strong></p>

<pre><code>ftp&gt; passive
Passive mode on.
ftp&gt; put algo.txt 
local: algo.txt remote: algo.txt
227 Entering Passive Mode (192,168,0,244,93,186).
150 Ok to send data.
226 Transfer complete.
5 bytes sent in 0.00 secs (221.9460 kB/s)
</code></pre>
</div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>4.</p></div></td><td><div class="mark_parser"><p>Obtén los mensajes de log correspondientes a una sesión FTP.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>He iniciado sesión con user2 mediante ftp y la he cerrado.</p>

<pre><code>Mon Dec 16 10:20:30 2019 [pid 577] CONNECT: Client "::ffff:192.168.0.139"
Mon Dec 16 10:20:35 2019 [pid 576] [user2] OK LOGIN: Client "::ffff:192.168.0.139"
</code></pre>
</div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>5.</p></div></td><td><div class="mark_parser"><p>Averigua los parámetros que hay que establecer en <code>/etc/vsftpd.conf</code> para configurar las siguientes características (ayuda: <code>man vsftpd.conf</code>):</p>

<ul>
<li>mensaje de bienvenida,</li>
<li><em>timeout</em> de sesión inactiva,</li>
<li>velocidad máxima de transferencia de datos para usuarios anónimos y</li>
<li>número máximo de clientes simultáneos</li>
</ul>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>Para el configurar <strong>mensaje de bienvenida</strong> añadiremos al fichero /etc/vsftd.conf la linea:</p>

<ul>
<li>ftpd_banner=Bienvenido al servicio FTP de fmol.</li>
</ul>

<p>Para configurar el <strong>timeout de sesión inactiva</strong> añadiremos al fichero /etc/vsftd.conf la linea:</p>

<p>(En segundos)</p>

<ul>
<li>idle_session_timeout=200</li>
</ul>

<p>Para cambiar <strong>velocidad máxima de transferencia de datos para usuarios anónimos</strong> añadiremos al fichero /etc/vsftd.conf la linea:</p>

<p>(En bytes por segundo)</p>

<ul>
<li>anon_max_rate=0 (Si ponemos el valor en cero es lo mismo que ilimitado.)</li>
</ul>

<p>Para configurar el <strong>número máximo de clientes simultáneos</strong> añadiremos al fichero /etc/vsftd.conf la linea:</p>

<ul>
<li>max_clients=0 (Si ponemos el valor en cero es lo mismo que ilimitado.)</li>
</ul>
</div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>6.</p></div></td><td><div class="mark_parser"><p>Una debilidad conocida del protocolo FTP es que toda la información se transfiere en texto claro. Actualmente, se han propuesto dos soluciones principales para este problema: FTPS y SFTP. Explica brevemente el principio básico de cada uno de estos protocolos (ayuda: <a href="https://es.wikipedia.org/wiki/FTPS">FTPS</a> y <a href="https://es.wikipedia.org/wiki/SSH_File_Transfer_Protocol">SFTP</a>). Prueba los protocolos empleando Filezilla o el comando <code>sftp</code>.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p><strong>FTPS</strong>:</p>

<ul>
<li>Es el FTP de siempre pero sobre una capa adicional SSL.</li>
</ul>

<p><strong>SFTP</strong>:</p>

<ul>
<li>El nombre se parece al FTP pero es una cosa completamente distinta a este. Este protocolo usa SSH para transferir ficheros.</li>
</ul>

<p>El SFTP funciona con el protocolo SSH:</p>

<pre><code>alumno@I103-02:~$ sftp student@192.168.0.244
student@192.168.0.244's password: 
Connected to 192.168.0.244.
sftp&gt; ls
index.html   setup.sh     
sftp&gt; get setup.sh 
Fetching /home/student/setup.sh to setup.sh
/home/student/setup.sh                        100%  994    53.3KB/s   00:00    
sftp&gt; !ls
Descargas   Escritorio  Música      pt       setup.sh
Documentos  Imágenes    Plantillas  Público  Vídeos
sftp&gt; bye
alumno@I103-02:~$ cat
</code></pre>
</div></div>
</blockquote>
<a name="2.2"></a><p class="title_un">2. Protocolo de transferencia de hipertexto (HTTP)</p>
<div class="mark_parser"><p>HTTP (HyperText Transfer Protocol, protocolo de transferencia de hipertexto) tiene como objetivo transferir contenido (información valiosa para el usuario) entre dos nodos.</p>

<p>Hay dos procesos involucrados en HTTP:</p>

<ul>
<li><strong>Cliente</strong>. Proporciona una interfaz de usuario, generalmente un navegador, que permite al usuario obtener y representar correctamente el contenido.</li>
<li><strong>Servidor</strong>. Extrae y proporciona al cliente el contenido procedente de bases de datos, sistemas de archivo, dispositivos u otras fuentes.</li>
</ul>

<p>HTTP funciona sobre TCP, puerto 80 y, alternativamente, puerto 8080.</p>

<p>El contenido se puede codificar en una gran variedad de formatos, algunos de los cuales integran texto, audio, vídeo y otros.
Sin embargo, el protocolo HTTP es independiente de la codificación del contenido (PDF, HTML, XML, ASCII, JPEG, MP3, etc.).
La representación adecuada del contenido en el lado del cliente depende de las capacidades del software del cliente; por ejemplo, el navegador puede incluir un complemento para representar correctamente el contenido PDF.
En cualquier caso, generalmente el navegador permite como mínimo guardar el contenido obtenido en un archivo.</p>

<h1>Lenguaje de marcas hipertexto (HTML, Hypertext Markup Language) y la Web</h1>

<p>Uno de los formatos más relevantes empleados para codificar contenido es HTML.
HTML y sus estándares relacionados (CSS, Javascript, etc.) permiten diseñar contenido mediante la especificación de la estructura y apariencia de la información.</p>

<p>Además, HTML permite codificar los llamados hipervínculos (de hecho, hipertexto significa texto con hipervínculos), que son referencias a otro contenido que el usuario puede obtener y representar haciendo clic, tocando la pantalla o pasando el puntero del ratón por encima.
Para ello, se emplea un protocolo (generalmente HTTP o HTTPS, aunque hay otras posibilidades).</p>

<p>Todo el contenido en Internet relacionado a través de hipervínculos constituye una gran red de contenidos que se conoce comúnmente con el nombre de WWW (World Wide Web) o simplemente la Web.
Cada elemento de contenido en HTML vinculado a la Web, se denomina página web.
Un conjunto de páginas con un proposito específico se denomina sitio web.</p>

<h1>Localizador uniforme de recursos (URL, Uniform Resource Locator)</h1>

<p>Una URL o dirección web es un texto que indica como acceder a una página web y obtener su contenido.
La URL puede indicar la siguiente información: nombre del esquema (protocolo), nombre del host (o dirección IP), número de puerto, nombre de usuario, contraseña, ruta, consulta (parámetros) y fragmento (parte o sección del contenido).
La sintaxis estándar de una URL es:</p>

<p><code>esquema:[//[usuario:contraseña@]host[:puerto]][/]ruta[?consulta][#fragmento]</code></p>

<p>Las URL se utilizan en hipervínculos y también como datos de entrada para navegadores y otros clientes HTTP.
El contenido indicado por una URL puede ubicarse en un archivo del servidor, pero también puede ser el resultado de un programa ejecutado por el servidor durante la obtención del contenido.</p>

<h1>Extensiones multipropósito de correo de Internet (MIME, Multipurpose Internet Mail Extensions)</h1>

<p>Para que sea útil, el contenido debe mostrarse correctamente en el lado del cliente.
Dicho de otra forma, el contenido debe procesarse en el cliente para que pueda ser percibido por el usuario.
En general, los navegadores están especializados en mostrar HTML, pero también pueden iniciar otras aplicaciones disponibles para mostrar otros tipos de contenido (PDF, formatos de documentos, audio, video, etc.).
Para que el navegador pueda realizar el tipo de procesamiento que corresponda, el tipo de contenido debe especificarse en la transferencia HTTP.
Para este propósito, se utiliza parte del llamado estándar MIME.</p>

<p>El estándar MIME se estableció inicialmente para archivos adjuntos de correo electrónico, pero su definición de tipos se ha generalizado a HTTP y otras aplicaciones.
El estándar MIME permite indicar un tipo y subtipo estándar (tipos MIME o <em>Media Types</em>). Por ejemplo:</p>

<ul>
<li>texto/html, contenido en formato HTML;</li>
<li>video/mpeg, video producido en formato MPEG;</li>
<li>image/*, imagen en cualquier formato (GIF, JPEG, PNG, BMP, etc.).</li>
</ul>

<p>La lista completa es mantenida y controlada por la IANA (Internet Assigned Numbers Authority), que ha definido también un procedimiento de registro de nuevos tipos. Esta lista se puede encontrar en <a href="https://www.iana.org/assignments/media-types/media-types.xhtml">https://www.iana.org/assignments/media-types/media-types.xhtml</a>.</p>
</div>
<a name="2.2.1"></a><p class="title_sc">2.1. Operación y formato de mensaje</p>
<blockquote><div class="mark_parser"><h1>Operación</h1>

<p>En una conexión HTTP 1.0, solo se intercambian dos mensajes: el cliente inicia la conexión y envía una solicitud; a continuación el servidor devuelve una respuesta (la respuesta puede incluir el recurso solicitado, un mensaje de error u otra información); finalmente, cliente y servidor cierran la conexión.</p>

<h1>Formato del mensaje</h1>

<p>Cliente y servidor se comunican mediante mensajes de texto sin formato (ASCII).
El cliente envía solicitudes (<em>requests</em>) al servidor y el servidor envía las respuestas (<em>responses</em>) correspondientes.</p>

<h2>Mensaje de solicitud</h2>

<p>El mensaje de solicitud consta de:</p>

<ul>
<li>una línea de solicitud (por ejemplo, <code>GET /images/logo.png HTTP/1.1</code>),</li>
<li>cabeceras de solicitud (por ejemplo, <code>Accept-Language: en</code>),</li>
<li>una línea en blanco y</li>
<li>un cuerpo de mensaje opcional.</li>
</ul>

<h2>Mensaje de respuesta</h2>

<p>El mensaje de respuesta consta de:</p>

<ul>
<li>una línea de estado que incluye el código de estado y descripción (por ejemplo, <code>HTTP/1.1 200 OK</code>),</li>
<li>cabeceras de respuesta (por ejemplo, <code>Content-Type: texto/html</code>),</li>
<li>una línea en blanco y</li>
<li>un cuerpo de mensaje opcional.</li>
</ul>

<h2>Métodos de solicitud</h2>

<p>HTTP define varias operaciones o métodos para indicar el procesamiento que se realizará sobre el recurso especificado.
Los métodos más comunes son los siguientes:</p>

<ul>
<li><strong>GET</strong>. El método GET solicita la obtención del recurso especificado; las solicitudes GET solo deberían recuperar datos y no deberían tener otro efecto.</li>
<li><strong>POST</strong>. El método POST permite el envío de datos para que sean incorporados al recurso especificado; los datos publicados (<em>POSTed</em>) pueden proceder, por ejemplo, de un formulario HTML.</li>
<li><strong>HEAD</strong>. El método HEAD solicita una respuesta idéntica a la de una solicitud GET, pero omitiendo el cuerpo de la respuesta; esto es útil para obtener metadatos disponibles en encabezados de respuesta evitando transferir todo el contenido.</li>
</ul>

<h1>Mejoras de operación en HTTP 1.1</h1>

<h2><em>Keep-alive</em></h2>

<p>Permite utilizar una conexión para más de una solicitud y respuesta.
Para ello, las conexiones se mantienen abiertas durante un tiempo después de transferir la respuesta.
El mecanismo reduce perceptiblemente la latencia de la comunicación, porque el cliente no necesita renegociar la conexión TCP (<em>handshake</em>) una vez enviada la primera solicitud.</p>

<p><img src="./files/wb_files/sr_02_02_01/http_keep-alive.png" alt="http_keep-alive.png" /></p>

<h2><em>Pipelining</em></h2>

<p>Permite a los clientes enviar múltiples solicitudes sin esperar la recepción de cada respuesta.
De esta forma, el tiempo de carga puede mejorar especialmente en medios de transmisión de alta latencia, como las transmisiones vía satélite.</p>

<p><img src="./files/wb_files/sr_02_02_01/http_pipelining.png" alt="http_pipelining.png" /></p>

<h2><em>Chunked transfer encoding</em></h2>

<p>Se puede usar en conexiones <em>keep-alive</em> cuando el servidor desconoce la longitud total del contenido a enviar, y por tanto, no lo puede indicar al comienzo de la respuesta (el cliente requiere esta información para saber cuándo ha finalizado la respuesta)
En este modo, el servidor divide el flujo de datos en fragmentos independientes de tamaño conocido, y cada uno se envía precedido por su longitud correspondiente.</p>

<p><img src="./files/wb_files/sr_02_02_01/http_chuncked.png" alt="http_chuncked.png" /></p>

<h2><em>Byte-serving</em></h2>

<p>El servidor transmite solo la parte de un recurso solicitada explícitamente por el cliente.
Por ejemplo, el cliente puede hacer uso de este modo en los casos en que un archivo grande se haya entregado solo parcialmente y se necesite una porción del archivo.
Se trata, por lo tanto, de un método de optimización del ancho de banda.</p>

<h1><em>Cookies</em></h1>

<p>Una <em>cookie</em> HTTP es un dato identificativo establecido por el servidor en la respuesta y almacenado por el cliente en el nodo.
El cliente envía estos datos al servidor correspondiente en solicitudes posteriores, por lo que el servidor puede agrupar una colección de solicitudes independientes como pertenecientes al mismo usuario.</p>

<p>Las cookies constituyen la base de múltiples aplicaciones actuales: productos añadidos al carrito de la compra en tiendas online, seguimiento de la actividad de navegación del usuario o establecimiento de sesiones, entre muchas otras.</p>

<h1>Autenticación</h1>

<p>HTTP proporciona varios esquemas de autenticación.
El enfoque más simple es la llamada autenticación básica.</p>

<p><img src="./files/wb_files/sr_02_02_01/http_basic_auth.gif" alt="http_basic_auth.gif" /></p>
</div>
<table><tr valign="top"><td><div class="mark_parser"><p>1.</p></div></td><td><div class="mark_parser"><p><a href="https://www.wireshark.org/"><strong>Wireshark</strong></a>. <a href="https://www.gnu.org/software/wget/"><strong>Wget</strong></a>. Captura una conexión HTTP completa que descargue una página HTML sencilla. Deben obtenerse los siguientes mensajes:</p>

<ul>
<li>establecimiento de conexión TCP,</li>
<li>solicitud HTTP</li>
<li>respuesta HTTP y</li>
<li>cierre de conexión TCP de cierre.</li>
</ul>

<p>Utiliza Wget como cliente, para evitar conexiones <em>keep-alive</em>.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>He hecho wget a http://fmolsite.online/ y he analizado el tráfico con Wireshark.</p>

<p>Hay tres paquetes para establecer la conexión, un paquete de solicitud HTTP, otro paquete de respuesta HTTP y tres paquetes para finalizar la conexión.</p>

<ul>
<li>TCP connection establishment</li>
</ul>

<pre><code>17  3.571760118 192.168.0.139   87.98.230.241   TCP 74  52790 → 80 [SYN] Seq=0 Win=29200 Len=0 MSS=1460 SACK_PERM=1 TSval=866429 TSecr=0 WS=128
18  3.583799835 87.98.230.241   192.168.0.139   TCP 74  80 → 52790 [SYN, ACK] Seq=0 Ack=1 Win=28960 Len=0 MSS=1460 SACK_PERM=1 TSval=26063009 TSecr=866429 WS=128
19  3.583825058 192.168.0.139   87.98.230.241   TCP 66  52790 → 80 [ACK] Seq=1 Ack=1 Win=29312 Len=0 TSval=866432 TSecr=26063009
</code></pre>

<ul>
<li>Request HTTP</li>
</ul>

<pre><code>20  3.583875890 192.168.0.139   87.98.230.241   HTTP    206 GET / HTTP/1.1 

Hypertext Transfer Protocol
    GET / HTTP/1.1\r\n
    User-Agent: Wget/1.18 (linux-gnu)\r\n     ---&gt; Con qué se ha establecido la conexión
    Accept: */*\r\n
    Accept-Encoding: identity\r\n
    Host: fmolsite.online\r\n                   ---&gt; Donde se establece la conexión
</code></pre>

<ul>
<li>Response HTTP</li>
</ul>

<pre><code>26  3.651539228 87.98.230.241   192.168.0.139   HTTP    2207    HTTP/1.1 200 OK  (text/html)

Hypertext Transfer Protocol
    HTTP/1.1 200 OK\r\n
    Date: Wed, 08 Jan 2020 12:23:39 GMT\r\n             ---&gt; Fecha del servidor
    Content-Type: text/html\r\n
    Content-Length: 3589\r\n
    Server: Apache\r\n                                 ---&gt; Servidor usado
</code></pre>

<ul>
<li>TCP connection closure</li>
</ul>

<pre><code>28  3.651894572 192.168.0.139   87.98.230.241   TCP 66  52790 → 80 [FIN, ACK] Seq=141 Ack=3990 Win=37504 Len=0 TSval=866449 TSecr=26063029
29  3.652432030 87.98.230.241   192.168.0.139   TCP 66  80 → 52790 [FIN, ACK] Seq=3990 Ack=142 Win=30080 Len=0 TSval=26063030 TSecr=866449
30  3.652442325 192.168.0.139   87.98.230.241   TCP 66  52790 → 80 [ACK] Seq=142 Ack=3991 Win=37504 Len=0 TSval=866449 TSecr=26063030
</code></pre>

<p>El cuerpo de la respuesta contiene todo el codigo html de la pagina.</p>
<p>[<a href="./files/user_files/2smr/franco.larrea/sr_02_02_01_01/wget1.pcapng">wget1.pcapng</a>]</p>
</div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>2.</p></div></td><td><div class="mark_parser"><p><a href="https://github.com/Nitrama/HTTP-Header-Live/"><strong>HTTP Header Live</strong></a>. <a href="https://www.mozilla.org/en-EN/firefox/new/"><strong>Firefox</strong></a>. Emplea HTTP Header Live (complemento de Firefox) para capturar las cabeceras de solicitud y respuesta en una conexión HTTP (descarga una página sencilla). Explica el significado de cada una (<a href="https://es.wikipedia.org/wiki/Anexo:Cabeceras_HTTP">ayuda</a>).</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><pre><code>GET:

Host: fmolsite.online --&gt; 
 - El nombre de dominio o dirección IP.

User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:68.0) Gecko/20100101 Firefox/68.0 --&gt;
 - Contiene la información de la petición, como el navegador, el sistema operativo, etc.

Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8 --&gt; 
 - Tipos de contenido que se aceptan.

Accept-Language: es-ES,es;q=0.8,en-US;q=0.5,en;q=0.3 --&gt;  
 - Idiomas que se aceptan.

Accept-Encoding: gzip, deflate --&gt; 
 - Lista de codificaciones que se aceptan.

Referer: http://fmolsite.online/ --&gt; 
 - Indica la dirección URL de donde proviene.

DNT: 1

Connection: keep-alive --&gt; 
 - Se controla el tipo de conexión. 

Cookie: SERVERID17573=2120114|Xhhx0|XhhtG

Upgrade-Insecure-Requests: 1


HTTP/1.1 200 OK

Date: Fri, 10 Jan 2020 12:45:08 GMT --&gt;  
 - La fecha y la hora de la petición en el servidor.

Content-Type: text/html --&gt; 
 - El tipo de contenido de la petición.

Content-Length: 1294 --&gt; 
 - El tamaño del contenido de la petición en bytes.

Server: Apache --&gt; 
 - Datos del servidor al que te conectas.

Accept-Ranges: bytes

Vary: Accept-Encoding

Content-Encoding: gzip

Set-Cookie: SERVERID17573=2120114|Xhhx1|XhhtG; path=/

Cache-Control: private --&gt; 
 - Controla las políticas de caché.

Connection: keep-alive --&gt; 
 - Tipo de conexión.
</code></pre>
</div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>3.</p></div></td><td><div class="mark_parser"><p><a href="https://github.com/Nitrama/HTTP-Header-Live/"><strong>HTTP Header Live</strong></a>. <a href="https://www.mozilla.org/en-EN/firefox/new/"><strong>Firefox</strong></a>. Selecciona un sitio web que utilice cookies. Captura las cabeceras HTTP correspondientes al mecanismo de cookies, busca donde se ubican en la configuración del navegador y comprueba que coinciden.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>Primero limpiaremos las cookies de nuestro navegador.
Para ello iremos a "Preferencias > Privacidad &amp; Seguridad >Cookies y datos del sitio > Limpiar datos..."</p>

<p>Nos loguearemos con nuestro usuario en el Workbook. Y analizaremos las cookies</p>

<p>Cabecera de "Set-Cookie" obtenida con HTTP Header Live:</p>

<pre><code>Set-Cookie: franco_larrea_id=aclp3fpiuumfj1lp6so4mioeb1; path=/
</code></pre>

<p>Cookies analizadas con Cookie Quick Manager:</p>

<pre><code>franco_larrea_id:aclp3fpiuumfj1lp6so4mioeb1
</code></pre>
</div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>4.</p></div></td><td><div class="mark_parser"><p><a href="https://github.com/Nitrama/HTTP-Header-Live/"><strong>HTTP Header Live</strong></a>. <a href="https://www.mozilla.org/en-EN/firefox/new/"><strong>Firefox</strong></a>. Busca una página web protegida con autenticación básica HTTP. Intenta acceder al recurso protegido introduciendo un nombre de usuario y contraseña. Captura los encabezados relevantes y explica el proceso de autenticación.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>Intentando acceder al recurso protegido http://jigsaw.w3.org/HTTP/Basic/</p>

<pre><code>http://jigsaw.w3.org/HTTP/Basic/
</code></pre>

<hr />

<p>Nos responde con un error 401 y una autenticación.</p>

<pre><code>GET: HTTP/1.1 401 Unauthorized

WWW-Authenticate: Basic realm="test"

</code></pre>

<hr />

<p>Nos autenticamos correctamente en la pagina con el USUARIO="guest" CONTRASEÑA="guest".</p>

<pre><code>http://jigsaw.w3.org/HTTP/Basic/

</code></pre>

<hr />

<p>Nos responde con la contraseña codificada.</p>

<pre><code><br />Authorization: Basic Z3Vlc3Q6Z3Vlc3Q=

GET: HTTP/1.1 200 OK


</code></pre>
</div></div>
</blockquote>
<a name="2.2.2"></a><p class="title_sc">2.2. Práctica</p>
<blockquote><div class="mark_parser"><p><a href="./files/wb_files/sr_02_02_02/practical_simulation.pdf">Simulación de la red</a></p>

<p><a href="./files/wb_files/sr_02_02_02/practical_report.pdf">Informe</a></p>
</div>
<table><tr valign="top"><td><div class="mark_parser"><p>1.</p></div></td><td><div class="mark_parser"><p><strong>Configuración de servicio HTTP</strong></p>

<p>El objetivo de este ejercicio es diseñar un procedimiento que configure un nodo como servicio HTTP y verificar su correcto funcionamiento.
El resultado es un conjunto de nodos que pueden compartir contenido utilizando el protocolo HTTP.</p>

<h1>Configuración de <code>host1</code></h1>

<ul>
<li>La interfaz para la red A tiene una dirección IP estática, compatible con la interfaz en <code>hostN</code>.</li>
<li>La interfaz para la red B tiene una dirección IP compatible con la del router (se puede configurar de forma manual o automática mediante DHCP).</li>
<li>El nodo aloja un sistema de archivos con dos archivos: un archivo HTML y un archivo PDF. Los archivos se comparten a través de HTTP con las siguientes limitaciones:

<ul>
<li>el archivo HTML está disponible públicamente y</li>
<li>el archivo PDF está protegido con usuario y contraseña.</li>
</ul></li>
</ul>

<h1>Configuración de <code>hostN</code></h1>

<p>El nodo puede emplear cualquier software de cliente HTTP disponible: Firefox, Chrome o el comando <code>wget</code>, en cualquier sistema operativo.</p>

<h1>Verificaciones</h1>

<ul>
<li>Estado del servicio HTTP</li>
<li>Proceso del servicio HTTP</li>
<li>Puerto de escucha del servicio HTTP</li>
<li>Logs del servicio HTTP</li>
<li>Limitaciones de acceso a cada fichero</li>
</ul>

<p><a href="./files/wb_files/sr_02_02_02_ex01/help_http.html">Ayuda</a></p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p></div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>2.</p></div></td><td><div class="mark_parser"><p>Verifica que el servicio HTTP esté en funcionamiento de tres maneras diferentes.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><ul>
<li>Con el comando sudo ss -ltp comprobamos que puertos están siendo usados por http</li>
</ul>

<pre><code>LISTEN     0      128       *:ssh                     *:*                    
LISTEN     0      128       *:http                    *:*                    
LISTEN     0      128      :::ssh                    :::*
</code></pre>

<ul>
<li>Con el comando ps -edf | grep apache2 mostramos los procesos y buscamos solo el que nos interesa.</li>
</ul>

<pre><code>root       446     1  0 13:29 ?        00:00:00 /usr/sbin/apache2 -k start
www-data   699   446  0 13:34 ?        00:00:00 /usr/sbin/apache2 -k start
www-data   700   446  0 13:34 ?        00:00:00 /usr/sbin/apache2 -k start
</code></pre>

<ul>
<li>Con el comando systemctl status apache2 vemos el estado del servicio.</li>
</ul>

<pre><code>● apache2.service - The Apache HTTP Server
   Loaded: loaded (/lib/systemd/system/apache2.service; enabled; vendor preset
: enabled)
   Active: active (running) since Fri 2020-01-17 13:29:43 CET; 11mi
n ago
  Process: 695 ExecReload=/usr/sbin/apachectl graceful (code=exited, status=0/
SUCCESS)
  Process: 419 ExecStart=/usr/sbin/apachectl start (code=exited, status=0/SUCC
ESS)
 Main PID: 446 (apache2)
    Tasks: 55 (limit: 4915)
   CGroup: /system.slice/apache2.service
           ├─446 /usr/sbin/apache2 -k start
           ├─699 /usr/sbin/apache2 -k start
           └─700 /usr/sbin/apache2 -k start
</code></pre>
</div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>3.</p></div></td><td><div class="mark_parser"><p>Obtén los mensajes de log correspondientes a la descarga de una página con HTTP.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>He ido a la siguiente ruta:</p>

<pre><code>cd /var/log/apache2/
</code></pre>

<p>Y he ejecutado el siguiente comando:</p>

<pre><code>tail -f access.log
</code></pre>

<p>Podemos ver que al acceder desde otra maquina nos genera un log:</p>

<pre><code>192.168.0.100 - - [17/Jan/2020:13:47:32 +0100] "GET / HTTP/1.1" 200 3380 "-" "Mozilla/5.0 (X11; Linux x86_64; rv:68.0) Gecko/20100101 Firefox/68.0"
192.168.0.100 - - [17/Jan/2020:13:47:32 +0100] "GET /icons/openlogo-75.png HTTP/1.1" 304 181 "http://192.168.0.244/" "Mozilla/5.0 (X11; Linux x86_64; rv:68.0) Gecko/20100101 Firefox/68.0"
</code></pre>
</div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>4.</p></div></td><td><div class="mark_parser"><p>Obtén un comando <code>wget</code> para recuperar un archivo PDF protegido con usuario y contraseña. Ejecútalo y captura los encabezados de la solicitud.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>Para obtener un recurso protegido con wget emplearemos el siguiente comando:</p>

<p><strong><em>wget http://user:user@192.168.0.244/docs/doc1.pdf</em></strong></p>

<pre><code>alumno@I103-02:~$ wget http://user:user@192.168.0.244/docs/doc1.pdf
--2020-01-27 10:16:41--  http://user:*password*@192.168.0.244/docs/doc1.pdf
Conectando con 192.168.0.244:80... conectado.
Petición HTTP enviada, esperando respuesta... 401 Unauthorized
Autenticación seleccionada: Basic realm="Authentication Required"
Reutilizando la conexión con 192.168.0.244:80.
Petición HTTP enviada, esperando respuesta... 200 OK
Longitud: 0 [application/pdf]
Grabando a: “doc1.pdf.5”

doc1.pdf.5              [ &lt;=&gt;                ]       0  --.-KB/s    in 0s      

2020-01-27 10:16:41 (0,00 B/s) - “doc1.pdf.5” guardado [0/0]
</code></pre>

<p>Al mandarle esta petición el servidor nos responde con "401 Unauthorized".
A lo que el comando wget le proporciona la contraseña. El servidor responde con un "200 OK" permitiendo descargar el pdf.</p>

<p><img src="./files/user_files/2smr/franco.larrea/sr_02_02_02_04/img2.png" alt="Paquetes capturados" /></p>

<hr />

<p>En caso de no poner el usuario y la contraseña <strong><em>no podremos descargar el archivo.</em></strong></p>

<p>Analizando los paquetes de la petición no autorizada podemos ver lo siguiente:</p>

<p>Podemos ver en la siguiente imagen dos paquetes:</p>

<ul>
<li><p>El primer paquete es mi solicitud al documento "192.168.0.244/docs/doc1.pdf".</p></li>
<li><p>El segundo paquete es la respuesta, la cual nos comunica un error 401 "Unauthorized".</p></li>
</ul>

<p>Obtenemos este error porque no hemos hecho login satisfactoriamente en la página.</p>

<p><img src="./files/user_files/2smr/franco.larrea/sr_02_02_02_04/img.png" alt="Paquetes capturados" /></p>

<p><strong><em>GET</em></strong></p>

<pre><code>Hypertext Transfer Protocol
    GET /docs/doc1.pdf HTTP/1.1\r\n
        [Expert Info (Chat/Sequence): GET /docs/doc1.pdf HTTP/1.1\r\n]
            [GET /docs/doc1.pdf HTTP/1.1\r\n]
            [Severity level: Chat]
            [Group: Sequence]
        Request Method: GET
        Request URI: /docs/doc1.pdf
        Request Version: HTTP/1.1
    User-Agent: Wget/1.18 (linux-gnu)\r\n
    Accept: */*\r\n
    Accept-Encoding: identity\r\n
    Host: 192.168.0.244\r\n
    Connection: Keep-Alive\r\n
    \r\n
    [Full request URI: http://192.168.0.244/docs/doc1.pdf]
    [HTTP request 1/1]
    [Response in frame: 94]
</code></pre>

<p><strong><em>RESPONSE</em></strong></p>

<pre><code>Hypertext Transfer Protocol
    HTTP/1.1 401 Unauthorized\r\n
        [Expert Info (Chat/Sequence): HTTP/1.1 401 Unauthorized\r\n]
            [HTTP/1.1 401 Unauthorized\r\n]
            [Severity level: Chat]
            [Group: Sequence]
        Response Version: HTTP/1.1
        Status Code: 401                                                         ---&gt; Código de error
        [Status Code Description: Unauthorized]                              ---&gt; Descripción del error
        Response Phrase: Unauthorized
    Date: Mon, 20 Jan 2020 08:57:28 GMT\r\n
    Server: Apache/2.4.25 (Debian)\r\n
    WWW-Authenticate: Basic realm="Authentication Required"\r\n
    Content-Length: 460\r\n
    Keep-Alive: timeout=5, max=100\r\n
    Connection: Keep-Alive\r\n
    Content-Type: text/html; charset=iso-8859-1\r\n
    \r\n
    [HTTP response 1/1]
    [Time since request: 0.000230132 seconds]
    [Request in frame: 92]
    [Request URI: http://192.168.0.244/docs/doc1.pdf]
    File Data: 460 bytes
</code></pre>
<p>[<a href="./files/user_files/2smr/franco.larrea/sr_02_02_02_04/authorized.pcapng">authorized.pcapng</a> | <a href="./files/user_files/2smr/franco.larrea/sr_02_02_02_04/img.png">img.png</a> | <a href="./files/user_files/2smr/franco.larrea/sr_02_02_02_04/img2.png">img2.png</a> | <a href="./files/user_files/2smr/franco.larrea/sr_02_02_02_04/unauthorized.pcapng">unauthorized.pcapng</a>]</p>
</div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>5.</p></div></td><td><div class="mark_parser"><p>El servidor HTTP configurado es un sitio de producción. Configure un sitio de prueba como una copia del sitio de producción, al que se puede acceder utilizando un número de puerto alternativo.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>Vamos a la siguiente ruta:</p>

<pre><code>cd /etc/apache2/sites-available/
</code></pre>

<p>Y realizamos una copia del archivo de configuración:</p>

<pre><code>cp ./000-default.conf ./010-pruebas.conf
</code></pre>

<p>Editamos la copia del archivo de configuración:</p>

<pre><code>sudo nano 010-pruebas.conf 
</code></pre>

<p>Modificamos el puerto de la primera linea, he cambiado 80 por el 11700:</p>

<pre><code>&lt;VirtualHost *:11700&gt;
</code></pre>

<p>Cambiamos la ruta para el sitio de prueba:</p>

<pre><code>DocumentRoot /var/www/pruebas
</code></pre>

<p>Ahora ejecutamos el siguiente comando, este crea un enlace simbólico del archivo nuevo de configuración.</p>

<p>Acto seguido recargamos el servicio <strong>apache2</strong> :</p>

<pre><code>sudo a2ensite 010-pruebas 
sudo systemctl reload apache2
</code></pre>

<p>Modificamos el archivo ports.conf:</p>

<pre><code>cd ../ ; nano ports.conf
</code></pre>

<p>E introducimos la siguiente linea:</p>

<pre><code>Listen 11700
</code></pre>

<p>Ahora vamos a crear la ruta donde estará el html de pruebas.</p>

<p>Vamos a /var/www/ y creamos una carpeta llamada pruebas.</p>

<pre><code>cd /var/www/
mkdir pruebas
</code></pre>

<p>Acto seguido copiamos el index.html que ya tenemos por defecto de apache a la nueva carpeta.</p>

<pre><code>sudo cp ./html/index.html ./pruebas/index.html
</code></pre>

<p>Ya estaría configurado el sitio de pruebas. He modificado un poco el html del sitio de pruebas para que sea ligeramente diferente.</p>
</div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>6.</p></div></td><td><div class="mark_parser"><p>Una debilidad conocida del protocolo HTTP es que todo se transfiere en texto claro. Para resolver este y otros problemas de seguridad, se ha adoptado HTTPS (HTTP Secure). Captura una sesión HTTPS y comprueba si se pueden leer las cabeceras o el contenido. Averigua si Apache admite HTTPS y cómo se puede configurar.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>Capturando con Wireshark una sesión HTTPS podemos comprobar que no se puede sacar prácticamente información ya que la mayoría esta encriptada.</p>

<p>Apache si admite HTTPS. Para activarlo ejecutaremos los siguientes comandos:</p>

<pre><code>a2enmod ssl
a2ensite default-ssl
systemctl restart apache2
</code></pre>
<p>[<a href="./files/user_files/2smr/franco.larrea/sr_02_02_02_06/paquetes.pcapng">paquetes.pcapng</a>]</p>
</div></div>
</blockquote>
<a name="2.3"></a><p class="title_un">3. Preprocesador de hipertexto (PHP)</p>
<div class="mark_parser"><p>Esta unidad es una introducción al lenguaje de programación PHP a través de una serie de ejercicios basados en la información disponible en el <a href="https://www.php.net">sitio oficial</a>.
Para llevarlos a cabo es necesario revisar las referencias que se proponen en cada sección de la unidad.
Generalmente, cada ejercicio propone la realización de un programa sencillo, y opcionalmente algunas cuestiones.
En cada uno debe figurar el código fuente que resuelve el problema propuesto, debidamente comentado cuando revista alguna dificultad, así como la respuesta a las cuestiones planteadas.
Además, es necesario adjuntar el archivo o archivos <code>*.php</code> para que la solución proporcionada se pueda probar.</p>
</div>
<a name="2.3.1"></a><p class="title_sc">3.1. Conceptos básicos</p>
<blockquote><div class="mark_parser"><ul>
<li><a href="https://www.php.net/manual/es/intro-whatis.php">¿Qué es PHP?</a></li>
<li><a href="https://www.php.net/manual/es/intro-whatcando.php">¿Qué se puede hacer con PHP?</a></li>
<li><a href="https://www.php.net/manual/es/langref.php">Referencia del lenguaje</a></li>
</ul>
</div>
<table><tr valign="top"><td><div class="mark_parser"><p>1.</p></div></td><td><div class="mark_parser"><p><a href="https://www.php.net/manual/es/tutorial.firstpage.php">Primera página en PHP</a>. Haz el programa que se propone en el tutorial.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p><a href="HTTP://192.168.0.244/PHP/1pruebame.php">Pruebame</a></p>

<pre><code class="php">&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;Tutorial PHP&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;?php 
            echo '&lt;p&gt;Hola, soy Franco Larrea&lt;/p&gt;'; 
        ?&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre>
</div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>2.</p></div></td><td><div class="mark_parser"><p><a href="https://www.php.net/manual/es/tutorial.useful.php">Algo útil</a>. Haz el programa que se propone en el tutorial.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>Programa 1 -- <a href="HTTP://192.168.0.244/PHP/2variable.php">Pruebame</a></p>

<pre><code class="php">&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;Tutorial PHP&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;?php
            echo $_SERVER['HTTP_USER_AGENT'];
        ?&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p>Programa 2 -- <a href="HTTP://192.168.0.244/PHP/2variable2.php">Pruebame</a></p>

<pre><code class="php">&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;Tutorial PHP&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;?php
            if (strpos($_SERVER['HTTP_USER_AGENT'], 'MSIE') !== FALSE) {
                echo 'Está usando Internet Explorer.&lt;br /&gt;';
            } else {
                echo 'NO está usando Internet Explorer.&lt;br /&gt;';
            }
        ?&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p>Programa 3 -- <a href="HTTP://192.168.0.244/PHP/2variable3.php">Pruebame</a></p>

<pre><code class="php">&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;Tutorial PHP&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;?php
            if (strpos($_SERVER['HTTP_USER_AGENT'], 'MSIE') !== FALSE) {
        ?&gt;
        &lt;h3&gt;strpos() debe haber devuelto no falso&lt;/h3&gt;
        &lt;p&gt;Está usando Internet Explorer&lt;/p&gt;
        &lt;?php
            } else {
        ?&gt;
        &lt;h3&gt;strpos() debe haber devuelto falso&lt;/h3&gt;
        &lt;p&gt;No está usando Internet Explorer&lt;/p&gt;
        &lt;?php
            }
        ?&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre>
</div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>3.</p></div></td><td><div class="mark_parser"><p><a href="https://www.php.net/manual/es/tutorial.forms.php">Tratar con formularios</a>. Haz el programa que se propone en el tutorial.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>Programa -- <a href="HTTP://192.168.0.244/PHP/3formularios.php">Pruebame</a></p>

<p>Fichero 1</p>

<pre><code class="php">&lt;form action="3formularios2.php" method="post"&gt;
    &lt;p&gt;Su nombre: &lt;input type="text" name="Nombre" /&gt;&lt;/p&gt;
    &lt;p&gt;Su edad: &lt;input type="text" name="Edad" /&gt;&lt;/p&gt;
    &lt;p&gt;&lt;input type="submit" /&gt;&lt;/p&gt;
&lt;/form&gt;
</code></pre>

<p>Fichero 2</p>

<pre><code class="php">Hola &lt;?php echo htmlspecialchars($_POST['nombre']); ?&gt;.
Usted tiene &lt;?php echo (int)$_POST['edad']; ?&gt; años.
</code></pre>
</div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>4.</p></div></td><td><div class="mark_parser"><p>Diseña una página con las etiquetas HTML básicas (<code>&lt;head&gt;</code>, <code>&lt;title&gt;</code>, <code>&lt;body&gt;</code>, etc.). Dentro de la etiqueta <code>&lt;body&gt;</code>, añade una sección PHP que muestre el texto <em>Hello World!</em> en el navegador.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>Programa -- <a href="HTTP://192.168.0.244/PHP/4echo.php">Pruebame</a></p>

<p>Fichero 1</p>

<pre><code class="php">&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;Hello World&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;?php
            echo "Hello World!"
        ?&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre>
</div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>5.</p></div></td><td><div class="mark_parser"><p>Define dos variables, una que contenga la cadena <em>Twinkle</em> y otra que contenga la cadena <em>star</em>. Añade una línea que muestre la frase <em>Twinkle, Twinkle little star</em> en el navegador. En el mismo programa, modifica el valor de cada variable a otra cadena cualquiera y vuelve a mostrar la frase.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>Programa -- <a href="HTTP://192.168.0.244/PHP/5variables.php">Pruebame</a></p>

<pre><code class="php">&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;Tutorial PHP&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;?php 
            $x = "Twinkle";
            $y = "star";
            echo "$x, $x little $y";
            echo "&lt;br/&gt;"

            $x = "Algo";
            $y = "cosa";
            echo "$x, $x little $y";
        ?&gt;
    &lt;/body&gt;
&lt;/html&gt;

</code></pre>
</div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>6.</p></div></td><td><div class="mark_parser"><p>Escribe un programa que permita comprobar el funcionamiento de la función <code>gettype</code>.</p>

<ul>
<li>¿Qué es un tipo de datos?</li>
<li>¿Qué tipos de datos soporta PHP?</li>
<li>¿Qué hace la función <code>gettype</code>?</li>
</ul>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>¿Qué es un tipo de datos?</p>

<ul>
<li>Un tipo de dato es, un espacio en memoria con restricciones.</li>
</ul>

<p>¿Qué tipos de datos soporta PHP?</p>

<p>PHP soporta:</p>

<ul>
<li>boolean</li>
<li>integer</li>
<li>float</li>
<li>string</li>
<li>entre otros.</li>
</ul>

<p>¿Qué hace la función gettype?</p>

<ul>
<li>Obtiene el tipo de datos que contiene una variable</li>
</ul>

<p>Programa -- <a href="HTTP://192.168.0.244/PHP/6variables.php">Pruebame</a></p>

<pre><code class="php">&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;Tutorial PHP&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;?php 
            $x = 5.5e12;
            echo gettype($x);
            echo "&lt;br/&gt;";

            $x = "hola";
            echo gettype($x);
            echo "&lt;br/&gt;";

            $x = 5;
            echo gettype($x);
            echo "&lt;br/&gt;";
        ?&gt;
    &lt;/body&gt;
&lt;/html&gt;

</code></pre>
</div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>7.</p></div></td><td><div class="mark_parser"><p>PHP incluye todos los operadores aritméticos estándar. Haz un programa que defina las variables <code>x</code> e <code>y</code> asignando valores enteros, y añade el código para calcular lo siguiente:</p>

<ul>
<li><code>x + y</code></li>
<li><code>x - y</code></li>
<li><code>x * y</code></li>
<li><code>x / y</code></li>
<li><code>x % y</code></li>
</ul>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>Programa -- <a href="HTTP://192.168.0.244/PHP/7operadores.php">Pruebame</a></p>

<pre><code class="php">&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;Tutorial PHP&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;?php
            $x = 5;
            $y = 7;
            echo $x + $y;
            echo "&lt;br/&gt;";
            echo $x - $y;
            echo "&lt;br/&gt;";
            echo $x * $y;
            echo "&lt;br/&gt;";
            echo $x / $y;
            echo "&lt;br/&gt;";
            echo $x % $y;
            echo "&lt;br/&gt;";
        ?&gt;
    &lt;/body&gt;
&lt;/html&gt;

</code></pre>
</div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>8.</p></div></td><td><div class="mark_parser"><p>Haz un programa para la comprobar lo que ocurre si el operador de PHP para concatenar cadenas se aplica a enteros.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>Programa -- <a href="HTTP://192.168.0.244/PHP/8concatenar.php">Pruebame</a></p>

<pre><code class="php">&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;Tutorial PHP&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;?php
            echo 6 . 8;
        ?&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre>
</div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>9.</p></div></td><td><div class="mark_parser"><p>Los operadores de asignación aritmética realizan una operación aritmética al mismo tiempo que asignan un nuevo valor a la variable. Escribe un programa que haga operaciones sobre una variable y produzca el siguiente resultado (solo debe emplear una variable y no usar operadores aritméticos simples):</p>

<pre><code>El valor ahora es 8.
Sumar 2. El valor ahora es 10.
Restar 4. El valor ahora es 6.
Multiplicar por 5. El valor ahora es 30.
Dividir entre 3. El valor ahora es 10.
Incrementar el valor en uno. El valor ahora es 11.
Disminuir el valor en uno. El valor ahora es 10.
</code></pre>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>Programa -- <a href="HTTP://192.168.0.244/PHP/9asignacion.php">Pruebame</a></p>

<pre><code class="php">&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;Tutorial PHP&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;?php
            $x = 0;
            $x += 8;
            echo "El valor ahora es $x.";
            echo "&lt;br/&gt;";
            $x += 2;
            echo "Sumar 2. El valor ahora es $x.";
            echo "&lt;br/&gt;";
            $x -= 4;
            echo "Restar 4. El valor ahora es $x.";
            echo "&lt;br/&gt;";
            $x *= 5;
            echo "Multiplicar por 5. El valor ahora es $x.";
            echo "&lt;br/&gt;";
            $x /= 3;
            echo "Dividir entre 3. El valor ahora es $x.";
            echo "&lt;br/&gt;";
            $x++;
            echo "Incrementar el valor en uno. El valor ahora es $x.";
            echo "&lt;br/&gt;";
            $x--;
            echo "Disminuir el valor en uno. El valor ahora es $x.";
            echo "&lt;br/&gt;";
        ?&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre>
</div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>10.</p></div></td><td><div class="mark_parser"><p>Haz un programa que pruebe la operativa de las funciones <code>var_dump</code> y <code>print_r</code>.</p>

<ul>
<li>¿Qué hace la función <code>var_dump</code>?</li>
<li>¿Qué hace la función <code>print_r</code>?</li>
<li>¿Qué hace la función <code>unset</code>?</li>
<li>¿Qué ocurre si se aplican las funciones <code>var_dump</code> e <code>print_r</code> a variables sin ningún valor asignado?</li>
</ul>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>¿Qué hace la función var_dump?</p>

<ul>
<li>Muestra información sobre una variable.</li>
</ul>

<p>¿Qué hace la función print_r?</p>

<ul>
<li>Imprime información legible para humanos sobre una variable.</li>
</ul>

<p>¿Qué hace la función unset?</p>

<ul>
<li>Destruye una variable especificada.</li>
</ul>

<p>¿Qué ocurre si se aplican las funciones var_dump e print_r a variables sin ningún valor asignado?</p>

<ul>
<li>Ambas dan errores, pero var_dump además da "Null" como resultado. <a href="HTTP://192.168.0.244/PHP/10funciones.php">Pruebalo</a></li>
</ul>
</div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>11.</p></div></td><td><div class="mark_parser"><p>Haz un programa que muestre la diferencia que hay entre emplear comillas simples y comillas dobles para representar cadenas en PHP.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>Programa -- <a href="HTTP://192.168.0.244/PHP/11comillas.php">Pruebame</a></p>

<pre><code class="php">&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;Tutorial PHP&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;?php
            $saludo = "Hola";
            echo "$saludo Pepe";
            echo "&lt;br/&gt;";
            echo '$saludo Pepe';
        ?&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre>
</div></div>
</blockquote>
<a name="2.3.2"></a><p class="title_sc">3.2. Estructuras de control</p>
<blockquote><div class="mark_parser"><p><a href="https://www.php.net/manual/es/language.control-structures.php">Referencia del lenguaje</a></p>
</div>
<table><tr valign="top"><td><div class="mark_parser"><p>1.</p></div></td><td><div class="mark_parser"><p>Haz un programa que obtenga el mes actual y muestre una de las siguientes respuestas, dependiendo de si el mes es agosto o no (emplea las funciones <code>date</code> y <code>time</code>):</p>

<ul>
<li><em>It's August, so it's really hot</em> or</li>
<li><em>Not August, so at least not in the peak of the heat</em>.</li>
</ul>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>Programa -- <a href="HTTP://192.168.0.244/PHP/control/1mes.php">Pruebame</a></p>

<pre><code class="php">&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;Tutorial PHP&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;?php
            $a=date("F");

            if ($a=="August") {
                echo "It's ".date("F").", so it's really hot.";
            } else {
                echo "Not ".date("F").", so at least not in the peak of the heat.";
            }
        ?&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre>
</div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>2.</p></div></td><td><div class="mark_parser"><p>Haz un programa que obtenga el día actual de la semana y muestre una de las siguientes respuestas, según el día (emplea las funciones <code>date</code> y <code>time</code>):</p>

<ul>
<li><em>Laugh on Monday, laugh for danger</em>,</li>
<li><em>Laugh on Tuesday, kiss a stranger</em>,</li>
<li><em>Laugh on Wednesday, laugh for a letter</em>,</li>
<li><em>Laugh on Thursday, something better</em>,</li>
<li><em>Laugh on Friday, laugh for sorrow</em> o</li>
<li><em>Laugh on Saturday, joy tomorrow</em>.</li>
</ul>

<p>El programa debe hacer la operación dos veces, en cada caso:</p>

<ul>
<li>utilizando <code>if-elseif-else</code> y</li>
<li>utilizando <code>switch</code>.</li>
</ul>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>Programa -- <a href="HTTP://192.168.0.244/PHP/control/2days.php">Pruebame</a></p>

<pre><code class="php">&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;Tutorial PHP&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;?php
            $a=date("l");

            if ($a == "Monday") {
                echo "Laugh on $a, laugh for danger.";
            } elseif ($a == "Tuesday") {
                echo "Laugh on $a, kiss a stranger.";
            } elseif ($a == "Wednesday") {
                echo "Laugh on $a, laugh for a letter.";
            } elseif ($a == "Thursday") {
                echo "Laugh on $a, something better.";
            } elseif ($a == "Friday") {
                echo "Laugh on $a, laugh for sorrow.";
            } elseif ($a == "Saturday") {
                echo "Laugh on $a, joy tomorrow.";
            } else {
                echo "Today is $a";
            }

            echo "&lt;br/&gt;&lt;br/&gt;";

            switch ($a) {
                case "Monday":
                    echo "Laugh on $a, laugh for danger.";
                    break;
                case "Tuesday":
                    echo "Laugh on $a, kiss a stranger.";
                    break;
                case "Wednesday":
                    echo "Laugh on $a, laugh for a letter.";
                    break;
                case "Thursday":
                    echo "Laugh on $a, something better.";
                    break;
                case "Friday":
                    echo "Laugh on $a, laugh for sorrow.";
                    break;
                case "Saturday":
                    echo "Laugh on $a, joy tomorrow.";
                    break;
                case "Sunday":
                    echo "Today is $a";
                    break;
            }
        ?&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre>
</div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>3.</p></div></td><td><div class="mark_parser"><p>Haz un programa que muestre <a href="./files/wb_files/sr_02_03_02_ex03/php_exercise_loop.txt">esto</a> en el navegador. Genera la línea  <code>abc</code> con un bucle <code>while</code>, la línea <code>xyz</code> con un bucle <code>do-while</code> y las dos restantes secciones con bucles <code>for</code>. Incluye saltos de línea en el código fuente y HTML en la salida.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>Programa -- <a href="HTTP://192.168.0.244/PHP/control/3bucle.php">Pruebame</a></p>

<pre><code class="php">&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;Ejercicio PHP&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;?php
            $i = 1;

            while ($i &lt;= 8) {
                $i++;
                echo "abc ";
                if ($i == 9) {
                    echo "abc";
                } 
            }

            echo "&lt;br/&gt;";
            echo "&lt;br/&gt;";

            $i = 0;

            do {
                if ($i == 0) {
                    echo "xyz";
                } 
                echo " xyz";
                $i++;
            } while ($i &lt; 8);

            echo "&lt;br/&gt;";
            echo "&lt;br/&gt;";

            for ($i = 1; $i &lt;= 9; $i++) {
                echo "$i ";
            }

            echo "&lt;br/&gt;";
            echo "&lt;br/&gt;";

            for ($i = 1; $i &lt;= 6; $i++) {
                for ($e = 0; $e &lt;= 4; $e++) {
                    echo "$i. Item ".chr($e + ord('A'))."&lt;br/&gt;";
                }
            }
        ?&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre>
</div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>4.</p></div></td><td><div class="mark_parser"><p>Emplea un bucle <code>for</code>, para obtener los cuadrados de los números del 1 al 12. Muéstra cada resultado con el formato <em>1 x 1 = 1</em>.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p></div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>5.</p></div></td><td><div class="mark_parser"><p>Emplea dos bucles <code>for</code>, uno anidado dentro de otro para obtener la siguiente tabla de productos:</p>

<p><img src="./files/wb_files/sr_02_03_02_ex05/php_exercise_table.png" alt="php_exercise_table.png" /></p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p></div></div>
</blockquote>
<a name="2.3.3"></a><p class="title_sc">3.3. Arrays</p>
<blockquote><div class="mark_parser"><p><a href="http://www.php.net/manual/es/language.types.array.php">Referencia del lenguaje</a></p>
</div>
<table><tr valign="top"><td><div class="mark_parser"><p>1.</p></div></td><td><div class="mark_parser"><p>Define un array de condiciones climáticas con los siguientes valores: <em>lluvia, sol, nubes, granizo, aguanieve, nieve, viento</em>.</p>

<p>Utilizando el array muestra el siguiente texto en el navegador: <em>Hemos visto todo tipo de tiempo este mes. A principios de mes tuvimos nieve y viento. Luego vino el sol con algunas nubes y algo de lluvia. Al menos no tuvimos granizo ni aguanieve.</em></p>

<p>Incluye un título para la página.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p></div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>2.</p></div></td><td><div class="mark_parser"><p>Define una array con los siguientes valores: <em>Tokio, Ciudad de México, Nueva York, Mumbai, Seúl, Shanghái, Lagos, Buenos Aires, El Cairo, Londres</em>.</p>

<p>Muestra estos valores en el navegador separados por coma, mediante un bucle <code>for</code> que itere sobre el array. Después, ordena el array, y vuelve a mostrar los valores en el navegador, en una lista con bolos, nuevamente mediante un bucle.</p>

<p>Añade las siguientes ciudades al array: <em>Los Ángeles, Calcuta, Osaka, Beijing</em>. Ordena nuevamente el array y muéstralo una vez más en el navegador en una lista con bolos.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p></div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>3.</p></div></td><td><div class="mark_parser"><p>Define un array asociativo con los siguientes pares clave-valor (ciudad-país): <em>Tokyo, Japón; Ciudad de México, México; Nueva York, Estados Unidos; Mumbai, India; Seúl, Corea; Shanghai, China; Lagos, Nigeria; Buenos Aires, Argentina; El Cairo, Egipto; Londres, Inglaterra</em>.</p>

<p>Recorre el array y muestra los pares clave-valor en el navegador en una lista con bolos.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p></div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>4.</p></div></td><td><div class="mark_parser"><p>Define una array con los datos de temperatura obtenidos durante un mes. Luego calcula la temperatura promedio, las cinco temperaturas más altas y las cinco temperaturas más bajas. Muestra los resultados en el navegador.</p>

<p>Lista de temperaturas: 20, 21, 22, 14, 16, 26, 28, 23, 24, 25, 23, 14, 17, 26, 26, 20, 22, 23, 27, 26, 20, 22, 24, 25, 23, 26, 28, 29, 32, 28.</p>

<p>(La entidad HTML para el signo de grado es &amp;deg;)</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p></div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>5.</p></div></td><td><div class="mark_parser"><p>Define un array que contenga a su vez  diez arrays asociativos. Todas los arrays asociativos tendrán las siguientes tres claves: <em>Ciudad</em>, <em>País</em> y <em>Continente</em>. Este es el contenido de los valores de cada array asociativo (<em>Ciudad</em>, <em>País</em>, <em>Continente</em>): <em>Tokio, Japón, Asia; Ciudad de México, México, Norteamérica; Nueva York, Estados Unidos, América del Norte; Mumbai, India, Asia; Seúl, Corea, Asia; Shangai, China, Asia; Lagos, Nigeria, África; Buenos Aires, Argentina, Sudamérica; El Cairo, Egipto, África; Londres, Reino Unido, Europa</em>.</p>

<p>Muestra el contenido del array en una tabla HTML. La primera fila debe ser una fila de encabezado. Para las filas siguientes, utiliza un bucle <code>for</code> con un bucle <code>foreach</code> anidado para rellenar la tabla con el contenido del array. Usa la función <code>count</code> para que el bucle <code>for</code> funcione correctamente incluso si cambiara el tamaño del array.</p>

<p>Añade una hoja de estilo sencilla en la sección <code>&lt;head&gt;</code> del HTML, para configurar los siguientes aspectos:</p>

<ul>
<li>ancho de celda y relleno,</li>
<li>texto alineado,</li>
<li>propiedades del borde.</li>
</ul>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p></div></div>
</blockquote>
<a name="2.3.4"></a><p class="title_sc">3.4. Funciones</p>
<blockquote><div class="mark_parser"><p><a href="http://www.php.net/manual/es/language.functions.php">Referencia del lenguaje</a></p>
</div>
<table><tr valign="top"><td><div class="mark_parser"><p>1.</p></div></td><td><div class="mark_parser"><p>Define una función llamada <code>hello</code> que envíe <em>Hello World!</em> al navegador. Llama a la función.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p></div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>2.</p></div></td><td><div class="mark_parser"><p>Define una función que acepte dos argumentos, realice un cálculo con ellos y luego devuelva una frase con el resultado al navegador. La función calculará el área de un rectángulo, siendo los dos argumentos ancho y alto. La frase que devolverá es <em>Un rectángulo de altura <strong>h</strong> y ancho <strong>w</strong> tiene un área de <strong>a</strong></em>, donde <strong>h</strong> y <strong>w</strong> son los argumentos y <strong>a</strong> es el resultado. Llama a la función para comprobar si el programa funciona.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p></div></div>
</blockquote>
<a name="2.3.5"></a><p class="title_sc">3.5. Formularios HTML</p>
<blockquote><div class="mark_parser"><p><a href="http://www.php.net/manual/es/language.variables.external.php">Referencia del lenguaje</a></p>
</div>
<table><tr valign="top"><td><div class="mark_parser"><p>1.</p></div></td><td><div class="mark_parser"><p>Diseña un formulario con un campo en el que el usuario introducirá su ciudad favorita. Configura el método POST para el formulario. Después de que el usuario pulse un botón, el navegador mostrará el siguiente texto:  <em>Tu ciudad favorita es <strong>ciudad</strong></em>, donde <strong>ciudad</strong> es lo que el usuario ha introducido.</p>

<p>Resuelve el problema de las siguientes dos formas diferentes:</p>

<ul>
<li><strong>Dos archivos separados</strong>. El primer archivo contendrá el formulario y el segundo archivo contendrá código PHP para procesar la respuesta del usuario.</li>
<li><strong>Solo un archivo</strong>. El archivo incluirá tanto la petición de entrada al usuario como la respuesta (ayuda: utiliza sentencias condicionales para averiguar qué mostrar, y la función <code>isset</code> para saber si se ha enviado o no el formulario).</li>
</ul>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p></div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>2.</p></div></td><td><div class="mark_parser"><p>Haz un programa (solo un archivo) que obtenga el día de la semana a partir de un formulario y que muestre una de las siguientes respuestas, según el día:</p>

<ul>
<li><em>Laugh on Monday, laugh for danger</em>,</li>
<li><em>Laugh on Tuesday, kiss a stranger</em>,</li>
<li><em>Laugh on Wednesday, laugh for a letter</em>,</li>
<li><em>Laugh on Thursday, something better</em>,</li>
<li><em>Laugh on Friday, laugh for sorrow</em> or</li>
<li><em>Laugh on Saturday, joy tomorrow</em>.</li>
</ul>

<p>El programa debe hacer la operación dos veces, en cada caso:</p>

<ul>
<li>utilizando <code>if-elseif-else</code> y</li>
<li>utilizando <code>switch</code></li>
</ul>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p></div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>3.</p></div></td><td><div class="mark_parser"><p>Diseña un formulario que pida al usuario información sobre el tiempo que el usuario ha observado en un mes determinado. En campos de texto separados, solicita la ciudad, mes y año en cuestión. Debajo, establece una serie de casillas de verificación que muestren estos valores: <em>lluvia, sol, nubes, granizo, aguanieve, nieve, viento</em>. Configura el formulario adecuadamente para que se reciba un array a partir de los elementos marcados.</p>

<p>En respuesta al formulario, define un array con la ciudad, el mes y el año que el usuario ha introducido. Muestra una respuesta con el siguiente formato: <em>En <strong>ciudad</strong> en el mes de <strong>mes</strong>-<strong>año</strong>, se observó el siguiente tiempo: <strong>tiempo</strong></em>. En este formato, <strong>ciudad</strong>, <strong>mes</strong> y <strong>año</strong> son los valores del array definido, y <strong>tiempo</strong> es una lista con bolos con las selecciones del usuario.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p></div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>4.</p></div></td><td><div class="mark_parser"><p>Define un array con medios de transporte, que incluya <em>Automóvil, Avión, Ferry, Metro</em>. Muestra el siguiente texto en el navegador: <em>Lista de medios de transporte</em>. A continuación, muestra una lista con bolos iterando el array.</p>

<p>Después, ofrece al usuario un cuadro de texto y pídele que añada otros medios de transporte a la lista, separados por coma. Cuando el usuario pulse el botón <em>Enviar</em>, procesa el dato con funciones de array de PHP y muestra la lista original con las adiciones sugeridas por el usuario. Ofrece otro cuadro de texto con la etiqueta <em>Agregar más?</em> y otro botón <em>Enviar</em>. Cuando el usuario pulse este botón, la página volverá a cargarse con las nuevas adiciones incorporadas a la lista ampliada anteriormente. El programa debe permitir al usuario añadir tantos elementos como desee.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p></div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>5.</p></div></td><td><div class="mark_parser"><p>Haz un programa que muestre el contenido del archivo <code>database.txt</code> (inicialmente vacío). Después, el programa mostrará un formulario con un cuadro de texto y un botón. Cuando el usuario pulse el botón, el texto de entrada se añadirá al archivo <code>database.txt</code> y se cargará la página actualizada (contenido del archivo actualizado y formulario). Haz el programa de dos maneras diferentes:</p>

<ul>
<li>utilizando solo un archivo y</li>
<li>utilizando dos archivos según con el patrón <a href="https://es.wikipedia.org/wiki/Post/Redirect/Get">POST/REDIRECT/GET</a>.</li>
</ul>

<p>Ayuda:</p>

<ul>
<li>funciones con archivos: <code>readfile</code>, <code>file_put_contents</code>;</li>
<li>función para redirigir el navegador: <code>http_redirect</code>;</li>
<li>la etiqueta HTML <code>pre</code> puede usarse para mostrar el contenido completo del archivo sin ninguna transformación.</li>
</ul>

<p>Responde estas preguntas:</p>

<ul>
<li>¿Qué sucede en cada solución cuando el usuario actualiza la página en su navegador?</li>
<li>¿Qué solución crees que es mejor para las aplicaciones con base de datos?</li>
<li>¿Cuáles son las ventajas?</li>
</ul>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p></div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>6.</p></div></td><td><div class="mark_parser"><p>Diseña una página con el siguiente mensaje: <em>Por favor, introduce los valores de altura y ancho del rectángulo</em>. Debajo, proporciona dos cuadros de texto, uno para la altura y otro para el ancho. Cuando el usuario pulse el botón <em>Enviar</em>, se mostrará el siguiente texto en el navegador: <em>Un rectángulo de altura <strong>h</strong> y ancho <strong>w</strong> tiene un área de <strong>a</strong></em>, donde <strong>h</strong> y <strong>w</strong> son los datos de entrada y <strong>a</strong> es el área del rectángulo. El área debe calcularse utilizando una función.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p></div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>7.</p></div></td><td><div class="mark_parser"><p>Define un array asociativo, que contenga los nombres de los meses como clave y el  número de días de cada mes como valor. A continuación, define las siguientes funciones:</p>

<ul>
<li><strong><code>makeOption</code></strong>. A partir un clave y un valor, obtiene el código HTML de un elemento de opción para un campo de selección de un formulario, con el valor en mayúsculas.</li>
<li><strong><code>makeOptions</code></strong>. A partir de un array asociativo, obtiene el código HTML correspondiente a una secuencia de elementos de opción.</li>
<li><strong><code>makeSelect</code></strong>. A partir de un array asociativo, obtiene el código HTML de un campo de selección con todas sus opciones. Esta función debe llamar a la función <code>makeOptions</code> para producir las opciones.</li>
</ul>

<p>Después, diseña un formulario con la siguiente petición: <em>Por favor elige un mes</em>. Finalmente, proporciona un campo de selección con los meses como opciones, empleando la función <code>makeSelect</code>.</p>

<p>Cuando el usuario pulse el botón <em>Enviar</em>, se obtendrá el siguiente mensaje: <em>El mes de <strong>mes</strong> tiene <strong>número</strong> días</em>, donde <strong>mes</strong> es el nombre del mes que eligió el usuario y <strong>número</strong> es el número de días de dicho mes.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p></div></div>
</blockquote>
<a name="2.3.6"></a><p class="title_sc">3.6. Bases de datos</p>
<blockquote><div class="mark_parser"><p><a href="http://www.php.net/manual/en/refs.database.php">Extensiones de base de datos</a></p>

<p><a href="http://www.php.net/manual/es/mysqli.quickstart.php">MySQL</a></p>
</div>
<table><tr valign="top"><td><div class="mark_parser"><p>1.</p></div></td><td><div class="mark_parser"><p>Busca un ejemplo en la documentación que realice al menos las siguientes acciones:</p>

<ul>
<li>establecer conexión con una base de datos,</li>
<li>ejecutar una consulta,</li>
<li>mostrar el resultado de la consulta,</li>
<li>cerrar la conexión a la base de datos.</li>
</ul>

<p>Crea la base de datos y las tablas requeridas, y ejecuta el ejemplo.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p></div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>2.</p></div></td><td><div class="mark_parser"><p>Realiza la siguiente aplicación en PHP:</p>

<ul>
<li>formulario que pida al usuario los datos de registro (nombre, apellido, etc.),</li>
<li>almacenamiento de datos de registro en una tabla SQL,</li>
<li>página que muestra el contenido de la tabla de registro completa.</li>
</ul>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p></div></div>
</blockquote>
<p class="title_bl">Aplicaciones de red (II)</p>
<div class="mark_parser"><p>Este bloque introduce otros servicios importantes para aplicaciones de usuario.</p>
</div>
<a name="3.1"></a><p class="title_un">1. Protocolo simple de transferencia de correo (SMTP)</p>
<div class="mark_parser"><p>SMTP (Simple Mail Transfer Protocol, protocolo simple de transferencia de correo) tiene como objetivo transferir mensajes entre usuarios en el sistema de correo electrónico (email).</p>

<p>Hay dos procesos involucrados en SMTP:</p>

<ul>
<li><strong>Cliente</strong>. Proporciona una interfaz de usuario para componer nuevos mensajes, entre otras tareas, y envía los mensajes al servidor.</li>
<li><strong>Servidor</strong>. Realiza dos acciones principales:

<ul>
<li>almacena el mensaje para que el destinatario lo recupere (el mensaje se recuperará utilizando otro protocolo tal como HTTP, POP3, IMAP, etc.), o</li>
<li>transmite el mensaje a otro servidor SMTP (en este caso, se comporta como un cliente).</li>
</ul></li>
</ul>

<p>SMTP funciona sobre TCP.
La comunicación SMTP entre servidores utiliza el puerto 25.
Generalmente, los clientes envian los mensajes de correo saliente al puerto 587 del servidor.</p>

<h1>El sistema de correo electrónico</h1>

<p>El sistema de correo electrónico permite el intercambio de mensajes sin la necesidad de que los usuarios estén presentes simultáneamente en el momento de la comunicación y puedan obtener dichos mensajes desde cualquier nodo (ordenador de escritorio, portátil, tableta, smartphone, etc.) de la red.
Para lograr este objetivo, se disponen los siguientes elementos:</p>

<p><img src="./files/wb_files/sr_03_01/smtp_email_system.png" alt="smtp_email_system.png" /></p>

<ol>
<li>Envío: el MUA (Mail User Agent) envía el mensaje a un MTA (Mail Transfer Agent).</li>
<li>Transferencia: el MTA del remitente se conecta al MTA del destinatario, averiguándolo generalmente mediante una consulta DNS (registro de intercambio de correo MX).</li>
<li>Recepción: el MTA que recibe el correo electrónico entrante en la red del destinatario entrega el mensaje a un MDA (Mail Delivery Agent), para su posterior recuperación por parte del MUA.</li>
</ol>

<h1>Direcciones de correo electrónico y buzones</h1>

<p>El MDA gestiona espacios de almacenamiento llamados buzones (<em>mailboxes</em>).
Un buzón almacena mensajes dirigidos a un usuario o grupo de usuarios.
Cada buzón se identifica mediante una dirección de correo electrónico, que es un texto de la forma  <code>user@hostname</code>, donde <code>user</code> identifica al usuario o grupo de usuarios dentro del nodo cuyo nombre de dominio es <code>hostname</code>.</p>

<p>La IP del servidor SMTP que puede entregar mensajes a usuarios en un dominio se puede obtener a través de una consulta DNS, registros de tipo MX.</p>

<p>Por otro lado, un alias de correo es una dirección de correo electrónico que no tiene un buzón asociado, sino que todo el correo dirigido a esa dirección se reenvía a un conjunto de direcciones que sí tienen un buzón en el mismo dominio. Si el dominio es diferente, entonces se denomina redirección (<em>forwarding</em>).</p>

<h1>Multipurpose Internet Mail Extensions (MIME)</h1>

<p>Originalmente el sistema de correo electrónico admitía únicamente texto ASCII; posteriormente, se extendió mediante MIME para incluir texto en otros conjuntos de caracteres y archivos adjuntos con contenido multimedia.</p>

<h1>Protocolos para recuperar mensajes de buzones</h1>

<h2>Internet Message Access Protocol (IMAP)</h2>

<p>IMAP se diseñó con el objetivo de permitir la administración completa de un buzón por parte de múltiples clientes de correo electrónico, por lo que los clientes generalmente dejan los mensajes en el servidor hasta que el usuario los elimine de manera explícita.</p>

<p>El servidor IMAP emplea generalmente el puerto TCP 143.
IMAP sobre TLS/SSL (IMAPS) emplea el puerto TCP 993.</p>

<h2>Post Office Protocol (POP)</h2>

<p>POP permite principalmente descargar y eliminar los mensajes del buzón.
Generalmente los clientes POP se conectan al servidor, recuperan todos los mensajes, los almacenan en el dispositivo u ordenador del usuario como mensajes nuevos, los eliminan del servidor y finalmente se desconectan.
Sin embargo, la mayoría de clientes POP ofrecen también la opción de no borrar el correo en el servidor.
La versión 3 (POP3) es el último estándar de uso común.</p>

<p>El servidor POP3 escucha en el puerto TCP 110.
POP3 sobre TLS/SSL (POP3S) emplea el puerto TCP 995.</p>
</div>
<a name="3.1.1"></a><p class="title_sc">1.1. Operación</p>
<blockquote><div class="mark_parser"><p>La transferencia de mensajes de correo entre MUA y MTA o entre MTA y MTA se realiza mediante una secuencia de comandos de texto definidos por el protocolo SMTP.
Cada comando generado por el cliente es respondido por el servidor con un mensaje que consiste en un código de tres dígitos y un texto.
El texto no lo establece el protocolo (cada servidor de correo puede elegir mensaje y idioma del mismo), pero los códigos sí.
El primer dígito indica si el comando ha funcionado correctamente o no.
Así, los códigos 4xx y 5xx indican que ha ocurrido un error y que la entrega no fue posible:</p>

<ul>
<li><strong>Error temporal (4xx)</strong>. Se debe a condiciones temporales, tales como que el servidor esté muy ocupado, falle la red, se exceda la cuota del usuario, etc.; la entrega no se ha realizado, pero quizás se haga en otra ocasión, si se vuelve a intentar.</li>
<li><strong>Error permanente (5xx)</strong>. Se debe a condiciones permanentes, tales como usuario inexistente, cuenta bloqueada, dominio inexistente, etc.; la entrega no se ha realizado y tampoco se realizará después de un nuevo intento.</li>
</ul>
</div>
<table><tr valign="top"><td><div class="mark_parser"><p>1.</p></div></td><td><div class="mark_parser"><p><a href="https://www.mozilla.org/es-ES/thunderbird/"><strong>Thunderbird</strong></a>. Utiliza los logs de Thunderbird para capturar los mensajes SMTP intercambiados al enviar un correo electrónico (<a href="https://www.lifewire.com/pop-imap-smtp-traffic-thunderbird-1173156">howto</a>). Explica el significado de cada mensaje (<a href="https://es.wikipedia.org/wiki/Protocolo_para_transferencia_simple_de_correo#Comandos">ayuda</a>)</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>Connecting to: mail.gmx.com:465</p>

<p>Response: 220 gmx.com (mrgmx105) Nemesis ESMTP Service ready</p>

<p>Send: EHLO [192.168.0.109]^M</p>

<p>-- <strong>SEND Inicia una transacción en la cual el mensaje se entrega a una terminal.</strong></p>

<p>-- <strong>EHLO, para abrir una sesión.</strong></p>

<p>Response: 250-gmx.com Hello [192.168.0.109] [79.146.173.188]</p>

<p>Response: 250-8BITMIME</p>

<p>Response: 250-AUTH LOGIN PLAIN</p>

<p>Response: 250 SIZE 69920427</p>

<p>auth: server caps 0x20330, pref 0x300, failed 0x0, avail caps 0x300</p>

<p>API = 0x800, CRAM = 0x2000, NTLM = 0x4000, MSN =  0x8000, PLAIN = 0x200, LOGIN = 0x100, EXTERNAL = 0x400)ng auth method 0x200</p>

<p>AuthLoginStep1() for francolarrea02@gmx.es@mail.gmx.com</p>

<p>N auth</p>

<p>ing suppressed for this command (it probably contained authentication information)</p>

<p>Response: 235 Authentication succeeded</p>

<p>Login response, code 235</p>

<p>Send: MAIL FROM:<a href="&#x6d;&#x61;&#105;&#108;t&#x6f;&#x3a;&#102;&#114;&#97;&#x6e;&#x63;&#111;&#108;&#97;&#x72;&#x72;&#x65;&#97;&#48;2&#x40;&#x67;&#109;&#120;.&#x65;&#x73;">&#102;&#114;&#97;&#x6e;&#x63;&#111;&#108;&#97;&#x72;&#x72;&#x65;&#97;&#48;2&#x40;&#x67;&#109;&#120;.&#x65;&#x73;</a> BODY=8BITMIME SIZE=420^M</p>

<p>-- <strong>MAIL FROM, para indicar quien envía el mensaje.</strong></p>

<p>Response: 250 Requested mail action okay, completed</p>

<p>Send: RCPT TO:<a href="&#109;&#x61;&#105;&#x6c;&#116;&#x6f;:&#99;&#x72;&#105;&#x73;&#116;&#x6f;&#55;&#x32;8&#50;&#x40;&#103;&#x6d;&#120;&#x2e;&#101;&#x73;">&#99;&#x72;&#105;&#x73;&#116;&#x6f;&#55;&#x32;8&#50;&#x40;&#103;&#x6d;&#120;&#x2e;&#101;&#x73;</a>^M</p>

<p>-- <strong>RCPT TO, para indicar el destinatario del mensaje.</strong></p>

<p>Response: 250 OK</p>

<p>Send: DATA^M</p>

<p>-- <strong>DATA, para indicar el comienzo del mensaje, éste finalizará cuando haya una línea únicamente con un punto.</strong></p>

<p>Response: 354 Start mail input; end with &lt;CRLF>.&lt;CRLF></p>

<p>Send: .^M</p>

<p>Response: 250 Requested mail action okay, completed: id=1McY8T-1jYRNK1S8r-00d1aI</p>

<p>Send: QUIT^M</p>

<p>-- <strong>QUIT, para cerrar la sesión</strong></p>

<p>Response: 221 gmx.com Service closing transmission channel connection error quitting 804b0002, ignoring</p>
<p>[<a href="./files/user_files/2smr/franco.larrea/sr_03_01_01_01/tbirdsmtp.log.txt">tbirdsmtp.log.txt</a>]</p>
</div></div>
</blockquote>
<a name="3.1.2"></a><p class="title_sc">1.2. Formato de mensaje</p>
<blockquote><div class="mark_parser"><p>Un mensaje de correo electrónico consiste en una lista de cabeceras, una línea en blanco y el cuerpo del mensaje.</p>

<p>Las cabeceras identifican diferentes parámetros del mensaje, como la dirección del remitente o la fecha.
Las cabeceras más comunes son:</p>

<ul>
<li><strong>Subject</strong>. Indica el asunto del correo electrónico.</li>
<li><strong>From</strong>. Identifica al remitente del correo (formato <code>texto &lt;dirección email&gt;</code>, donde <code>texto</code> suele ser el nombre completo del remitente).</li>
<li><strong>To</strong>. Identifica al destinatario del correo electrónico (formato <code>texto &lt;dirección email&gt;</code>, donde <code>texto</code> suele ser el nombre completo del destinatario).</li>
<li><strong>Date</strong>. Es la fecha del dispositivo desde el que se envió el correo, incluyendo la zona horaria.</li>
</ul>
</div>
<table><tr valign="top"><td><div class="mark_parser"><p>1.</p></div></td><td><div class="mark_parser"><p><a href="https://www.mozilla.org/es-ES/thunderbird/"><strong>Thunderbird</strong></a>. Selecciona un mensaje de ejemplo y obtén sus cabeceras. Explique el significado de los encabezados más relevantes (<a href="https://clouding.io/kb/entender-una-cabecera-de-correo/">ayuda</a>).</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>To: cristo7282@gmx.es</p>

<p>-- <strong>Esto demuestra a quien el mensaje iba dirigido.</strong></p>

<p>From: Franco <a href="&#x6d;&#x61;&#105;&#108;t&#x6f;&#x3a;&#102;&#114;&#97;&#x6e;&#x63;&#111;&#108;&#97;&#x72;&#x72;&#x65;&#97;&#48;2&#x40;&#x67;&#109;&#120;.&#x65;&#x73;">&#102;&#114;&#97;&#x6e;&#x63;&#111;&#108;&#97;&#x72;&#x72;&#x65;&#97;&#48;2&#x40;&#x67;&#109;&#120;.&#x65;&#x73;</a></p>

<p>-- <strong>Aquí se muestra de quien viene el mensaje</strong></p>

<p>Subject: Titulo correo</p>

<p>-- <strong>Esto es lo que el remitente coloca como un tema del contenido del correo electrónico(Asunto).</strong></p>

<p>Message-ID: <a href="&#109;&#97;&#105;&#x6c;&#x74;&#x6f;&#58;&#52;&#53;&#x31;&#x63;&#x31;b&#99;&#51;&#x2d;&#x34;&#x39;e&#48;&#45;&#51;&#x33;&#x35;&#x38;&#45;&#48;&#54;&#x66;&#x38;&#x2d;&#52;&#101;&#53;&#x66;&#x39;&#x31;4&#55;&#54;&#x38;&#x62;&#x37;&#64;&#103;&#109;&#120;&#x2e;&#x65;&#x73;">&#52;&#53;&#x31;&#x63;&#x31;b&#99;&#51;&#x2d;&#x34;&#x39;e&#48;&#45;&#51;&#x33;&#x35;&#x38;&#45;&#48;&#54;&#x66;&#x38;&#x2d;&#52;&#101;&#53;&#x66;&#x39;&#x31;4&#55;&#54;&#x38;&#x62;&#x37;&#64;&#103;&#109;&#120;&#x2e;&#x65;&#x73;</a></p>

<p>-- <strong>Una cadena única asignada por el sistema de electrónico cuando el mensaje es creado.</strong></p>

<p>Date: Mon, 3 Feb 2020 10:09:13 +0100</p>

<p>-- <strong>En esta linea se muestra la fecha y hora en la que el mensaje fue compuesto.</strong></p>

<p>User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:68.0) Gecko/20100101</p>

<p>Thunderbird/68.4.1</p>

<p>MIME-Version: 1.0</p>

<p>Content-Type: text/plain; charset=utf-8; format=flowed</p>

<p>-- <strong>Esta linea informa del formato del mensaje.</strong></p>

<p>Content-Transfer-Encoding: 7bit</p>

<p>Content-Language: en-US</p>

<p>Hola papu</p>
<p>[<a href="./files/user_files/2smr/franco.larrea/sr_03_01_02_01/cabecerasenviado.txt">cabecerasenviado.txt</a>]</p>
</div></div>
</blockquote>
<a name="3.1.3"></a><p class="title_sc">1.3. Práctica</p>
<blockquote><div class="mark_parser"><p><a href="./files/wb_files/sr_03_01_03/practical_simulation.pdf">Simulación de la red</a></p>

<p><a href="./files/wb_files/sr_03_01_03/practical_report.pdf">Informe</a></p>
</div>
<table><tr valign="top"><td><div class="mark_parser"><p>1.</p></div></td><td><div class="mark_parser"><p><strong>Configuración de servicio SMTP</strong>.</p>

<p>El objetivo de este ejercicio es diseñar un procedimiento que configure un nodo como servicio SMTP y servicios complementarios, y verificar su correcto funcionamiento.
El resultado es un conjunto de nodos con usuarios que pueden enviar y recibir mensajes de correo electrónico.</p>

<h1>Configuración de <code>host1</code></h1>

<ul>
<li>La interfaz para la red A tiene una dirección IP estática, compatible con la interfaz en <code>hostN</code>.</li>
<li>La interfaz para la red B tiene una dirección IP compatible con la del router (se puede configurar de forma manual o automática mediante DHCP).</li>
<li>El nodo ofrece los siguientes servicios:

<ul>
<li>servicio SMTP para mensajes salientes,</li>
<li>servicio IMAP para la gestión de buzones (leer y organizar el correo entrante) y</li>
<li>servicio HTTP (aplicación web) para la gestión de buzones (leer y organizar el correo entrante).</li>
</ul></li>
<li>Los siguientes buzones deben estar disponibles en el nodo. Estas cuentas pueden intercambiar correos electrónicos entre sí, y también enviar y recibir mensajes de correo electrónico hacia y desde dominios de Internet:

<ul>
<li><code>pepe@classroom.org</code> y</li>
<li><code>lola@classroom.org</code></li>
</ul></li>
</ul>

<h1>Configuración de <code>hostN</code></h1>

<p>El nodo puede emplear cualquier software de cliente de correo disponible: Thunderbird, Outlook o el comando <code>mail</code>, en cualquier sistema operativo.</p>

<h1>Verificaciones</h1>

<ul>
<li>Estado de los servicios SMTP, IMAP y HTTP</li>
<li>Procesos de los servicios SMTP, IMAP, HTTP</li>
<li>Puertos de escucha de los servicios SMTP, IMAP, HTTP</li>
<li>Logs del servicio SMTP</li>
<li>Intercambio de mensajes en el dominio <code>classroom.org</code></li>
<li>Intercambio de mensajes con usuarios en dominios de Internet</li>
</ul>

<p><a href="./files/wb_files/sr_03_01_03_ex01/help_smtp.html">Ayuda</a></p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p></div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>2.</p></div></td><td><div class="mark_parser"><p>Verifica que los servicios SMTP, IMAP y HTTP están en funcionamiento de tres maneras diferentes.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><ul>
<li>Con el comando <strong><em>sudo ss -ltp</em></strong> comprobamos que puertos están siendo usados.</li>
</ul>

<p>Podemos ver que los puertos empleados para SMTP, IMAP2 y HTTP estan siendo usados.</p>

<pre><code>State       Recv-Q Send-Q Local Address:Port                 Peer Address:Port                
LISTEN      0      128           *:ssh                         *:*                     users:(("sshd",pid=387,fd=3))
LISTEN      0      100           *:smtp                        *:*                     users:(("smtpd",pid=18456,fd=6),("master",pid=18362,fd=13))
LISTEN      0      100           *:imap2                       *:*                     users:(("dovecot",pid=18184,fd=33))
LISTEN      0      128          :::ssh                        :::*                     users:(("sshd",pid=387,fd=4))
LISTEN      0      100          :::smtp                       :::*                     users:(("smtpd",pid=18456,fd=7),("master",pid=18362,fd=14))
LISTEN      0      100          :::imap2                      :::*                     users:(("dovecot",pid=18184,fd=34))
LISTEN      0      128          :::http                       :::* 
</code></pre>

<ul>
<li>Con el comando <strong><em>ps -edf | grep apache2</em></strong> mostramos los procesos y buscamos solo el que nos interesa.</li>
</ul>

<pre><code>root     18169     1  0 13:49 ?        00:00:00 /usr/sbin/apache2 -k start
www-data 18170 18169  0 13:49 ?        00:00:00 /usr/sbin/apache2 -k start
www-data 18171 18169  0 13:49 ?        00:00:00 /usr/sbin/apache2 -k start
www-data 18172 18169  0 13:49 ?        00:00:00 /usr/sbin/apache2 -k start
www-data 18174 18169  0 13:49 ?        00:00:00 /usr/sbin/apache2 -k start
www-data 18368 18169  0 13:49 ?        00:00:00 /usr/sbin/apache2 -k start
www-data 18369 18169  0 13:49 ?        00:00:00 /usr/sbin/apache2 -k start
www-data 18372 18169  0 13:49 ?        00:00:00 /usr/sbin/apache2 -k start
www-data 18373 18169  0 13:49 ?        00:00:00 /usr/sbin/apache2 -k start
www-data 18374 18169  0 13:49 ?        00:00:00 /usr/sbin/apache2 -k start
www-data 18375 18169  0 13:49 ?        00:00:00 /usr/sbin/apache2 -k start
student  18468   936  0 13:53 pts/0    00:00:00 grep apache2
</code></pre>

<ul>
<li>Con el comando <strong><em>ps -edf | grep postfix</em></strong> mostramos los procesos y buscamos solo el que nos interesa.</li>
</ul>

<pre><code>root     18362     1  0 13:49 ?        00:00:00 /usr/lib/postfix/sbin/master -w
postfix  18364 18362  0 13:49 ?        00:00:00 pickup -l -t unix -u -c
postfix  18365 18362  0 13:49 ?        00:00:00 qmgr -l -t unix -u
postfix  18458 18362  0 13:52 ?        00:00:00 tlsmgr -l -t unix -u -c
student  18500   936  0 13:54 pts/0    00:00:00 grep postfix
</code></pre>

<ul>
<li>Con el comando <strong><em>ps -edf | grep dovecot</em></strong> mostramos los procesos y buscamos solo el que nos interesa.</li>
</ul>

<pre><code>root     18184     1  0 13:49 ?        00:00:00 /usr/sbin/dovecot
dovecot  18185 18184  0 13:49 ?        00:00:00 dovecot/anvil
root     18186 18184  0 13:49 ?        00:00:00 dovecot/log
student  18472   936  0 13:53 pts/0    00:00:00 grep dovecot
</code></pre>

<ul>
<li>Con el comando <strong><em>systemctl status apache2</em></strong> vemos el estado del servicio.</li>
</ul>

<pre><code>● apache2.service - The Apache HTTP Server
   Loaded: loaded (/lib/systemd/system/apache2.service; enabled; vendor preset: enabled
)
   Active: active (running) since Wed 2020-02-05 13:49:31 CET; 6min ago
  Process: 18158 ExecStop=/usr/sbin/apachectl stop (code=exited, status=0/SUCCESS)
  Process: 17966 ExecReload=/usr/sbin/apachectl graceful (code=exited, status=0/SUCCESS
)
  Process: 18165 ExecStart=/usr/sbin/apachectl start (code=exited, status=0/SUCCESS)
 Main PID: 18169 (apache2)
    Tasks: 11 (limit: 4915)
   CGroup: /system.slice/apache2.service
           ├─18169 /usr/sbin/apache2 -k start
           ├─18170 /usr/sbin/apache2 -k start
           ├─18171 /usr/sbin/apache2 -k start
           ├─18174 /usr/sbin/apache2 -k start
           ├─18368 /usr/sbin/apache2 -k start
           ├─18369 /usr/sbin/apache2 -k start
           ├─18372 /usr/sbin/apache2 -k start
           ├─18373 /usr/sbin/apache2 -k start
           ├─18374 /usr/sbin/apache2 -k start
           ├─18375 /usr/sbin/apache2 -k start
           └─18473 /usr/sbin/apache2 -k start
</code></pre>

<ul>
<li>Con el comando <strong><em>systemctl status postfix</em></strong> vemos el estado del servicio.</li>
</ul>

<pre><code>● postfix.service - Postfix Mail Transport Agent
   Loaded: loaded (/lib/systemd/system/postfix.service; enabled; vendor preset: enabled
)
   Active: active (exited) since Wed 2020-02-05 13:49:46 CET; 7min ago
  Process: 18363 ExecStart=/bin/true (code=exited, status=0/SUCCESS)
 Main PID: 18363 (code=exited, status=0/SUCCESS)
</code></pre>

<ul>
<li>Con el comando <strong><em>systemctl status dovecot</em></strong> vemos el estado del servicio.</li>
</ul>

<pre><code>● dovecot.service - Dovecot IMAP/POP3 email server
   Loaded: loaded (/lib/systemd/system/dovecot.service; enabled; vendor preset: enabled
)
   Active: active (running) since Wed 2020-02-05 13:49:39 CET; 7min ago
     Docs: man:dovecot(1)
           http://wiki2.dovecot.org/
  Process: 18178 ExecStop=/usr/bin/doveadm stop (code=exited, status=0/SUCCESS)
  Process: 18183 ExecStart=/usr/sbin/dovecot (code=exited, status=0/SUCCESS)
 Main PID: 18184 (dovecot)
    Tasks: 6 (limit: 4915)
   CGroup: /system.slice/dovecot.service
           ├─18184 /usr/sbin/dovecot
           ├─18185 dovecot/anvil
           ├─18186 dovecot/log
           ├─18475 dovecot/config
           ├─18476 dovecot/auth
           └─18477 dovecot/auth -w
</code></pre>
</div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>3.</p></div></td><td><div class="mark_parser"><p>Obtén los mensajes de log correspondientes a un correo enviado a través de SMTP.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>Con el comando <strong><em>sudo tail -f 10 /var/log/mail.log</em></strong> vemos las ultimas diez lineas del log del correo.</p>

<p>Después de ejecutar este comando he enviado un correo y ha salido lo siguiente:</p>

<pre><code>Feb  5 13:58:35 study postfix/pickup[18364]: 018AFA0812: uid=33 from=&lt;pepa@prueba.org&gt;
Feb  5 13:58:35 study postfix/cleanup[18533]: 018AFA0812: message-id=&lt;263387111624581c$
Feb  5 13:58:35 study postfix/qmgr[18365]: 018AFA0812: from=&lt;pepa@prueba.org&gt;, size=51$
Feb  5 13:58:35 study postfix/local[18534]: 018AFA0812: to=&lt;juan@prueba.org&gt;, relay=lo$
Feb  5 13:58:35 study postfix/qmgr[18365]: 018AFA0812: removed
Feb  5 13:58:35 study dovecot: imap-login: Login: user=&lt;pepa&gt;, method=PLAIN, rip=127.0$
Feb  5 13:58:35 study dovecot: imap(pepa): Logged out in=462 out=663
Feb  5 13:58:35 study dovecot: imap-login: Login: user=&lt;pepa&gt;, method=PLAIN, rip=127.0$
Feb  5 13:58:35 study dovecot: imap(pepa): Logged out in=44 out=523
Feb  5 13:58:35 study dovecot: imap-login: Login: user=&lt;pepa&gt;, method=PLAIN, rip=127.0$
Feb  5 13:58:35 study dovecot: imap(pepa): Error: file_dotlock_create(/var/mail/pepa) $
Feb  5 13:58:35 study dovecot: imap(pepa): Error: file_dotlock_create(/var/mail/pepa) $
Feb  5 13:58:35 study dovecot: imap-login: Login: user=&lt;pepa&gt;, method=PLAIN, rip=127.0$
Feb  5 13:58:35 study dovecot: imap(pepa): Error: file_dotlock_create(/var/mail/pepa) $
Feb  5 13:58:35 study dovecot: imap(pepa): Logged out in=292 out=3367
Feb  5 13:58:35 study dovecot: imap(pepa): Logged out in=119 out=696



</code></pre>
</div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>4.</p></div></td><td><div class="mark_parser"><p>Escribe un comando <code>mail</code> para enviar un correo electrónico utilizando un servicio SMTP. Ejecútalo y captura los mensajes SMTP.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>Con el siguiente comando enviamos un correo a user2@examen.org.</p>

<pre><code>echo "Hola mundo" | s-nail -s "Correo de prueba" \
 -S from=user1@examen.org    \
 -S smtp=192.168.0.244:25    \
 -S smtp-auth-user=user1     \
 -S smtp-auth-password=user1 \
user2@examen.org
</code></pre>

<p>Aqui podemos ver el correo desde la bandeja de <strong><em>user2</em></strong> :</p>

<p><img src="./files/user_files/2smr/franco.larrea/sr_03_01_03_04/correoprueba.png" alt="Prueba del mensaje" /></p>

<p>Aqui podemos ver el log del envio de este mensaje:</p>

<p><strong><em>sudo tail -f 10 /var/log/mail.log</em></strong></p>

<pre><code>Feb  7 14:13:41 study postfix/smtpd[18233]: connect from unknown[192.168.0.114]
Feb  7 14:13:41 study postfix/smtpd[18233]: 81126A0060: client=unknown[192.168.0.114]
Feb  7 14:13:41 study postfix/cleanup[18236]: 81126A0060: message-id=&lt;20200207131341.rA48uUPXB%user1@examen.org&gt;
Feb  7 14:13:41 study postfix/qmgr[1677]: 81126A0060: from=&lt;user1@examen.org&gt;, size=371, nrcpt=1 (queue active)
Feb  7 14:13:41 study postfix/smtpd[18233]: disconnect from unknown[192.168.0.114] helo=1 mail=1 rcpt=1 data=1 quit=1 commands=5
Feb  7 14:13:41 study postfix/local[18237]: 81126A0060: to=&lt;user2@examen.org&gt;, relay=local, delay=0.05, delays=0.05/0/0/0, dsn=2.0.0, status=sent (delivered to mailbox)
Feb  7 14:13:41 study postfix/qmgr[1677]: 81126A0060: removed
</code></pre>
<p>[<a href="./files/user_files/2smr/franco.larrea/sr_03_01_03_04/correoprueba.png">correoprueba.png</a>]</p>
</div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>5.</p></div></td><td><div class="mark_parser"><p>Al configurar un cliente de correo electrónico, generalmente es necesario especificar un servidor de correo saliente y un servidor de correo entrante. Identifica la función de cada uno e indique los protocolos utilizados para la comunicación.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>El servidor de correo entrante emplea IMAP por el puerto 143. Este se emplea como "buzón" donde se almacenan los correos</p>

<p>Y el servidor de correo saliente emplea SMTP por el puerto 25. Este se emplea para el envío de correos.</p>
<p>[<a href="./files/user_files/2smr/franco.larrea/sr_03_01_03_05/thunderbird.png">thunderbird.png</a>]</p>
</div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>6.</p></div></td><td><div class="mark_parser"><p>Si al enviar un correo electrónico no se muestra ningún mensaje de error, ¿significa que el mensaje ha llegado al destinatario sin problemas? Razona la respuesta.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>Puede que no haya ningún error y que el destinatario ha recibido el mensaje o puede que el mensaje de error aun no haya llegado a tu bandeja de entrada.</p>
</div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>7.</p></div></td><td><div class="mark_parser"><p>Utiliza el comando <code>dig</code> para averiguar la dirección IP de los servidores que pueden emplearse para entregar un correo electrónico a <code>test@rediris.es</code>.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>Primero averiguamos la dirección de los servidores.</p>

<p><strong><em>dig -t MX rediris.com</em></strong></p>

<pre><code>;; ANSWER SECTION:
rediris.com.        29  IN  MX  10 mx06.puc.rediris.es.
rediris.com.        29  IN  MX  10 mx05.puc.rediris.es.
</code></pre>

<ul>
<li>nombre del servidor : iessanvicente.com.</li>
<li>nombre de los servidores de correo:

<ul>
<li>mx06.puc.rediris.es.</li>
<li>mx05.puc.rediris.es.</li>
</ul></li>
</ul>

<hr />

<p>Y luego averiguamos su IP.</p>

<p><strong><em>dig 10 mx06.puc.rediris.es.</em></strong></p>

<pre><code>;; ANSWER SECTION:
mx06.puc.rediris.es.    10  IN  A   130.206.19.162
</code></pre>

<p><strong><em>dig 10 mx05.puc.rediris.es.</em></strong></p>

<pre><code>;; ANSWER SECTION:
mx05.puc.rediris.es.    9   IN  A   130.206.19.162
</code></pre>
</div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>8.</p></div></td><td><div class="mark_parser"><p>¿Por qué el MUA no envía los mensajes directamente al MTA del dominio del destinatario?</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>Porque en el caso que el MUA enviara los mensajes y el MTA destino estuviera inaccesible, esos mensajes se perderían, en cambio si lo mandas a algún MTA, este se encargará de reenviarlo a su destino en un determinado tiempo.</p>
</div></div>
</blockquote>
<a name="3.2"></a><p class="title_un">2. Shell seguro (SSH)</p>
<div class="mark_parser"><p>SSH (Secure Shell, shell seguro) tiene como objetivo proporcionar un canal seguro a través de una red no segura, mediante criptografía.</p>

<p>Hay dos procesos involucrados en SSH:</p>

<ul>
<li><strong>Cliente</strong>. Es el que inicia la conexión.</li>
<li><strong>Servidor</strong>. Es el que está a la espera para establecer conexión (<em>escuchando</em>).</li>
</ul>

<p>SSH funciona sobre TCP, puerto 22.</p>

<p><img src="./files/wb_files/sr_03_02/ssh_tunneling.jpg" alt="ssh_tunneling.jpg" /></p>

<h1>Seguridad</h1>

<p>SSH utiliza criptografía de clave pública para proporcionar autenticación, confidencialidad e integridad.
La autenticación de usuario se puede realizar principalmente de dos maneras:</p>

<ul>
<li>con contraseña asociada al nombre de usuario, o</li>
<li>con un par de claves (pública y privada).</li>
</ul>

<p>Cuando se utiliza un par de claves, se genera un par para cada usuario.
La clave pública se ubica en todos los nodos que deben permitir el acceso al usuario propietario de la clave privada correspondiente (el propietario debe mantener la clave privada en secreto).
Durante el proceso de autenticación, se envía la clave pública, pero la clave privada nunca se transfiere a través de la red.
SSH verifica si el usuario que ofrece la clave pública posee también la clave privada correspondiente.</p>

<h1>Aplicaciones</h1>

<h2>Ejecución remota de comandos</h2>

<p>El cliente envía un comando del sistema operativo del servidor, y el servidor lo ejecuta, dando lugar a un proceso con datos de entrada y salida.
Los datos de entrada y salida estándar del proceso servidor se transfieren desde y hacia el cliente a través de la red.
A su vez, el proceso cliente obtiene y produce dichos datos empleando su propia entrada y salida estándar</p>

<h2>Terminal remoto</h2>

<p>Después de una autenticación satisfactoria, el servidor crea un terminal virtual (<em>driver</em>) que se asocia a un proceso (generalmente un shell).
La entrada en el terminal para el proceso la proporciona realmente el cliente desde su teclado, a través de la red; la salida del proceso se envía a la pantalla cliente, y la muestra de acuerdo con las características y configuración de su terminal.</p>

<h2>Reenvío de puertos</h2>

<p>Los flujos de datos TCP (envío y recepción) son reenviados por el servidor (reenvío de puerto remoto) o por el cliente (reenvío de puerto local), una vez descifrado, a un proceso que se ejecuta en el mismo nodo o en otro diferente.
Esto permite acceder a cualquier servicio desde otra red, de forma segura.</p>

<h2>Túnel</h2>

<p>El cliente y el servidor crean interfaces de red virtuales (<em>driver</em>), que se pueden configurar para encaminar el tráfico entre nodos ubicados en redes diferentes.
El cliente y el servidor intercambian el tráfico de forma segura entre dichas interfaces virtuales.
Esta característica se puede emplear para construir una VPN (Virtual Private Network, red privada virtual).</p>

<h2>Reenvío X11</h2>

<p>Los programas ejecutados en el servidor pueden emplear un servicio X11, para utilizar entrada y salida gráficas.
Con SSH, el tráfico X11 se transfiere entre el cliente y el servidor de forma segura, y un servicio X11 que se ejecuta en el nodo cliente interpreta dicho tráfico empleando los dispositivos de entrada y salida del cliente.</p>

<h2>Transferencia de archivos</h2>

<p>La transferencia segura de archivos y la administración remota del sistema de archivos se pueden realizar a través de diferentes métodos como <code>scp</code>, <code>sftp</code>, <code>rsync</code> y otros.</p>
</div>
<a name="3.2.1"></a><p class="title_sc">2.1. Otros protocolos de control remoto.</p>
<blockquote><div class="mark_parser">
</div>
<table><tr valign="top"><td><div class="mark_parser"><p>1.</p></div></td><td><div class="mark_parser"><p><a href="http://netcat.sourceforge.net/"><strong>Netcat</strong></a>. Emplea el comando <code>nc</code> para transferir datos entre dos procesos que se ejecutan en diferentes nodos.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p></div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>2.</p></div></td><td><div class="mark_parser"><p><a href="http://netcat.sourceforge.net/"><strong>Netcat</strong></a>. Emplea el comando <code>nc</code> para ejecutar remotamente un shell y, por lo tanto, ofrecer una solución básica de acceso remoto.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p></div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>3.</p></div></td><td><div class="mark_parser"><p><a href="https://launchpad.net/netkit-telnet"><strong>Telnet</strong></a>. SSH se diseñó como sustitución para Telnet y otros protocolos de shell remoto no seguros, tales como <code>rlogin</code>, <code>rsh</code> y <code>rexec</code>. Esos protocolos envían información, incluyendo contraseñas, en texto plano. Por lo tanto, son susceptibles a ataques de confidencialidad e integridad. Emplea el cliente y servidor <code>telnet</code> para establecer una sesión remota. Realiza una captura para verificar que efectivamente los datos viajan en texto plano.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p></div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>4.</p></div></td><td><div class="mark_parser"><p><a href="https://launchpad.net/netkit-telnet"><strong>Telnet</strong></a>. Emplea el cliente <code>telnet</code> para verificar si un servidor aloja un servicio HTTP, un servicio FTP o un servicio SMTP.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p></div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>5.</p></div></td><td><div class="mark_parser"><p><a href="http://www.karlrunge.com/x11vnc/"><strong>X11vnc</strong></a>. Instala el paquete X11vnc para proporcionar acceso remoto en modo gráfico. Explica el procedimiento y el principio de funcionamiento.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p></div></div>
</blockquote>
<a name="3.2.2"></a><p class="title_sc">2.2. Práctica</p>
<blockquote><div class="mark_parser"><p><a href="./files/wb_files/sr_03_02_02/practical_simulation.pdf">Simulación de la red</a></p>

<p><a href="./files/wb_files/sr_03_02_02/practical_report.pdf">Informe</a></p>
</div>
<table><tr valign="top"><td><div class="mark_parser"><p>1.</p></div></td><td><div class="mark_parser"><p><strong>Configuración de servicio SSH</strong></p>

<p>El objetivo en este ejercicio es diseñar un procedimiento que configure un nodo como servicio SSH, y verificar que los clientes puedan controlar dicho nodo.</p>

<h1>Configuración de <code>host1</code></h1>

<ul>
<li>La interfaz para la red A tiene una dirección IP estática, compatible con la interfaz en <code>hostN</code>.</li>
<li>La interfaz para la red B tiene una dirección IP compatible con la del router (se puede configurar de forma manual o automática mediante DHCP).</li>
<li>El nodo puede ser controlado desde otros ordenadores a través de SSH con dos cuentas de usuario:

<ul>
<li>el usuario <code>john</code> se autentica empleando una contraseña y</li>
<li>el usuario <code>mary</code> se autentica utilizando una clave pública (no se requiere contraseña).</li>
</ul></li>
</ul>

<h1>Configuración de <code>hostN</code></h1>

<p>El nodo puede emplear cualquier software de cliente SSH disponible para administrar el servidor: Putty, OpenSSH, etc., en cualquier sistema operativo.</p>

<h1>Verificaciones</h1>

<ul>
<li>Estado del servicio SSH</li>
<li>Proceso del servicio SSH</li>
<li>Puerto de escucha del servicio SSH</li>
<li>Sesiones activas por SSH (quién está conectado)</li>
<li>Sesiones finalizadas de SSH (últimos usuarios logueados)</li>
<li>Acceso con o sin contraseña, dependiendo del cada usuario</li>
</ul>

<p><a href="./files/wb_files/sr_03_02_02_ex01/help_ssh.html">Ayuda</a></p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p></div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>2.</p></div></td><td><div class="mark_parser"><p>Verifica que el servicio SSH esté funcionando de tres maneras diferentes.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p></div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>3.</p></div></td><td><div class="mark_parser"><p>Emplea el comando <code>who</code> para averiguar las sesiones SSH activas en el sistema.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p></div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>4.</p></div></td><td><div class="mark_parser"><p>Emplea los comandos <code>last</code>, <code>lastb</code> y <code>lastlog</code> para mostrar las sesiones que han tenido lugar en el sistema y explica la diferencia entre los comandos.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p></div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>5.</p></div></td><td><div class="mark_parser"><p>Emplea el comando <code>scp</code> para transferir un archivo desde un nodo cliente SSH a una nodo servidor SSH, y viceversa.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p></div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>6.</p></div></td><td><div class="mark_parser"><p>Instala una aplicación que requiera interfaz gráfica de usuario (GUI) a través de un servidor X11, en el nodo donde se ejecuta el servicio SSH. Emplea un cliente SSH para ejecutar remotamente esa aplicación y mostrar la interfaz en el cliente.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p></div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>7.</p></div></td><td><div class="mark_parser"><p>Escribe un comando para transferir una imagen comprimida de una partición de disco desde el nodo servidor SSH al nodo cliente SSH. Emplea los comandos <code>ssh</code>,  <code>dd</code> y <code>gzip</code>.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p></div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>8.</p></div></td><td><div class="mark_parser"><p>Utiliza el reenvío de puertos SSH para acceder a servicios internos no seguros (HTTP, FTP, etc.) de manera segura desde un cliente fuera de la red.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p></div></div>
<table><tr valign="top"><td><div class="mark_parser"><p>9.</p></div></td><td><div class="mark_parser"><p>Compara los dos métodos de autenticación configurados (con y sin contraseñas) enumerando las ventajas de cada uno.</p>
</div></td></tr></table>
<div class="note"><div class="mark_parser"><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p></div></div>
</blockquote>
</body>
</html>
